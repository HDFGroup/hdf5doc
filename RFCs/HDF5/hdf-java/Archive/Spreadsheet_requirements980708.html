<HTML>
<HEAD>
   <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
   <META NAME="Generator" CONTENT="Microsoft Word 97">
   <META NAME="Template" CONTENT="C:\PROGRAM FILES\MICROSOFTOFFICE\OFFICE\html.dot">
   <META NAME="GENERATOR" CONTENT="Mozilla/4.05 [en] (Win95; I) [Netscape]">
   <TITLE>requirements</TITLE>
</HEAD>
<BODY BGCOLOR="FFFFFF" LINK="#0000FF" VLINK="#800080">

<CENTER>
<H2>
Java HDF Viewer Spreadsheet Package Requirements<BR>
(revised 7/8/98)</H2></CENTER>

<CENTER>Robert E. McGrath (<A HREF="mailto:mcgrath@ncsa.uiuc.edu">mcgrath@ncsa.uiuc.edu</A>)</CENTER>

<H3>
Introduction</H3>
The Java HDF Viewer provides a "spreadsheet" feature for viewing and manipulating
arrays and tables of numbers. The goal of this sub project is to
reimplement the spreadsheet, keeping the current features, adding additional
features, and creating a more general, flexible, and extensible package.
This document describes the desired spreadsheet features and other technical
requirements.
<H3>
1. General Requirements</H3>
The fundamental goal of this work is to create a Java package that replaces
the current "spreadsheet" in the JHV. This package should meet the
following technical requirements:
<OL>
<LI>
The spreadsheet must be a separate package, which can be compiled independently
of the rest of the HDF Java products</LI>

<OL>
<LI>
The spreadsheet should not directly access HDF interfaces or files</LI>

<LI>
The spreadsheet should not use classes from other JHV packages without
a prior design review of that dependency</LI>
</OL>

<LI>
The spreadsheet must support similar features across different types of
HDF objects, including at least:</LI>

<OL>
<LI>
1, 2 and 3 dimensional arrays of numbers (e.g., from HDF SDS)</LI>

<LI>
8-bit and 24-bit images (same look and feel as 2D SDS)</LI>

<LI>
tables of numbers, arrays, and strings (e.g., from HDF Vdata)</LI>
</OL>

<LI>
The spreadsheet must be able to support data from formats other than HDF</LI>

<LI>
The new spreadsheet must support all the user visible features of the current
JHV spreadsheet (see <A HREF="#SECT2">section 2</A> below for a more detailed
discussion of this requirement)</LI>

<LI>
The spreadsheet will fix all outstanding bugs reported against the current
spreadsheet (see <A HREF="#SECT1.2">section 1.2</A> below for a list of
specific bugs)</LI>

<LI>
The spreadsheet must not require that the entire data object (array, table,
etc.) reside in memory. (See <A HREF="#SECT3">section 3</A> below
for a more detailed discussion of this requirement)</LI>

<OL>
<LI>
Large objects should be "paged" in a generic way</LI>

<LI>
It should be possible to navigate and scroll through the data efficiently</LI>
</OL>

<LI>
The spreadsheet should provide a general and flexible package that can
be easily extended.</LI>

<OL>
<LI>
cells, rows, and columns should be objects that can be manipulated</LI>
</OL>

<LI>
<FONT COLOR="#000000">The spreadsheet must support</FONT><FONT COLOR="#FF0000">
</FONT>creation and modification of data. (See <A HREF="#SECT4">section
4</A> below for a more detailed discussion of this requirement.)</LI>

<LI>
The spreadsheet must be able to function as an applet in a Java-enabled
Web browser</LI>
</OL>
<A NAME="SECT1.1"></A><B>1.1 Optional Requirements</B>

<P>The spreadsheet package ideally may but is not required to:
<OL>
<LI>
support the full range of user visible features seen in commercial "spreadsheets",
such as complex dependencies, formulae, and report generation</LI>
</OL>
<A NAME="SECT1.2"></A><B>1.2 Bugs and Enhancements Addressed</B>

<P>The spreadsheet must (attempt to) close the following bugs and enhancement
requests, and other bugs which may be discovered:
<OL>
<LI>
Bug <A HREF="http://hdf.ncsa.uiuc.edu/QA/bugs/bug202.html">202</A></LI>

<LI>
Bug <A HREF="http://hdf.ncsa.uiuc.edu/QA/bugs/bug206.html">206</A></LI>

<LI>
Bug <A HREF="http://hdf.ncsa.uiuc.edu/QA/bugs/bug207.html">207</A></LI>

<LI>
Bug <A HREF="http://hdf.ncsa.uiuc.edu/QA/bugs/bug208.html">208</A></LI>
</OL>
The spreadsheet must address memory usage and performance problems as apply
to the spreadsheet, including but not limited to:
<OL>
<LI>
Bug <A HREF="http://hdf.ncsa.uiuc.edu/QA/bugs/bug203.html">203</A></LI>

<LI>
Bug <A HREF="http://hdf.ncsa.uiuc.edu/QA/bugs/bug218.html">218</A></LI>
</OL>
The spreadsheet may address some of the general display issues, including
but not limited to:
<OL>
<LI>
Bug <A HREF="http://hdf.ncsa.uiuc.edu/QA/bugs/bug204.html">204</A></LI>

<LI>
Bug <A HREF="http://hdf.ncsa.uiuc.edu/QA/bugs/bug210.html">210</A></LI>

<LI>
Bug <A HREF="http://hdf.ncsa.uiuc.edu/QA/bugs/bug211.html">211</A></LI>

<LI>
Bug <A HREF="http://hdf.ncsa.uiuc.edu/QA/bugs/bug212.html">212</A></LI>
</OL>

<H3>
<A NAME="SECT2"></A>2. User visible features</H3>
Overall, the new spreadsheet package is required to support all the user
features currently provided by the JHV spreadsheet. Since the redesigned
spreadsheet will have a completely new (and better) look and feel, some
old features may not make sense in new spreadsheet. Therefore, the
general requirement will applied with judgment.

<P>The spreadsheet package should support the following user visible
features:
<OL>
<LI>
viewing the data of</LI>

<OL>
<LI>
an array or</LI>

<LI>
a table,</LI>

<BR>with appropriate numerical formats:
<OL>
<LI>
 integer 32-, 16-bit</LI>

<LI>
 float</LI>

<LI>
 character, string (in tables)</LI>

<LI>
 arrays (in tables)</LI>
</OL>
</OL>

<LI>
display 2-D arrays and tables</LI>

<OL>
<LI>
display higher dimensional structures as 2-D planes</LI>

<LI>
sliders, arrows, and menus to navigate higher dimensional data</LI>
</OL>

<LI>
selecting cells, blocks of cells, columns, rows, and ranges of columns
and rows and pass the selected data to other functions. Examples
of the receiving functions might be:</LI>

<OL>
<LI>
save selected data as a new HDF or ASCII (<A HREF="http://hdf.ncsa.uiuc.edu/java-hdf-html/docs/HAIF/ascii2hdf.html">HAIF</A>)
file</LI>

<LI>
create GIF image file from selected data</LI>

<LI>
create X-Y plots from selected columns of a table</LI>
</OL>

<LI>
display of row and column labels and axes labels in appropriate formats</LI>

<OL>
<LI>
toggle between index and scale values</LI>

<LI>
select row or column label to select whole row or column</LI>

<LI>
display summary information for each dimension, e.g., max, etc.</LI>
</OL>

<LI>
adjustable display, with stretchable columns to show data values to user
selected area of screen.</LI>

<LI>
editing of data and label values in the spreadsheet (See section 4 below)</LI>
</OL>

<H3>
<A NAME="SECT3"></A>3. Handling Large Data Objects</H3>
One of the most important requirements for the new spreadsheet package
is that it must efficiently support very large data objects, specifically,
tables and arrays which cannot fit completely into memory.

<P>The main problem to solve is how to manage the memory used in a way
that is transparent to the user, and works the same way across different
platforms and versions of Java.

<P>It should be noted that our software must not only manage the memory
needed for data, we must also be careful about the data structures of our
program. E.g., if the objects that manage spreadsheet take up many
times the memory of the data itself (a very realistic possibility), this
will greatly exacerbate the memory limitations.

<P>The spreadsheet should be designed to create data structures in memory
only when needed, and to request data only when needed. The spreadsheet
should assume the existence of a general "demand paging" or buffer scheme,
which will supply data from disk (e.g., parts of an HDF file) on demand.
It should be recognized that the spreadsheet package itself should not
be responsible for implementing such a "paging" scheme. This should
be done for the whole JHV package, indeed, this should probably be part
of the JHI low level interface itself.
<H3>
<A NAME="SECT4"></A>4. Editing Data</H3>
<FONT COLOR="#000000">"Modification of data" is one of the most requested
features from JHV users. This takes two forms:</FONT>
<OL>
<LI>
<FONT COLOR="#000000">Ability to modify single values by hand. For
instance, modify a few parameter values in a Vdata.</FONT></LI>

<LI>
<FONT COLOR="#000000">Ability to perform element-by-element arithmetic
operations on equal-sized objects of the same type. E.g. given three 100x200
arrays X, Y and Z, perform the operation W = X+Y - Z.</FONT></LI>
</OL>
<FONT COLOR="#000000"><FONT SIZE=+0>#1 is a lot easier than #2, and is
probably more often requested. #2 was supported in earlier NCSA tools.
I'd vote strongly for supporting #1.</FONT></FONT>

<P><FONT COLOR="#000000"><FONT SIZE=+0>Implementation of this apparently
simple feature has several components:</FONT></FONT>
<OL>
<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>a GUI interface which allows selection
and typing of new values</FONT></FONT></LI>

<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>"active" components which capture and
retain new values</FONT></FONT></LI>

<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>a mechanism for permanently storing
the changed values. Here there are numerous variants of vastly different
implications for implementation, for example:</FONT></FONT></LI>

<OL>
<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>changes only affect the screen, and
cannot be saved permanently</FONT></FONT></LI>

<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>changed data can be saved to a new
file, no update to existing files allowed</FONT></FONT></LI>

<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>changed data is updated in the original
file</FONT></FONT></LI>
</OL>

<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>a model of the semantics user interaction,
i.e., what items can be changed, what is the semantics of "save", what
is the semantics of "undo", what kinds of insertion and deletion are allowed,
<I>etc.</I></FONT></FONT></LI>
</OL>
<FONT COLOR="#000000"><FONT SIZE=+0>In addition, editing data in a spreadsheet
should be considered in the context of an overall "editing" capability
for the JHV. This would include consistent editing features across
other types of objects and of metadata. A list of features to consider
might include:</FONT></FONT>
<OL>
<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>manipulating image data</FONT></FONT></LI>

<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>editing and/or ingesting palettes</FONT></FONT></LI>

<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>editing annotations, attributes, labels,
scales, and so on</FONT></FONT></LI>

<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>converting data</FONT></FONT></LI>

<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>editing the structure of the file</FONT></FONT></LI>

<OL>
<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>deleting whole objects</FONT></FONT></LI>

<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>inserting whole objects from external
data</FONT></FONT></LI>

<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>creating an "empty" object, and ingesting
external data into it</FONT></FONT></LI>

<LI>
<FONT COLOR="#000000"><FONT SIZE=+0>manipulating Vgroups</FONT></FONT></LI>
</OL>
</OL>
<FONT COLOR="#000000"><FONT SIZE=+0>It would not be wise for the spreadsheet
to implement too many editing features until a coherent overall plan for
"editing" features is considered.</FONT></FONT>

<P><FONT COLOR="#000000"><FONT SIZE=+0>For this reason, the key requirement
for the spreadsheet is to provide the GUI which allows data to be changed,
and retains the changes. The spreadsheet must be able to "write out"
all data modified since the last write. The mechanism for saving
data, and the semantics of when data is saved and how, are beyond the scope
of the spreadsheet.</FONT></FONT>

<P>
<HR>
<BR><I><FONT SIZE=-1>NCSA HDF Java Team 7/8/98</FONT></I>
</BODY>
</HTML>
