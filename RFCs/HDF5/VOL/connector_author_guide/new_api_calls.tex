\section{New VOL API Routines}
\label{sec:api}
New API routines have been added to the HDF5 library to manage VOL connectors. This section details each new API call and explains their intended usage.

Additionally, a set of API calls that map directly to the VOL callbacks themselves have been added to aid in the development of passthrough connectors which can be stacked and/or split. For more information on usage refer to Section~\ref{sec:stack}. The routines are listed in Appendix~\ref{sec:B}.

\bigskip

\subsection{H5VLpublic.h}

\subsubsection{H5VLregister\_connector}
\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
hid_t H5VLregister_connector(const H5VL_class_t *cls, hid_t vipl_id);
\end{lstlisting}

\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
  {\tt cls} & (IN): A pointer to the connector structure to register.\\
  {\tt vipl\_id} & (IN): An ID for a VOL initialization property list (vipl).\\
\end{tabular}
\end{mdframed}

Registers a user-defined VOL connector with the HDF5 library and returns an identifier for that connector (\texttt{H5I\_INVALID\_HID} on errors). This function is used when the application has direct access to the connector it wants to use and is able to obtain a pointer for the connector structure to pass to the HDF5 library.
\bigskip

\subsubsection{H5VLregister\_connector\_by\_name}
\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
hid_t H5VLregister_by_name(const char *connector_name, hid_t vipl_id);
\end{lstlisting}
\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
  {\tt name} & (IN): The connector name to search for and register.\\
  {\tt vipl\_id} & (IN): An ID for a VOL initialization property list (vipl).\\
\end{tabular}
\end{mdframed}
Registers a VOL connector with the HDF5 library given the name of the connector and returns an identifier for it (\texttt{H5I\_INVALID\_HID} on errors). If the connector is already registered, the library will create a new identifier for it and returns it to the user; otherwise the library will search the plugin path for a connector of that name, loading and registering it, returning an ID for it, if found. See the VOL User Guide for more information on loading plugins and the search paths.
\bigskip

\subsubsection{H5VLregister\_connector\_by\_value}
\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
hid_t H5VLregister_by_value(H5VL_class_value_t connector_value, hid_t vipl_id);
\end{lstlisting}
\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
  {\tt connector\_value} & (IN): The connector value to search for and register.\\
  {\tt vipl\_id} & (IN): An ID for a VOL initialization property list (vipl).\\
\end{tabular}
\end{mdframed}
Registers a VOL connector with the HDF5 library given a value for the connector and returns an identifier for it (\texttt{H5I\_INVALID\_HID} on errors). If the connector is already registered, the library will create a new identifier for it and returns it to the user; otherwise the library will search the plugin path for a connector of that name, loading and registering it, returning an ID for it, if found. See the VOL User Guide for more information on loading plugins and the search paths.
\bigskip


\subsubsection{H5VLis\_connector\_registered}
\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
htri_t H5VLis_connector_registered(const char *name);
\end{lstlisting}
\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
  {\tt name} & (IN): The connector name to check for.\\
\end{tabular}
\end{mdframed}
Checks if a VOL connector is registered with the library given the connector name and returns TRUE/FALSE on success, otherwise it returns a negative value.\bigskip


\subsubsection{H5VLget\_connector\_id}
\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
hid_t H5VLget_connector_id(const char *name);
\end{lstlisting}
\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
  {\tt name} & (IN): The connector name to check for.\\
\end{tabular}
\end{mdframed}
Given a connector name that is registered with the library, this function returns an identifier for the connector. If the connector is not registered with the library, a negative value is returned. The identifier must be released with a call to {\tt H5VLclose()}.\bigskip


\subsubsection{H5VLget\_connector\_name}
\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
ssize_t H5VLget_connector_name(hid_t id, char *name/*out*/, size_t size);
\end{lstlisting}

\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
  {\tt id} & (IN): The object identifier to check.\\
  {\tt name} & (OUT): Buffer pointer to put the connector name. If NULL, the library just returns the size required to store the connector name.\\
  {\tt size} & (IN): the size of the passed in buffer.\\
\end{tabular}
\end{mdframed}
Retrieves the name of a VOL connector given an object identifier that was created/opened with it. On success, the name length is returned.\bigskip


\subsubsection{H5VLclose}
\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
herr_t H5VLclose(hid_t connector_id);
\end{lstlisting}

\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
 {\tt connector\_id} & (IN): A valid identifier of the connector to close.\\
\end{tabular}
\end{mdframed}
Shuts down access to the connector that the identifier points to and release resources associated with it.\bigskip


\subsubsection{H5VLunregister\_connector}
\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
herr_t H5VLunregister(hid_t connector_id);
\end{lstlisting}
\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
  {\tt connector\_id} & (IN): A valid identifier of the connector to unregister.\\
\end{tabular}
\end{mdframed}
Unregisters a connector from the library and return a positive value on success otherwise return a negative value. That native VOL connector cannot be unregistered (this will return a negative herr\_t value).\bigskip


\subsection{H5VLconnector.h}

\subsubsection{H5VLobject\_register}
\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
  hid_t H5VLobject_register(void *obj, H5I_type_t obj_type, hid_t connector_id);
\end{lstlisting}

\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
 {\tt obj} & (IN): pointer to the object to register.\\
 {\tt obj\_type} & (IN): The type of the object ({\tt H5I\_FILE, H5I\_DATASET, H5I\_GROUP, H5I\_ATTRIBUTE, H5I\_DATATYPE}).\\
 {\tt connector\_id} & (IN): identifier of the vol connector the object is associated with.\\
\end{tabular}
\end{mdframed}
Creates an HDF5 identifier for an object given its type and an identifier of the connector that was used in creating it. This function is typically used by external connectors wanting to wrap an {\tt hid\_t} around a connector specific object to return to a user callback for functions like {\tt H5Literate, H5Lvisit, H5Ovisit, H5Aiterate} etc... A Negative value is returned on failure.\bigskip


\subsubsection{H5VLget\_object}
\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
  herr_t H5VLget_object(hid_t obj_id, void **obj); 
\end{lstlisting}

\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
 {\tt obj\_id} & (IN): identifier of the object to dereference.\\
 {\tt obj} & (OUT): buffer to store the pointer of the VOL object associated with the object identifier.\\
\end{tabular}
\end{mdframed}
Retrieves a pointer to the VOL object from an HDF5 file or object identifier.\bigskip


%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%% End: 
