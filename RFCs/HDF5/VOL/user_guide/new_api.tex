\section{New VOL API Routines}
\label{sec:api}
New API routines have been added to the HDF5 library to manage VOL plugins. This section details each new API call and explains their intended usage.

\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
hid_t H5VLregister(const H5VL_class_t *cls);
\end{lstlisting}

\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
  {\tt cls} & (IN): A pointer to the plugin structure to register.\\
\end{tabular}
\end{mdframed}

Registers a user defined VOL plugin with the HDF5 library and returns an identifier for that plugin to be used if successful, otherwise returns a negative value. This function is used when the application has direct access to the plugin it wants to use and is able to obtain a pointer for the plugin structure to pass to the HDF5 library. The plugin must be unregistered before the application exists with {\texttt H5VLunregister()}.\bigskip


\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
hid_t H5VLregister_by_name(const char *plugin_name);
\end{lstlisting}
\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
  {\tt name} & (IN): The plugin name to search for an register.\\
\end{tabular}
\end{mdframed}
Registers a VOL plugin with the HDF5 library given the name of the plugin and returns an identifier for that plugin to be used if successful, otherwise returns a negative value. If the plugin is already registered the library will create an identifier for it and returns it to the user; otherwise the library will look for available third party plugins and dynamically load them and registers them for use, then returns an identifier for the plugin. Third party plugins must be installed on the system as a shared library or DLL. The plugin must be unregistered before the application exists with {\tt H5VLunregister()}.\bigskip

\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
herr_t H5VLunregister(hid_t plugin_id);
\end{lstlisting}
\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
  {\tt plugin\_id} & (IN): A valid identifier of the plugin to unregister.\\
\end{tabular}
\end{mdframed}
Unregisters a plugin from the library and return a positive value on success otherwise return a negative value.\bigskip


\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
htri_t H5VLis_registered(const char *name);
\end{lstlisting}
\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
  {\tt name} & (IN): The plugin name to check for.\\
\end{tabular}
\end{mdframed}
Checks if a VOL plugin is registered with the library given the plugin name and returns TRUE/FALSE on success, otherwise it returns a negative value.\bigskip


\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
ssize_t H5VLget_plugin_name(hid_t obj_id, char *name/*out*/, size_t size);
\end{lstlisting}

\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
  {\tt obj\_id} & (IN): The object identifier to check.\\
  {\tt name} & (OUT): Buffer pointer to put the plugin name. If NULL, the library just returns the size required to store the plugin name.\\
  {\tt size} & (IN): the size of the passed in buffer.\\
\end{tabular}
\end{mdframed}
Retrieves the name of a VOL plugin given and object identifier that was created/opened with it. On success, the name length is returned.\bigskip


\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
hid_t H5VLget_plugin_id(const char *name);
\end{lstlisting}
\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
  {\tt name} & (IN): The plugin name to check for.\\
\end{tabular}
\end{mdframed}
Given a plugin name that is registered with the library, this function returns an identifier for the plugin. If the plugin is not registered with the library, a negative value is returned. The identifier must be released with a call to {\tt H5VLclose()}.\bigskip


\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
herr_t H5VLclose(hid_t plugin_id);
\end{lstlisting}

\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
 {\tt plugin\_id} & (IN): A valid identifier of the plugin to close.\\
\end{tabular}
\end{mdframed}
Shuts down access to the plugin that the identifier points to and release resources associated with it.\bigskip


\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
  hid_t H5VLobject_register(void *obj, H5I_type_t obj_type, hid_t plugin_id);
\end{lstlisting}

\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
 {\tt obj} & (IN): pointer to the object to register.\\
 {\tt obj\_type} & (IN): The type of the object ({\tt H5I\_FILE, H5I\_DATASET, H5I\_GROUP, H5I\_ATTRIBUTE, H5I\_DATATYPE}).\\
 {\tt plugin\_id} & (IN): identifier of the vol plugin the object is associated with.\\
\end{tabular}
\end{mdframed}
Creates an HDF5 identifier for an object given its type and an identifier of the plugin that was used in creating it. This function is typically used by external plugins wanting to wrap an {\tt hid\_t} around a plugin specific object to return to a user callback for functions like {\tt H5Literate, H5Lvisit, H5Ovisit, H5Aiterate} etc... A Negative value is returned on failure.\bigskip

\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
  herr_t H5VLget_object(hid_t obj_id, void **obj); 
\end{lstlisting}

\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
 {\tt obj\_id} & (IN): identifier of the object to dereference.\\
 {\tt obj} & (OUT): buffer to store the pointer of the VOL object associated with the object identifier.\\
\end{tabular}
\end{mdframed}
Retrieves a pointer to the VOL object from an HDF5 file or object identifier.\bigskip

\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
herr_t H5VLinitialize(hid_t plugin_id, hid_t vipl_id);
\end{lstlisting}

\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
 {\tt plugin\_id} & (IN): identifier of VOL plugin to initialize.\\
 {\tt vipl\_id} & (IN): VOL initialize property list containing properties required for plugin initialization.\\
\end{tabular}
\end{mdframed}
Initializes access to the VOL plugin represented by {\tt plugin\_id} with initialization parameters set as properties in the the property list {\tt vipl\_id}. Some plugins may not require initialization. For more information about plugin initialization and what properties are required to be set in the property list refer to the actual plugin documentation.\bigskip

\begin{mdframed}[style=bgbox]
\textbf{Signature:}
\begin{lstlisting}
herr_t H5VLterminate(hid_t plugin_id, hid_t vtpl_id);
\end{lstlisting}


\textbf{Arguments:}\\
\begin{tabular}{l p{13.5cm}}
 {\tt plugin\_id} & (IN): identifier of VOL plugin to terminate.\\
 {\tt vtpl\_id} & (IN): VOL terminate property list containing properties required for plugin termination.\\
\end{tabular}
\end{mdframed}
Terminates access to the VOL plugin represented by {\tt plugin\_id} with termination parameters set as properties in the the property list {\tt vtpl\_id}. Some plugins may not require termination. For more information about plugin termination and what properties are required to be set in the property list refer to the actual plugin documentation.


A set of API calls that map directly to the VOL callbacks themselves have been added to aid in the development of stacked or mirrored plugins. For more information on usage refer to Section~\ref{sec:stack}. The routines are listed in Appendix~\ref{sec:B}.

%%% Local Variables: 
%%% mode: latex
%%% TeX-master: t
%%% End: 
