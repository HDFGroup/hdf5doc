<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 9">
<meta name=Originator content="Microsoft Word 9">
<link rel=File-List href="./checksum_prog_model_files/filelist.xml">
<title>Programming Model For Fletcher32 Checksum</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>slu</o:Author>
  <o:Template>Normal</o:Template>
  <o:LastAuthor>slu</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>32</o:TotalTime>
  <o:LastPrinted>2003-02-14T19:20:00Z</o:LastPrinted>
  <o:Created>2003-02-19T21:51:00Z</o:Created>
  <o:LastSaved>2003-02-19T21:51:00Z</o:LastSaved>
  <o:Pages>3</o:Pages>
  <o:Words>1110</o:Words>
  <o:Characters>6328</o:Characters>
  <o:Company>NCSA</o:Company>
  <o:Lines>52</o:Lines>
  <o:Paragraphs>12</o:Paragraphs>
  <o:CharactersWithSpaces>7771</o:CharactersWithSpaces>
  <o:Version>9.2720</o:Version>
 </o:DocumentProperties>
</xml><![endif]-->
<style>
<!--
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-style-next:Normal;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.75in;
	margin-bottom:.0001pt;
	text-indent:-.25in;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	mso-list:l10 level1 lfo1;
	tab-stops:list .75in;
	font-size:16.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-font-kerning:0pt;}
h2
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:1.05in;
	text-indent:-.3in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	mso-list:l10 level2 lfo1;
	tab-stops:list 1.05in;
	font-size:14.0pt;
	font-family:Arial;
	font-style:italic;}
h3
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:1.35in;
	text-indent:-.35in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	mso-list:l10 level3 lfo1;
	tab-stops:list 1.5in;
	font-size:13.0pt;
	font-family:Arial;}
h4
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:1.7in;
	text-indent:-.45in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:4;
	mso-list:l10 level4 lfo1;
	tab-stops:list 1.75in;
	font-size:14.0pt;
	font-family:"Times New Roman";}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{mso-style-update:auto;
	mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:center 3.0in right 6.0in;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoListBullet2, li.MsoListBullet2, div.MsoListBullet2
	{mso-style-update:auto;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	text-indent:-.25in;
	mso-pagination:widow-orphan;
	mso-list:l7 level1 lfo3;
	tab-stops:list .5in;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	text-align:center;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:16.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-font-kerning:14.0pt;
	font-weight:bold;}
p.MsoBodyTextIndent, li.MsoBodyTextIndent, div.MsoBodyTextIndent
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:45.0pt;
	margin-bottom:.0001pt;
	text-indent:-45.0pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
code
	{mso-ascii-font-family:"Courier New";
	mso-fareast-font-family:"Courier New";
	mso-hansi-font-family:"Courier New";
	mso-bidi-font-family:"Courier New";}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
@list l0
	{mso-list-id:-132;
	mso-list-type:simple;
	mso-list-template-ids:-1190124970;}
@list l0:level1
	{mso-level-tab-stop:1.25in;
	mso-level-number-position:left;
	margin-left:1.25in;
	text-indent:-.25in;}
@list l1
	{mso-list-id:-131;
	mso-list-type:simple;
	mso-list-template-ids:407289352;}
@list l1:level1
	{mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	margin-left:1.0in;
	text-indent:-.25in;}
@list l2
	{mso-list-id:-130;
	mso-list-type:simple;
	mso-list-template-ids:1861626572;}
@list l2:level1
	{mso-level-tab-stop:.75in;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;}
@list l3
	{mso-list-id:-129;
	mso-list-type:simple;
	mso-list-template-ids:-2015584712;}
@list l3:level1
	{mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l4
	{mso-list-id:-128;
	mso-list-type:simple;
	mso-list-template-ids:1795727422;}
@list l4:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:1.25in;
	mso-level-number-position:left;
	margin-left:1.25in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l5
	{mso-list-id:-127;
	mso-list-type:simple;
	mso-list-template-ids:-764139490;}
@list l5:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	margin-left:1.0in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l6
	{mso-list-id:-126;
	mso-list-type:simple;
	mso-list-template-ids:-688512966;}
@list l6:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.75in;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l7
	{mso-list-id:-125;
	mso-list-type:simple;
	mso-list-template-ids:1780536918;}
@list l7:level1
	{mso-level-number-format:bullet;
	mso-level-style-link:"List Bullet 2";
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l8
	{mso-list-id:-120;
	mso-list-type:simple;
	mso-list-template-ids:-231307954;}
@list l8:level1
	{mso-level-tab-stop:.25in;
	mso-level-number-position:left;
	margin-left:.25in;
	text-indent:-.25in;}
@list l9
	{mso-list-id:-119;
	mso-list-type:simple;
	mso-list-template-ids:73566374;}
@list l9:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.25in;
	mso-level-number-position:left;
	margin-left:.25in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l10
	{mso-list-id:655499309;
	mso-list-template-ids:-732524448;}
@list l10:level1
	{mso-level-style-link:"Heading 1";
	mso-level-tab-stop:.75in;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;}
@list l10:level2
	{mso-level-style-link:"Heading 2";
	mso-level-text:"%1\.%2\.";
	mso-level-tab-stop:1.05in;
	mso-level-number-position:left;
	margin-left:1.05in;
	text-indent:-.3in;}
@list l10:level3
	{mso-level-style-link:"Heading 3";
	mso-level-text:"%1\.%2\.%3\.";
	mso-level-tab-stop:1.5in;
	mso-level-number-position:left;
	margin-left:1.35in;
	text-indent:-.35in;}
@list l10:level4
	{mso-level-style-link:"Heading 4";
	mso-level-text:"%1\.%2\.%3\.%4\.";
	mso-level-tab-stop:1.75in;
	mso-level-number-position:left;
	margin-left:1.7in;
	text-indent:-.45in;}
@list l10:level5
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.";
	mso-level-tab-stop:2.25in;
	mso-level-number-position:left;
	margin-left:2.05in;
	text-indent:-.55in;}
@list l10:level6
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.";
	mso-level-tab-stop:2.5in;
	mso-level-number-position:left;
	margin-left:2.4in;
	text-indent:-.65in;}
@list l10:level7
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.";
	mso-level-tab-stop:3.0in;
	mso-level-number-position:left;
	margin-left:2.75in;
	text-indent:-.75in;}
@list l10:level8
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.";
	mso-level-tab-stop:3.25in;
	mso-level-number-position:left;
	margin-left:3.1in;
	text-indent:-.85in;}
@list l10:level9
	{mso-level-text:"%1\.%2\.%3\.%4\.%5\.%6\.%7\.%8\.%9\.";
	mso-level-tab-stop:3.75in;
	mso-level-number-position:left;
	margin-left:3.5in;
	text-indent:-1.0in;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="2050"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=EN-US link=blue vlink=purple style='tab-interval:.5in'>

<div class=Section1>

<p class=MsoTitle align=left style='margin-left:.5in;text-align:left;
text-indent:.5in'><a name="_Toc33242137">Programming Model For Fletcher32
Checksum</a></p>

<p class=MsoNormal><span style='mso-tab-count:5'>                                                            </span><span
style="mso-spacerun: yes">       </span>By Raymond Lu</p>

<p class=MsoNormal><span style='mso-tab-count:5'>                                                            </span><span
style="mso-spacerun: yes">         </span>Feb 14, 2003</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h1><a name="_Toc33242138"><![if !supportLists]>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span><![endif]>The Fletcher32 checksum filter</a></h1>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>The checksum filter is an HDF5 filter that computes a
Fletcher32 checksum for HDF5 datasets.<span style="mso-spacerun: yes"> 
</span>At this time, the checksum is only available for chunked datasets, and
only computes a checksum on the raw data.<span style="mso-spacerun: yes"> 
</span>No checksum is computed for non-chunked (“contiguous”) datasets, nor is
on metadata.<span style="mso-spacerun: yes">  </span>For more background on
error detecting codes in HDF5, please see the RFC documents at http://hdf.ncsa.uiuc.edu/RFC/H5checksum/.</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h1><a name="_Toc33242139"><![if !supportLists]>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span><![endif]>Invoking the checksum filter</a></h1>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>There are two ways to set up Fletcher32 checksum filter for
dataset creation property list:<span style="mso-spacerun: yes">  </span></p>

<p class=MsoListBullet2><![if !supportLists]><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>Through the general filter setting function <span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>H5Pset_filter</span></p>

<p class=MsoListBullet2><![if !supportLists]><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><![endif]>By using the function <span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'>H5Pset_fletcher32</span></p>

<p class=MsoNormal>&nbsp;&nbsp;</p>

<p class=MsoNormal><em><span style='mso-fareast-font-family:"Courier New"'>herr_t</span></em>
<code><span style='font-size:10.0pt;font-family:"Courier New"'>H5Pset_filter</span></code>(<em><span
style='mso-fareast-font-family:"Courier New"'>hid_t</span></em> <code><span
style='font-size:10.0pt;font-family:"Courier New"'>dcpl</span></code>, <em><span
style='mso-fareast-font-family:"Courier New"'>H5Z_filter_t</span></em> <code><span
style='font-size:10.0pt;font-family:"Courier New"'>filter</span></code>, <em><span
style='mso-fareast-font-family:"Courier New"'>unsigned int</span></em> <code><span
style='font-size:10.0pt;font-family:"Courier New"'>flags</span></code>, <em><span
style='mso-fareast-font-family:"Courier New"'>size_t</span></em> <code><span
style='font-size:10.0pt;font-family:"Courier New"'>cd_nelmts</span></code>, <em><span
style='mso-fareast-font-family:"Courier New"'>const unsigned int</span></em> <code><span
style='font-size:10.0pt;font-family:"Courier New"'>cd_values[]</span></code>)</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'>By passing the value <span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>H5Z_FILTER_FLETCHER32</span>
to parameter <span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>filter</span>, the Fletcher32 checksum is
enabled.<span style="mso-spacerun: yes">  </span>The <span style='font-size:
10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>dcpl</span> has to
be a dataset creation property list for chunked dataset.<span
style="mso-spacerun: yes">  </span>No additional data is needed for <span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>cd_values.<o:p></o:p></span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><em><span style='mso-fareast-font-family:"Courier New"'>herr_t</span></em>
<code><span style='font-size:10.0pt;font-family:"Courier New"'>H5Pset_fletcher32</span></code>(<em><span
style='mso-fareast-font-family:"Courier New"'>hid_t</span></em> <code><span
style='font-size:10.0pt;font-family:"Courier New"'>dcpl</span></code>)</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='mso-tab-count:1'>            </span>Again, the <span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>dcpl</span>
has to be a dataset creation property list for chunked dataset.</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h1><![if !supportLists]>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span><![endif]>&nbsp;<a name="_Toc33242140">Querying and controlling </a>the
checksum filter</h1>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>The general filter functions <span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'>H5Pget_nfilters</span> and
<span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>H5Pget_filter</span>
can be used to query whether the Fletcher32 checksum is enabled.<span
style="mso-spacerun: yes">  </span>Please refer to the HDF5 User’s Guide and
Reference Manual on how to use them.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>Sometimes, it is desirable to skip checksumming during data
reading in order to get good performance.<span style="mso-spacerun: yes"> 
</span>There is a function <span style='font-size:10.0pt;mso-bidi-font-size:
12.0pt;font-family:"Courier New"'>H5Pset_edc_check</span> to offer this option:</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><em><span style='mso-fareast-font-family:"Courier New"'>herr_t</span></em>
<code><span style='font-size:10.0pt;font-family:"Courier New"'>H5Pset_edc_check</span></code>(<em><span
style='mso-fareast-font-family:"Courier New"'>hid_t</span></em> <code><span
style='font-size:10.0pt;font-family:"Courier New"'>dxpl, </span></code><em><span
style='mso-fareast-font-family:"Courier New"'>H5P_EDC_t</span></em><code><span
style='font-size:10.0pt;font-family:"Courier New"'> check</span></code>)</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'>By passing <span style='font-size:
10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>H5P_ENABLE_EDC</span>
or <span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>H5P_DISALBE_EDC</span>
to <span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>check</span>,
this function decides whether to enable an error-detection code (EDC) for data
reading process.<span style="mso-spacerun: yes">  </span>This error-detecting
algorithm is whichever user chooses earlier (At this moment, there is only
Fletcher32 checksum available).<span style="mso-spacerun: yes">  </span>This
function cannot disable or enable error-detection for data writing
process.<span style="mso-spacerun: yes">  </span>Please note the <span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>dxpl</span>
has to be a dataset <u>transfer</u> property list.<span style="mso-spacerun:
yes">  </span>The default configuration is EDC enabled.</p>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>To check whether an EDC is enabled for dataset reading, use
the function <span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>H5Pget_edc_check</span>:</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><em><span style='mso-fareast-font-family:"Courier New"'>H5P_EDC_t</span></em>
<code><span style='font-size:10.0pt;font-family:"Courier New"'>H5Pget_edc_check</span></code>(<em><span
style='mso-fareast-font-family:"Courier New"'>hid_t</span></em> <code><span
style='font-size:10.0pt;font-family:"Courier New"'>dxpl</span></code>)</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal style='margin-left:.5in'>The return value can be <span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>H5P_ENABLE_EDC</span>
or <span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>H5P_DISABLE_EDC</span>
which indicate whether EDC enabled or disabled for dataset reading.<span
style="mso-spacerun: yes">  </span>The <span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'>dxpl</span> has to be a
dataset <u>transfer</u> property list.</p>

<p class=MsoNormal style='margin-left:.5in'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h1><![if !supportLists]>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span><![endif]>&nbsp;Handling Checksum Failure</h1>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>When Fletcher32 checksum is enabled and there is error
detected by this checksum during data reading, the default behavior of the
library is returning an error message through the error stack.<span
style="mso-spacerun: yes">  </span>A general filter function, <span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>H5Pset_filter_callback</span>,
can give application program options to control checksum failure:</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><em><span style='mso-fareast-font-family:"Courier New"'>herr_t</span></em>
<code><span style='font-size:10.0pt;font-family:"Courier New"'>H5Pset_filter_callback</span></code>(<em><span
style='mso-fareast-font-family:"Courier New"'>hid_t</span></em> <code><span
style='font-size:10.0pt;font-family:"Courier New"'>dxpl, <i>H5Z_filter_func_t</i>
func, <o:p></o:p></span></code></p>

<p class=MsoNormal style='text-indent:.5in'><code><span style='font-size:10.0pt;
font-family:"Courier New"'>void* op_data</span></code>)<span
style="mso-spacerun: yes">     </span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='mso-tab-count:1'>            </span>During data
reading, if there is checksum failure, the user’s callback function</p>

<p class=MsoNormal><span style='mso-tab-count:1'>            </span><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>func</span>
is called and user’s <span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>op_data</span> is passed back into this callback
function.<span style="mso-spacerun: yes">  </span></p>

<p class=MsoNormal style='text-indent:.5in'>The <span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'>dxpl</span> has to be a
dataset <u>transfer</u> property list.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>This callback function is defined as</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>typedef H5Z_cb_return_t
(H5Z_filter_func_t)(H5Z_filter_t filter, <o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'>void* buf, size_t
buf_size, void* op_data) <o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'>Receiving the type of filter
through <span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
"Courier New"'>filter</span>, data through <span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'>buf</span>, data size
through <span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
"Courier New"'>buf_size</span>, and user’s operation data back through <span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>op_data</span>,
user can decide what to do when there is a filter failure.<span
style="mso-spacerun: yes">  </span>The return value of this function, <span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>H5Z_CB_FAIL</span>
and <span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>H5Z_CB_CONT,</span>
tell the library whether to fail the process or continue reading ignoring the
failure.</p>

<p class=MsoNormal style='margin-left:.5in'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal style='margin-left:.5in'><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<h1><![if !supportLists]>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span><![endif]>&nbsp;Sample programs</h1>

<p class=MsoNormal><![if !supportEmptyParas]>&nbsp;<![endif]><o:p></o:p></p>

<p class=MsoNormal>Below is a programming example of how to enable Fletcher32
checksum for dataset creation and how to disable an EDC for dataset reading:</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>/* Enable
Fletcher32 checksum for dataset creation property list */<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp; if((dcpl =
H5Pcreate(H5P_DATASET_CREATE))&lt;0) goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp; if (H5Pset_chunk (dc, 2,
chunk_size)&lt;0) goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp; if (H5Pset_filter
(dc,H5Z_FILTER_FLETCHER32,0,0,NULL)&lt;0) <o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'><span style="mso-spacerun:
yes">  </span>goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp; /* Create the dataset */<o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style="mso-spacerun: yes">    </span>if
((dataset = H5Dcreate(file_id, name, H5T_NATIVE_INT, space_id, dcpl))&lt;0)
goto error;</p>

<p class=MsoNormal style='text-indent:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>/* Write
the data */<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:45.0pt;text-indent:-45.0pt'><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">    </span>if (H5Dwrite(dataset, H5T_NATIVE_INT,
H5S_ALL, H5S_ALL, H5P_DEFAULT, points)&lt;0) goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>/*
Disable Fletcher32 checksum to speed up reading */<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>if((dxpl
= H5Pcreate(H5P_DATASET_XFER))&lt;0) goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">   
</span>if(H5Pset_edc_check(dxpl, H5Z_DISABLE_EDC)&lt;0) goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>/* Read
data without Fletcher32 checksum */<o:p></o:p></span></p>

<p class=MsoNormal>&nbsp;&nbsp;&nbsp;<span style="mso-spacerun: yes">    
</span><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:
"Courier New"'>if (H5Dread (dataset, H5T_NATIVE_INT, H5S_ALL, H5S_ALL, dxpl,
check)&lt;0) goto error;<o:p></o:p></span></p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>The following program example demonstrates how to set up and
use the callback function.<span style="mso-spacerun: yes">  </span>In the
callback function, it chooses to continue to read data even if the checksum
fails.<span style="mso-spacerun: yes">  </span>The H5Dread will fail and return
error stack if there is other failure.<span style="mso-spacerun: yes">   
</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">  
</span>H5Z_cb_return_t filter_cb_cont(H5Z_filter_t filter, void* UNUSED<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>buf,
size_t UNUSED buf_size, void* UNUSED op_data)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">   </span>{<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:1'>      </span>/* If
failure is from checksum, do something and continue<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:1'>      </span><span
style="mso-spacerun: yes"> </span>* the reading; otherwise, let the program
fail. */<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp; <span style='mso-tab-count:1'>  </span>if(H5Z_FILTER_FLETCHER32==filter)
{<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:3'>                  </span>:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:3'>                  </span>:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span
style='mso-tab-count:1'>     </span>return H5Z_CB_CONT; <o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:1'>      </span>} else<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:2'>            </span>return
H5Z_CB_FAIL;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">   </span>}<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">   </span>herr_t
test_fletcher(hid_t file)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">   </span>{<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:2'>            </span>:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:2'>            </span>:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>/* Enable
Fletcher32 checksum for dataset creation property list */<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp; if((dcpl =
H5Pcreate(H5P_DATASET_CREATE))&lt;0) goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp; if (H5Pset_chunk (dc, 2,
chunk_size)&lt;0) goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp; if (H5Pset_fletcher32 (dc)&lt;0)
goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp; /* Create the dataset */<o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style="mso-spacerun: yes">    </span>if
((dataset = H5Dcreate(file_id, name, H5T_NATIVE_INT, space_id, dcpl))&lt;0)
goto error;</p>

<p class=MsoNormal style='text-indent:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>/* Write
the data */<o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style="mso-spacerun: yes">    </span>if
(H5Dwrite(dataset, H5T_NATIVE_INT, H5S_ALL, H5S_ALL, H5P_DEFAULT, points)&lt;0)
goto error;</p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>/* Set
callback function,let read continue even if checksum fails*/<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>if((dxpl
= H5Pcreate(H5P_DATASET_XFER))&lt;0) goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;if(H5Pset_filter_callback(dxpl,
filter_cb_cont, NULL)&lt;0) <o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'><span style="mso-spacerun:
yes"> </span>goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>/* Read
data */<o:p></o:p></span></p>

<p class=MsoBodyTextIndent>&nbsp;&nbsp;&nbsp; if (H5Dread (dataset,
H5T_NATIVE_INT, H5S_ALL, H5S_ALL, dxpl, check)&lt;0) goto error;</p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:2'>            </span>:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:2'>            </span>:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">   </span>}<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal>In the program below, a flag variable is passed into the
filter callback function.<span style="mso-spacerun: yes">  </span>There, it is
set and returned back to the program.<span style="mso-spacerun: yes"> 
</span>The program then decides whatever it wants to do when this happens.</p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">  
</span>H5Z_cb_return_t filter_cb_cont(H5Z_filter_t filter, void* UNUSED<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.75in;text-indent:-.25in'><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'>buf,
size_t UNUSED buf_size, void* op_data)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">   </span>{<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:1'>      </span>/* If
failure is from checksum, continue the reading and set<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'><span style="mso-spacerun:
yes"> </span>* flag to indicate failure; otherwise, let the program fail. */<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp; <span style='mso-tab-count:1'>  </span>if(H5Z_FILTER_FLETCHER32==filter)
{<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:2'>            </span>*(int*)op_data
= FAIL;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span
style='mso-tab-count:1'>     </span>return H5Z_CB_CONT; <o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:1'>      </span>} else<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:2'>            </span>return
H5Z_CB_FAIL;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">   </span>}<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">   </span>herr_t
test_fletcher(hid_t file)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">   </span>{<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>herr_t
flag = SUCCEED;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:2'>            </span>:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:2'>            </span>:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>/* Enable
Fletcher32 checksum for dataset creation property list */<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp; if((dcpl =
H5Pcreate(H5P_DATASET_CREATE))&lt;0) goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp; if (H5Pset_chunk (dc, 2,
chunk_size)&lt;0) goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp; if (H5Pset_fletcher32 (dc)&lt;0)
goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp; /* Create the dataset */<o:p></o:p></span></p>

<p class=MsoBodyTextIndent><span style="mso-spacerun: yes">    </span>if
((dataset = H5Dcreate(file_id, name, H5T_NATIVE_INT, space_id, dcpl))&lt;0)
goto error;</p>

<p class=MsoNormal style='text-indent:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>/* Write
the data */<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:45.0pt;text-indent:-45.0pt'><span
style='font-size:10.0pt;mso-bidi-font-size:12.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">  </span><span style="mso-spacerun: yes">  </span>if
(H5Dwrite(dataset, H5T_NATIVE_INT, H5S_ALL, H5S_ALL, H5P_DEFAULT, points)&lt;0)
goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>/* Set
callback function,let read continue even if checksum fails*/<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>if((dxpl
= H5Pcreate(H5P_DATASET_XFER))&lt;0) goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;&nbsp;&nbsp;&nbsp;if(H5Pset_filter_callback(dxpl,
filter_cb_cont, &amp;flag)&lt;0) <o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'><span style="mso-spacerun:
yes"> </span>goto error;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">    </span>/* Read
data */<o:p></o:p></span></p>

<p class=MsoBodyTextIndent>&nbsp;&nbsp;&nbsp; if (H5Dread (dataset,
H5T_NATIVE_INT, H5S_ALL, H5S_ALL, dxpl, check)&lt;0) goto error;</p>

<p class=MsoBodyTextIndent>&nbsp;</p>

<p class=MsoBodyTextIndent><span style="mso-spacerun: yes">    </span>/* Decide
what to do if checksum fails */</p>

<p class=MsoBodyTextIndent><span style="mso-spacerun: yes">    </span>if(flag
== FAIL)</p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:2'>            </span>:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style='mso-tab-count:2'>            </span>:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'><span style="mso-spacerun: yes">   </span>}<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt;
font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'>&nbsp;<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:.5in'><span style='font-size:10.0pt;
mso-bidi-font-size:12.0pt;font-family:"Courier New"'><span style="mso-spacerun:
yes"> </span><o:p></o:p></span></p>

</div>

</body>

</html>
