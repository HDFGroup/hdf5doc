<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 10">
<meta name=Originator content="Microsoft Word 10">
<link rel=File-List href="checksumRFC3_files/filelist.xml">
<title>Quincey notes on checksumming January 2002</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Mike Folk</o:Author>
  <o:LastAuthor>Mike Folk</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>8</o:TotalTime>
  <o:LastPrinted>2002-10-26T22:20:00Z</o:LastPrinted>
  <o:Created>2002-10-26T22:22:00Z</o:Created>
  <o:LastSaved>2002-10-26T22:22:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>1372</o:Words>
  <o:Characters>7823</o:Characters>
  <o:Company>NCSA</o:Company>
  <o:Lines>65</o:Lines>
  <o:Paragraphs>18</o:Paragraphs>
  <o:CharactersWithSpaces>9177</o:CharactersWithSpaces>
  <o:Version>10.3501</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:SpellingState>Clean</w:SpellingState>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;
	mso-font-charset:2;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:0 268435456 0 0 -2147483648 0;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;
	mso-font-charset:0;
	mso-generic-font-family:swiss;
	mso-font-pitch:variable;
	mso-font-signature:553679495 -2147483648 8 0 66047 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-style-name:"Heading 1\,h1";
	mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:16.0pt;
	font-family:Arial;
	mso-font-kerning:16.0pt;}
h2
	{mso-style-name:"Heading 2\,h2";
	mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:14.0pt;
	font-family:Arial;
	font-style:italic;}
h3
	{mso-style-name:"Heading 3\,h3";
	mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:13.0pt;
	font-family:Arial;}
h4
	{mso-style-name:"Heading 4\,h4";
	mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:4;
	font-size:14.0pt;
	font-family:"Times New Roman";}
p.MsoFootnoteText, li.MsoFootnoteText, div.MsoFootnoteText
	{mso-style-noshow:yes;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{mso-style-noshow:yes;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	tab-stops:center 3.0in right 6.0in;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	tab-stops:center 3.0in right 6.0in;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
span.MsoFootnoteReference
	{mso-style-noshow:yes;
	vertical-align:super;}
span.MsoCommentReference
	{mso-style-noshow:yes;
	mso-ansi-font-size:8.0pt;
	mso-bidi-font-size:8.0pt;}
p.MsoListNumber, li.MsoListNumber, div.MsoListNumber
	{mso-style-name:"List Number\,ln";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.25in;
	text-indent:-.25in;
	mso-pagination:widow-orphan;
	mso-list:l8 level1 lfo6;
	tab-stops:list .25in;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoListBullet2, li.MsoListBullet2, div.MsoListBullet2
	{mso-style-name:"List Bullet 2\,lb2";
	mso-style-update:auto;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:.5in;
	text-indent:-.25in;
	mso-pagination:widow-orphan;
	mso-list:l7 level1 lfo14;
	tab-stops:list .5in;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoListBullet3, li.MsoListBullet3, div.MsoListBullet3
	{mso-style-name:"List Bullet 3\,lb3";
	mso-style-update:auto;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.75in;
	text-indent:-.25in;
	mso-pagination:widow-orphan;
	mso-list:l6 level1 lfo4;
	tab-stops:list .75in;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoListBullet4, li.MsoListBullet4, div.MsoListBullet4
	{mso-style-name:"List Bullet 4\,lb4";
	mso-style-update:auto;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:1.0in;
	text-indent:-.25in;
	mso-pagination:widow-orphan;
	mso-list:l5 level1 lfo8;
	tab-stops:list 1.0in;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoListNumber2, li.MsoListNumber2, div.MsoListNumber2
	{mso-style-name:"List Number 2\,ln2";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.5in;
	text-indent:-.25in;
	mso-pagination:widow-orphan;
	tab-stops:list .5in;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoListNumber3, li.MsoListNumber3, div.MsoListNumber3
	{mso-style-name:"List Number 3\,ln3";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:.75in;
	text-indent:-.25in;
	mso-pagination:widow-orphan;
	mso-list:l2 level1 lfo11;
	tab-stops:list .75in;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoListNumber4, li.MsoListNumber4, div.MsoListNumber4
	{mso-style-name:"List Number 4\,ln4";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:1.0in;
	text-indent:-.25in;
	mso-pagination:widow-orphan;
	mso-list:l1 level1 lfo13;
	tab-stops:list 1.0in;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	text-align:center;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:16.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-font-kerning:14.0pt;
	font-weight:bold;}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:14.0pt;
	mso-bidi-font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
p.MsoSubtitle, li.MsoSubtitle, div.MsoSubtitle
	{mso-style-name:"Subtitle\,sub";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	text-align:center;
	mso-pagination:widow-orphan;
	mso-outline-level:2;
	font-size:12.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:#000033;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{mso-style-noshow:yes;
	mso-style-parent:"Comment Text";
	mso-style-next:"Comment Text";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	font-weight:bold;}
span.eudoraheader
	{mso-style-name:eudoraheader;}
ins
	{mso-style-type:export-only;
	text-decoration:none;}
span.msoIns
	{mso-style-type:export-only;
	mso-style-name:"";
	text-decoration:underline;
	text-underline:single;}
span.msoDel
	{mso-style-type:export-only;
	mso-style-name:"";
	text-decoration:line-through;
	color:blue;}
 /* Page Definitions */
 @page
	{mso-footnote-numbering-style:chicago;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-footer:url("checksumRFC3_files/header.htm") f1;
	mso-paper-source:0;}
div.Section1
	{page:Section1;
	mso-footnote-numbering-style:chicago;}
 /* List Definitions */
 @list l0
	{mso-list-id:-132;
	mso-list-type:simple;
	mso-list-template-ids:450373202;}
@list l0:level1
	{mso-level-tab-stop:1.25in;
	mso-level-number-position:left;
	margin-left:1.25in;
	text-indent:-.25in;}
@list l1
	{mso-list-id:-131;
	mso-list-type:simple;
	mso-list-template-ids:1907028230;}
@list l1:level1
	{mso-level-style-link:"List Number 4";
	mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	margin-left:1.0in;
	text-indent:-.25in;}
@list l2
	{mso-list-id:-130;
	mso-list-type:simple;
	mso-list-template-ids:-1943211502;}
@list l2:level1
	{mso-level-style-link:"List Number 3";
	mso-level-tab-stop:.75in;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;}
@list l3
	{mso-list-id:-129;
	mso-list-type:simple;
	mso-list-template-ids:2009499596;}
@list l3:level1
	{mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l4
	{mso-list-id:-128;
	mso-list-type:simple;
	mso-list-template-ids:-134550450;}
@list l4:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:1.25in;
	mso-level-number-position:left;
	margin-left:1.25in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l5
	{mso-list-id:-127;
	mso-list-type:simple;
	mso-list-template-ids:-385466982;}
@list l5:level1
	{mso-level-number-format:bullet;
	mso-level-style-link:"List Bullet 4";
	mso-level-text:\F0B7;
	mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	margin-left:1.0in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l6
	{mso-list-id:-126;
	mso-list-type:simple;
	mso-list-template-ids:-1933019604;}
@list l6:level1
	{mso-level-number-format:bullet;
	mso-level-style-link:"List Bullet 3";
	mso-level-text:\F0B7;
	mso-level-tab-stop:.75in;
	mso-level-number-position:left;
	margin-left:.75in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l7
	{mso-list-id:-125;
	mso-list-type:simple;
	mso-list-template-ids:1635295066;}
@list l7:level1
	{mso-level-number-format:bullet;
	mso-level-style-link:"List Bullet 2";
	mso-level-text:\F0B7;
	mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;
	font-family:Symbol;}
@list l8
	{mso-list-id:-120;
	mso-list-type:simple;
	mso-list-template-ids:-2094378704;}
@list l8:level1
	{mso-level-style-link:"List Number";
	mso-level-tab-stop:.25in;
	mso-level-number-position:left;
	margin-left:.25in;
	text-indent:-.25in;}
@list l9
	{mso-list-id:-119;
	mso-list-type:simple;
	mso-list-template-ids:-958087538;}
@list l9:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:.25in;
	mso-level-number-position:left;
	margin-left:.25in;
	text-indent:-.25in;
	font-family:Symbol;}
@list l10
	{mso-list-id:599070082;
	mso-list-type:hybrid;
	mso-list-template-ids:1557674936 -993866926 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l10:level1
	{mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l11
	{mso-list-id:1052264758;
	mso-list-type:hybrid;
	mso-list-template-ids:267817074 -993866926 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l11:level1
	{mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l12
	{mso-list-id:1078675128;
	mso-list-type:hybrid;
	mso-list-template-ids:-1214875368 1498550448 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l12:level1
	{mso-level-start-at:3;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:42.0pt;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-.25in;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
@list l13
	{mso-list-id:1117021475;
	mso-list-type:hybrid;
	mso-list-template-ids:318643538 -993866926 67698713 67698715 67698703 67698713 67698715 67698703 67698713 67698715;}
@list l13:level1
	{mso-level-tab-stop:.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l14
	{mso-list-id:1999962633;
	mso-list-type:hybrid;
	mso-list-template-ids:-1715331850 2399402 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l14:level1
	{mso-level-start-at:3;
	mso-level-number-format:bullet;
	mso-level-text:-;
	mso-level-tab-stop:42.0pt;
	mso-level-number-position:left;
	margin-left:42.0pt;
	text-indent:-.25in;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";}
</style>
<![endif]-->
</head>

<body lang=EN-US link="#000033" vlink=purple style='tab-interval:.5in'>

<div class=Section1>

<p class=MsoTitle><i style='mso-bidi-font-style:normal'>Request for Comment</i>
<br>
Checksum for HDF5</p>

<p class=MsoSubtitle>Quincey Koziol &amp; Mike Folk</p>

<p class=MsoSubtitle>October 26, 2002</p>

<h1>Background<o:p></o:p></h1>

<p class=MsoNormal>A <i style='mso-bidi-font-style:normal'>checksum</i> is a
computed value that depends on the contents of a block of data and that is
transmitted or stored along with the data in order to detect corruption of the
data.<span style='mso-spacerun:yes'>  </span>The receiving system re-computes
the checksum based upon the received data and compares this value with the one
sent with the data. If the two values are the same, the receiver has some
confidence that the data was received correctly or was not corrupted during
storage. </p>

<p class=MsoNormal style='text-indent:0in;mso-text-indent-alt:0in;mso-list:
none;mso-list-ins:"Mike Folk" 20021009T1423'>HDF5 users have expressed a desire
for some method to verify when metadata and/or raw data stored in the file is
corrupted.&nbsp; Using a checksum would allow these information corruption
problems to be detected, but not necessarily corrected. </p>

<p class=MsoNormal>Corruption can occur in either the raw data or metadata components
of and HDF5 file.<span style='mso-spacerun:yes'>  </span>The term “raw data”
here refers to the stored elements in the array associated with a dataset.<span
style='mso-spacerun:yes'>  </span>Metadata occurs in dataset headers, in the
data structures used to store<span style='mso-spacerun:yes'>  </span>groups, in
file headers, and in a user block.<span style='mso-spacerun:yes'>  </span></p>

<p class=MsoNormal>Since raw data and metadata are organized and treated differently
by the library, their checksums will also need to be treated differently.<span
style='mso-spacerun:yes'>  </span>Also, since raw data typically constitutes
many more bytes than metadata, different algorithms may be advisable for each.</p>

<p class=MsoNormal>Checksums in HDF5 will also be handled differently for chunked
datasets vs. contiguous datasets.<span style='mso-spacerun:yes'>  </span>It is
relatively easy to apply checksums to individual chunks, which means that
partial reads and writes can be handled efficiently – only the chunks involved
in a read or write need invoke any checksum calculations.<span
style='mso-spacerun:yes'>   </span></p>

<p class=MsoNormal>In contrast, when a part of a contiguous (i.e. non-chunked)
dataset is read, its checksum can only be checked by reading the entire
dataset.<span style='mso-spacerun:yes'>  </span>Likewise, when rewriting a part
of a contiguous dataset, the use of checksums requires at a minimum that the
data to be replaced must be read in order to re-compute a checksum.<span
style='mso-spacerun:yes'>  </span></p>

<h1>Usage examples</h1>

<p class=MsoNormal>Our goal with this implementation is just to provide a
simple, raw capability designed to support large, one-time writes of data.<span
style='mso-spacerun:yes'>  </span>It must work in parallel, but can require the
use of chunking.<span style='mso-spacerun:yes'>  </span>It does not have to
work efficiently for applications that make partial changes to problem-sized
data.<span style='mso-spacerun:yes'>  </span>The following usage examples cover
the cases that we anticipate having to cover.</p>

<p class=MsoNormal>Here are some usage examples that we propose to support in
version 1:</p>

<ol style='margin-top:0in' start=1 type=1>
 <li class=MsoNormal style='mso-list:l13 level1 lfo20;tab-stops:list .5in'>An
     application writes HDF5 datasets to a file, and this applications or a
     later application must determine if corruption occurred when writing.<span
     style='mso-spacerun:yes'>  </span>Corruption could occur either in the raw
     data or metadata object.<span style='mso-spacerun:yes'>  </span>A checksum
     is computed on each object before it is written to the HDF5 file.<span
     style='mso-spacerun:yes'>  </span>When any object is read later, the
     checksum is used to determine the validity of the data.</li>
 <li class=MsoNormal style='mso-list:l13 level1 lfo20;tab-stops:list .5in'>A
     parallel application using MPI-IO creates a file with a dataset.<span
     style='mso-spacerun:yes'>  </span>Checksums are created for all data and
     metadata.<span style='mso-spacerun:yes'>  </span>(This is the same as use
     case #1, but in parallel.)</li>
 <li class=MsoNormal style='mso-list:l13 level1 lfo20;tab-stops:list .5in'>An
     application writes a dataset that is stored in chunks, and writes a chunk
     at a time.<span style='mso-spacerun:yes'>  </span>In this case, each chunk
     has it’s own checksum, so that it’s validity can be checked whenever the
     chunk is read back in.</li>
 <li class=MsoNormal style='mso-list:l13 level1 lfo20;tab-stops:list .5in'>An
     application does a partial write to a dataset that is chunked, and the
     partial write changes the data in several chunks.<span
     style='mso-spacerun:yes'>  </span>In this case, a new checksum is computed
     for every chunk that is altered during the partial write.</li>
 <li class=MsoNormal style='mso-list:l13 level1 lfo20;tab-stops:list .5in'>A parallel
     application writes to a dataset that is stored in chunks, with each chunk
     being written by a single processor.<span style='mso-spacerun:yes'> 
     </span>No two processors write to the same chunk.<span
     style='mso-spacerun:yes'>  </span>In this case a checksum is computed for
     each chunk that is accessed, similar to cases 2 &amp; 3.</li>
 <li class=MsoNormal style='mso-list:l13 level1 lfo20;tab-stops:list .5in'>An
     application writes to part of a dataset that is stored contiguously.<span
     style='mso-spacerun:yes'>  </span>Since checksums are not computed for
     subsets of non-chunked arrays, a new checksum is computed by reading back
     the entire dataset, re-computing the checksum, then re-writing the dataset.<span
     style='mso-spacerun:yes'>  </span></li>
 <li class=MsoNormal style='mso-list:l13 level1 lfo20;tab-stops:list .5in'>An
     application writes a compressed dataset.<span style='mso-spacerun:yes'> 
     </span>A checksum is computed on the uncompressed data, before compression
     occurs.<span style='mso-spacerun:yes'>  </span>The data must be
     uncompressed before it can be validated using the checksum. </li>
 <li class=MsoNormal style='mso-list:l13 level1 lfo20;tab-stops:list .5in'>Compute,
     or re-compute the checksum of an existing dataset.<span
     style='mso-spacerun:yes'>  </span>The entire dataset may have to be read
     into memory in order to do this.<span style='mso-spacerun:yes'>  </span>An
     HDF5 library routine is available to do this.</li>
 <li class=MsoNormal style='mso-list:l13 level1 lfo20;tab-stops:list .5in'>An
     application writes data, but does not want to have a checksum
     computed.<span style='mso-spacerun:yes'>  </span>An HDF5 library routine
     is available to turn off the checksum computation for a dataset.<span
     style='mso-spacerun:yes'>  </span>If it is invoked, the dataset (or chunk)
     has no checksum.<span style='mso-spacerun:yes'>  </span>(Should this also
     be extended to other containers, such as a group or a file?)</li>
 <li class=MsoNormal style='mso-list:l13 level1 lfo20;tab-stops:list .5in'>An
     application queries about whether a checksum exists, and if it does, the
     application queries about the value of a checksum.<span
     style='mso-spacerun:yes'>  </span>A routine is available to ascertain
     whether or not a checksum exists. Another HDF5 library routine is
     available to query the value of a checksum.</li>
</ol>

<p class=MsoNormal>Uses that we do not plan to support in version 1:</p>

<ol style='margin-top:0in' start=1 type=1>
 <li class=MsoNormal style='mso-list:l10 level1 lfo22;tab-stops:list .5in'>A
     part of a contiguously stored array is read.<span
     style='mso-spacerun:yes'>  </span>Provide a checksum to tell whether the
     data is valid.<span style='mso-spacerun:yes'>  </span>(We do not propose
     to support the use of checksum when reading only part of a contiguously
     stored dataset, since this would complicate the algorithm, and it does not
     seem to be sufficiently important to our users.)</li>
 <li class=MsoNormal style='mso-list:l10 level1 lfo22;tab-stops:list .5in'>A
     part of a contiguously stored array is changed.<span
     style='mso-spacerun:yes'>  </span>Re-compute the checksum without reading
     in the entire array. (We do not propose to support this operation, since
     this would complicate the algorithm, and it does not seem to be sufficiently
     important to our users.)</li>
 <li class=MsoNormal style='mso-list:l10 level1 lfo22;tab-stops:list .5in'>Make
     it possible to use different checksum algorithms, including algorithms supplied
     by applications.<span style='mso-spacerun:yes'>  </span>One good reason to
     support this would be to evolve to newer, better checksum algorithms that
     might occur in the future.<span style='mso-spacerun:yes'>  </span>(We
     propose not so support this operation because it complicates the
     implementation and does not seem sufficiently important to users at this
     time.<span style='mso-spacerun:yes'>  </span>However, we should strive to
     make it possible to add this feature in the future.)</li>
 <li class=MsoNormal style='mso-list:l10 level1 lfo22;tab-stops:list .5in'>Support
     the use of checksum for all VFL drivers.</li>
</ol>

<h1>When should checksums be required?</h1>

<p class=MsoNormal>We propose that checksums be used always for metadata, but
be optional for data.<span style='mso-spacerun:yes'>  </span>We recommend
checksums for all metadata because it would make the coding (and code
maintenance) simpler, and because metadata objects are small enough that the
extra CPU cost is quite small compared to the actual I/O operations that are
performed.<span style='mso-spacerun:yes'>  </span>(This assertion needs to be
verified.)</p>

<p class=MsoNormal>Raw data, in contrast, can be very large, and it seems
likely that checksum calculations could appreciably increase the cost of I/O
operations, particularly partial<span style='mso-spacerun:yes'>  </span>I/O
operations on contiguous datasets.<span style='mso-spacerun:yes'>  </span>As in
the metadata situation, some performance testing would need to be done before
we can be sure of when the cost of checksum use is significant.</p>

<h1>Choosing checksum algorithms</h1>

<p class=MsoNormal>Because of the different nature of metadata vs. dataset
array data structures, is seems advisable to consider two checksum algorithms,
one for each.<span style='mso-spacerun:yes'>   </span>For the sake of
simplicity, it would be best to chose only one algorithm for metadata and one
for array data<span style='mso-spacerun:yes'>  </span>We currently have no
particular checksum algorithm in mind, and welcome suggestions.</p>

<h1>Proposed plan of action</h1>

<p class=MsoNormal>Characteristics of the HDF5 library and format make it more
difficult to support checksumming for metadata than for raw data.<span
style='mso-spacerun:yes'>  </span>Raw data checksumming involves less
substantial changes to the file format, and could probably be implemented more
quickly.<span style='mso-spacerun:yes'>  </span>Therefore, we propose a
two-phase process.<span style='mso-spacerun:yes'>  </span>In Phase 1, we
implement checksumming for dataset arrays, and phase 2 we implement
checksumming for HDF5 metadata.<o:p></o:p></p>

<h2>Implementing checksum for raw data</h2>

<p class=MsoNormal>Here is a tentative plan of action to checksum raw data.</p>

<p class=MsoListBullet2><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Research appropriate algorithm(s) for checksumming
large amounts of information.&nbsp; Choice of an algorithm should be made based
on speed of checksum algorithm and ability to handle very large data
arrays.<span style='mso-spacerun:yes'>  </span></p>

<p class=MsoListBullet2><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Propose format of new &quot;Checksum&quot;
object header message for storing in HDF5 object headers of datasets whose raw
data is to be checksummed.</p>

<p class=MsoListBullet2><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Propose and agree on API extensions for enabling
checksumming on a per-object basis in the file.&nbsp; This will most likely be
done with a new dataset creation property.</p>

<p class=MsoListBullet2><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Enhance internal library functions to
create/update checksum when raw data is written to an object.</p>

<p class=MsoListBullet2><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Propose and agree on additional API functions
for verifying a checksum on the raw data for an object, etc.</p>

<p class=MsoListBullet2><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Implement new API functions.</p>

<p class=MsoListBullet2><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Write regression tests for new features</p>

<p class=MsoListBullet2><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Write documentation, tutorial material, etc.</p>

<h2>Implementing checksum for metadata </h2>

<p class=MsoNormal>Here is a tentative plan of action to checksum metadata. </p>

<p class=MsoListBullet2><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Research appropriate algorithm(s) for
checksumming small, objects. Choice of an algorithm will be influenced by the
algorithm chosen for raw data checksumming, but that algorithm may not be
appropriate for the smaller amounts of information contained in the file's
metadata.</p>

<p class=MsoListBullet2><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Propose format change to incorporate a checksum
field into the different types of metadata stored in a file.</p>

<p class=MsoListBullet2><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Enhance internal library functions to
create/update checksum when metadata is written to a file.</p>

<p class=MsoListBullet2><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Write regression tests for new features</p>

<p class=MsoListBullet2><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>Write documentation, etc.</p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;mso-bidi-font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

</div>

</body>

</html>
