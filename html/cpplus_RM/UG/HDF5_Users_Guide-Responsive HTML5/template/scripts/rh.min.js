/*
  Copyright Â© 2014 Adobe Systems Incorporated.  All rights reserved.
  Generated by Adobe RoboHelp 11
*/

(function(){var t,e,n,r,i,o=[].slice;null==window.rh&&(window.rh={}),r=window.rh,null==r._&&(r._={}),r.util=r._,i=r._,e=Array.prototype.forEach,i.time=function(){return(new Date).getTime()},i.delay=function(t,e){var n;return n=Array.prototype.slice.call(arguments,2),r._debug&&n.push(i.stackTrace()),setTimeout(function(){return t.apply(null,n)},e)},i.defer=function(t){var e;return e=Array.prototype.slice.call(arguments,1),this.delay.apply(this,[t,1].concat(e))},i.debounce=function(t,e,n){var s;return s=null,function(){var u,l,a;return u=1<=arguments.length?o.call(arguments,0):[],a=this,l=function(){return n||t.apply(a,u),s=null},s?clearTimeout(s):n&&t.apply(a,u),r._debug&&u.push(i.stackTrace()),s=setTimeout(l,e||100)}},i.timeout=function(t,e){return function(){var n,s,u;return n=1<=arguments.length?o.call(arguments,0):[],u=this,s=function(){return t.apply(u,n)},r._debug&&n.push(i.stackTrace()),setTimeout(s,e)}},i.toggleTimeout=function(t,e,n){return function(){var s,u,l;return s=1<=arguments.length?o.call(arguments,0):[],l=this,u=function(){return t.apply(l,s)},n?(r._debug&&s.push(i.stackTrace()),setTimeout(u,e)):u(),n=!n}},i.each=function(t,n,r){var i,o,s,u,l;if(null==r&&(r=this),e===t.forEach)t.forEach(n,r);else if(t.length===+t.length)for(i=u=0,l=t.length;l>u;i=++u)s=t[i],n.call(r,s,i,t);else for(o in t)s=t[o],n.call(r,s,o,t);return t},i.map=function(t,e,n){var r;return null==n&&(n=this),r=[],i.each(t,function(t,i,o){return r.push(e.call(n,t,i,o))}),r},i.reduce=function(t,e,n,r){return null==r&&(r=this),i.each(t,function(t,i){return n=e.call(r,t,i,n)}),n},i.filter=function(t,e,n){var r;return null==n&&(n=this),r=[],i.each(t,function(t,i,o){return e.call(n,t,i,o)?r.push(t):void 0}),r},i.count=function(t,e,n){var r;return null==n&&(n=this),r=0,i.each(t,function(t,i,o){return e.call(n,t,i,o)?r++:void 0}),r},i.extend=function(t,e,n){return i.each(e,function(e,n){return t[n]=e}),n&&i.each(n,function(e,n){return t[n]=e}),t},i.isString=function(t){return"string"==typeof t},i.isFunction=function(t){return"function"==typeof t},i.isObject=function(t){return"object"==typeof t},i.isDefined=function(t){return null!==t&&void 0!==t},i.isEmptyString=function(t){return 0===t.length},i.isUsefulString=function(t){return i.isDefined(t)&&!i.isEmptyString(t)},i.isEmptyObject=function(t){return 0===Object.keys(t).length},t=null,i.canUseLocalDB=function(){if(null==t)try{localStorage.setItem("testLocalDB",!0),t=null!=localStorage.getItem("testLocalDB"),localStorage.removeItem("testLocalDB")}catch(e){t=!1}return t},i.isIframe=function(){return parent!==window},i.loadScript=function(t,e){var n;return null==e&&(e=!0),n=document.createElement("script"),n.type="text/javascript",n.async=e===!0,n.src=t,document.body.appendChild(n)},n=function(){return Math.floor(65536*(1+Math.random())).toString(32).substring(1)},i.uniqueId=function(){return""+i.time().toString(32)+"_"+n()+n()+n()}}).call(this),function(){var t,e,n;n=window.rh._,n.mapToEncodedString=function(t,e,r){return null==e&&(e="&"),null==r&&(r="="),n.reduce(t,function(t,n,i){return null!=t&&(i.length>0&&(i+=e),i+=""+n+r+encodeURIComponent(t)),i},"")},n.encodedStringToMap=function(t,e,r){var i;return null==e&&(e="&"),null==r&&(r="="),i=n.explodeAndMap(t,e,r,{"default":""}),n.each(i,function(t,e){return i[e]=decodeURIComponent(t)}),i},n.urlParams=function(t){return null==t&&(t=location.search.substring(1)),n.encodedStringToMap(t)},n.urlParam=function(t){return t&&n.urlParams()[t]},n.hashParams=function(t){return null==t&&(t=location.hash.substring(1)),n.encodedStringToMap(t)},n.hashParam=function(t){return t&&n.hashParams()[t]},n.updateHashMap=function(t,e){var r,i;return i=n.extend({},n.hashParams(),t),r=n.mapToEncodedString(i),r.length>0&&(r="#"+r),e?location.hash=r:""!==r&&location.hash!==r?location.replace(r):void 0},n.stripStringBetween=function(t,e,n){var r,i,o;return o=t.indexOf(e),-1!==o&&(r=t.indexOf(n),o>r&&(r=t.length),i=""+t.substring(0,o)+t.substring(r,t.length)),i||t},n.stripParam=function(t){return null==t&&(t=document.location.href),n.stripStringBetween(t,"?","#")},n.stripBookmark=function(t){return null==t&&(t=document.location.href),n.stripStringBetween(t,"#","?")},n.extractStringBetween=function(t,e,n){var r,i,o;return i=t.indexOf(e),-1!==i&&(r=t.indexOf(n),i>r&&(r=t.length),o=t.substring(i+1,r)),o||""},n.extractParamString=function(t){return null==t&&(t=document.location.href),n.extractStringBetween(t,"?","#")},n.extractHashString=function(t){return null==t&&(t=document.location.href),n.extractStringBetween(t,"#","?")},n.traverseToPath=function(){return""},e=function(t,e,n){switch(null==n&&(n="/"),e){case".":return t;case"..":return t.substring(0,t.lastIndexOf(n));default:return t+n+e}},n.traverseByPath=function(t,n,r){var i,o,s,u;for(null==r&&(r="/"),t=t.substring(0,t.lastIndexOf(r)),o=n.split(r),s=0,u=o.length;u>s;s++)i=o[s],i.length>0&&(t=e(t,i,r));return t+r},n.protocol=function(t){var e,n,r;return e=t.trim().indexOf(":"),-1!==e&&(r=t.substring(0,e+1).toLowerCase()),r&&(n=r.match(/[a-z]+:/),n&&n[0].length===r.length||(r=void 0)),r},n.isJavaScriptUrl=function(t){return"javascript:"===n.protocol(t)},n.isRelativeUrl=function(t){return!n.protocol(t)},n.isValidFileUrl=function(t){var e;return"#"===t[0]?!1:(e=n.protocol(t),!e||-1!==["http:","https:","ftp:","file:"].indexOf(e))},n.makeRelativeUrl=function(t,e){var r,i,o;return null==e&&(e=document.location.href),t===e?"":(r=n.filePath(t),i=n.filePath(e),o=n.makeRelativePath(r,i),""+o+t.substring(r.length))},n.makeRelativePath=function(t,e){var r,i,o,s,u,l;if(null==e&&(e=n.filePath()),!t||n.isRelativeUrl(t)||n.isRelativeUrl(e))u=t;else{for(l=t.split("/"),r=e.split("/"),o=0;;){if(l.length===o||r.length===o)break;if(l[o]!==r[o])break;o++}for(s=l.slice(o),u="",i=r.length-o-1;;){if(0>=i)break;u+="../",i--}u+=s.join("/")}return u},n.isLocal=function(){return"file:"===window.location.protocol},n.isRemote=function(){return"file:"!==window.location.protocol},t=null,n.isSameOrigin=function(e){var r;return n.isLocal()?!0:(r=window.location,null==t&&(t=r.origin),null==t&&(t=""+r.protocol+"//"+r.hostname,r.port&&(t+=":"+r.port)),t===e)},n.filePath=function(t){var e;return null==t&&(t=document.location.href),e=t.indexOf("?"),-1!==e&&(t=t.substring(0,e)),e=t.indexOf("#"),-1!==e&&(t=t.substring(0,e)),t},n.parentPath=function(t){var e;return null==t&&(t=n.filePath()),e=t.lastIndexOf("/"),-1!==e&&(t=t.substring(0,e+1)),t},n.getFileName=function(t){var e,r,i;return r=n.filePath(t),i=r.lastIndexOf("/"),e=-1!==i?r.substring(i+1):r,e||""},n.getFileExtention=function(t){var e,r,i;return r=n.getFileName(t),i=null!=r?r.lastIndexOf("."):void 0,-1!==i&&(e=r.substring(i)),e||""}}.call(this),function(){var t,e;e=window.rh._,t=/\#{([^}]*)\}/g,e.splitAndTrim=function(t,n){return null==t&&(t=""),e.map(t.split(n),function(t){return t.trim()})},e.explodeAndMap=function(t,e,n,r){var i,o,s,u,l,a,c,h,d;for(null==t&&(t=" "),null==r&&(r={}),u=t.split(e),a=new RegExp(""+n+"(.+)?"),o={},h=0,d=u.length;d>h;h++)l=u[h],s=l.split(a),i=s[0].trim(),c=s[1],r.caseInsensitive&&(i=i.toLowerCase()),r.trim&&(c=c&&c.trim()),null!=r["default"]&&null==c&&(c=r["default"]),""!==i&&(o[i]=c);return o},e.resolveController=function(t){return t.replace(/(^|[^._a-zA-Z0-9])\$(?=[^.(])/g,"this.controllers.")},e.resolveEnclosedVar=function(e,n){var r,i,o,s,u;if(o=e.match(t))for(s=0,u=o.length;u>s;s++)i=o[s],r=n(i.substring(2,i.length-1).trim()),e=e.replace(i,r);return e},e.resolveAttr=function(t){return e.explodeAndMap(t,";",":",{trim:!0})},e.resolveNiceJSON=function(t){return null==t&&(t=" "),t=t.replace(/'/g,'"'),t="{"+t+"}",JSON.parse(t.replace(/(\{|,)\s*(.+?)\s*:/g,'$1 "$2":'))},e.resolvePipedExpression=function(t){var n;return null==t&&(t=""),n=!1,e.reduce(t.split("|"),function(t,e,r){var i;return n&&r.length>0&&(i=""+r[r.length-1]+" ||"+t,r.length=r.length-1),n=0===t.length,i&&(t=i),0!==t.length&&r.push(t.trim()),r},[])},e.resolveWidgetArgs=function(t){var n,r;return r=e.resolvePipedExpression(t),n=r.shift()||"",n=0<n.search(":")?e.explodeAndMap(n,",",":",{trim:!0}):{arg:n},{pipedArgs:r,config:n}},e.resolveExprOptions=function(t){var n,r;return r=e.resolvePipedExpression(t),r[1]&&(n=e.resolveNiceJSON(r[1])),{expr:r[0],opts:n}},e.applyCallbackOptions=function(t,n){var r;return r=t,n&&n.debounce&&(r=e.debounce(r,n.debounce)),n&&n.toggleTimeout&&(r=e.toggleTimeout(r,n.toggleTimeout)),n&&n.timeout&&(r=e.timeout(r,n.timeout)),n&&n.defer&&(r=e.timeout(r,1)),r}}.call(this),function(){var t;t=window.rh._,t.stackTrace=function(){var t;return t=new Error,t.stack}}.call(this),function(){var t;t=window.rh._,t.addEventListener=function(t,e,n){return null==t&&(t=window),null!=t.addEventListener?t.addEventListener(e,n,!1):null!=t.attachEvent?t.attachEvent("on"+e,n):void 0},t.removeEventListener=function(t,e,n){return null==t&&(t=window),null!=t.removeEventListener?t.removeEventListener(e,n,!1):null!=t.detachEvent?t.detachEvent("on"+e,n):void 0},t.isTouchEnabled=function(){return null!=document.ontouchstart},t.preventDefault=function(t){return null!=t.preventDefault?t.preventDefault():t.returnValue=!1}}.call(this),function(){var t,e,n;n=window.rh._,e=/(^|[^\\])@([\w\.\-]*)\((.*)\)/g,t=/(^|[^\\])@([\w\.\-]*)/g,n.resolvePublish=function(t){var n,r;for(r=new RegExp(e);;){if(n=r.exec(t),!n)break;t=t.replace(n[0],""+n[1]+" this.publish('"+n[2]+"', "+n[3]+")")}return t},n.resolveGet=function(e,n){var r,i;for(i=new RegExp(t);;){if(r=i.exec(e),!r)break;n&&-1===n.indexOf(r[2])&&n.push(r[2]),e=e.replace(r[0],""+r[1]+" this.get('"+r[2]+"')")}return e},n.resolveModelKeys=function(t,e){return this.resolveGet(this.resolvePublish(t),e)},n.isModelKey=function(t){var e;return e=t.match(/[._a-zA-Z][._a-zA-Z0-9]*/),e&&e[0]===t},n.get=function(t,e){var n,r,i,o,s,u;for(i=e.split("."),n=s=0,u=i.length;u>s;n=++s)if(r=i[n],0===n)o=t[r];else{if(!o)break;o=o[r]}return o}}.call(this),function(){var t;t=window.rh._,t.evalTagExpression=function(t,e){var n,r,i,o,s,u,l,a,c;if(!e||0===e.length)return!0;if(o=rh.model.get(rh.consts("KEY_PROJECT_TAG_COMBINATIONS")),s=null!=t&&null!=o&&o[t],!s||0===s.length)return!0;if(1===s.length&&""===s[0])return!0;for(u=0,a=e.length;a>u;u++){for(r=e[u],n=!1,l=0,c=s.length;c>l;l++)if(i=s[l],-1!==r.indexOf(i)){n=!0;break}if(!n)return!1}return n}}.call(this),function(){var t,e,n;e=window.rh,n=e._,e._params=n.urlParams(),e._debugFilter=e._params.rh_debug,e._debug=null!=e._debugFilter,e._testFilter=e._params.rh_test,e._test=null!=e._testFilter,e._errorFilter=e._params.rh_error,e._error=null!=e._errorFilter,e._breakFilter=e._params.rh_break,e._break=null!=e._breakFilter,t=function(t,e){return t.join(" ").match(e)},e._d=function(){var n,r,i,o;return r=window.console,e._debug&&r&&"function"==typeof r.log&&(n=Array.prototype.slice.call(arguments,0),["info","log","warn","debug","error"].indexOf(n[0])>-1?(i=r[n[0]],n=n.slice(1)):i=r.debug,o=["[ "+n[0]+" ]:"].concat(n.slice(1)),""===e._debugFilter||t(o,e._debugFilter))?e._break&&t(o,e._breakFilter)?Function("","debugger")():e._error&&t(o,e._errorFilter)?r.error.apply(r,o):i.apply(r,o):void 0}}.call(this),function(){var t,e,n;n=window.rh,t={},n.consts=e=function(e,r){return null==r?(n._debug&&null==t[e]&&n._d("error","consts",""+e+" is not available"),t[e]):null==t[e]?t[e]=r:n._debug?n._d("error","consts",""+e+" is already registered"):void 0},e("KEY_SHARED_INPUT","._sharedkeys.input"),e("KEY_SHARED_OUTPUT","._sharedkeys.output"),e("KEY_PROJECT_TOPICLIST",".p.topiclist"),e("KEY_PROJECT_BRSLIST",".p.brslist"),e("KEY_PROJECT_TAG_COMBINATIONS",".p.tag_combinations"),e("KEY_PROJECT_TAG_STATES",".p.tag_states"),e("KEY_TOPIC_URL",".t.topicurl"),e("KEY_TOPIC_ID",".t.topicid"),e("KEY_TOPIC_TITLE",".t.topictitle"),e("KEY_TOPIC_BRSMAP",".t.brsmap"),e("KEY_SEARCH_TERM",".l.searchterm"),e("KEY_SEARCHED_TERM",".l.searched_term"),e("KEY_TAG_EXPRESSION",".l.tag_expression"),e("KEY_UI_MODE",".l.uimode"),e("KEY_BASE_IFRAME_NAME",".l.base_iframe_name"),e("KEY_CAN_HANDLE_SERCH",".l.can_handle_search"),e("KEY_CSH_MODE",".l.csh_mode"),e("KEY_TOPIC_IN_IFRAME",".l.topic_in_iframe"),e("EVT_HASH_CHANGE",".e.hashchange"),e("EVT_BASE_IFRAME_LOAD",".e.base_iframe_load"),e("EVT_SCROLL_TO_TOP",".e.scroll_to_top"),e("EVT_WIDGET_BEFORELOAD",".e.widget_beforeload"),e("EVT_WIDGET_LOADED",".e.widget_loaded"),e("EVT_SEARCH_TERM",".e.search_term"),e("EVT_NAVIGATE_TO_URL",".e.navigate_to_url"),e("EVT_BEFORE_UNLOAD",".e.before_unload"),e("EVT_UNLOAD",".e.unload"),e("EVT_BOOKMARK",".e.bookmark."),e("EVT_PRINT_TOPIC",".e.print_topic"),e("HASH_KEY_RH_HIGHLIGHT","rhhlterm"),e("HASH_KEY_RH_SYNS","rhsyns"),e("HASH_KEY_RH_SEARCH","rhsearch"),e("HASH_KEY_RH_TOCID","rhtocid"),e("HASH_KEY_TOPIC","t"),e("HASH_KEY_UIMODE","ux")}.call(this),function(){var t,e,n;e=window.rh,n=e._,t=e.$=function(t,e){var n;return null!=e&&0===e?document.querySelector(t):(n=document.querySelectorAll(t),null!=e&&e<n.length?n[e]:n)},t.find=function(){var t,e;return arguments.length>1?(t=arguments[0],e=arguments[1]):(t=document,e=arguments[0]),t.querySelectorAll(e)},t.eachChild=function(t,e,n,r){var i,o,s,u;for(u=this.find(t,e),o=0,s=u.length;s>o;o++)i=u[o],n.call(r||window,i)},t.eachDataNode=function(e,n,r,i){var o,s,u,l;for(l=this.find(e,"[data-"+n+"]"),s=0,u=l.length;u>s;s++)o=l[s],r.call(i||window,o,t.dataset(o,n))},t.eachAttributes=function(t,e,n){var r,i,o,s;for(s=function(){var e,n,i,o;for(i=t.attributes,o=[],e=0,n=i.length;n>e;e++)r=i[e],o.push([r.specified,r.name,r.value]);return o}(),i=-1;++i<s.length;)o=s[i],o[0]!==!1&&e.call(n||window,o[1],o[2],s)},t.getAttribute=function(t,e){return null!=t.getAttribute?t.getAttribute(e):void 0},t.setAttribute=function(t,e,n){return null!=t.setAttribute?t.setAttribute(e,n):void 0},t.removeAttribute=function(t,e){return null!=t.removeAttribute?t.removeAttribute(e):void 0},t.hasAttribute=function(t,e){return null!=t.hasAttribute?t.hasAttribute(e):!0},t.dataset=function(t,e,n){if(void 0!==n){if(null!=t.dataset)return null===n?delete t.dataset[e]:t.dataset[e]=n;if(null!=t.getAttribute)return null===n&&t.removeAttribute?t.removeAttribute("data-"+e):t.setAttribute("data-"+e,n)}else{if(null!=t.dataset)return t.dataset[e];if(null!=t.getAttribute)return t.getAttribute("data-"+e)}},t.isDescendent=function(t,e){var n;for(n=e.parentNode;;){if(!n||n===t)break;n=n.parentNode}return n===t},t.addClass=function(t,e){return null!=t.classList?t.classList.add(e):t.className=""+t.className+" "+e},t.removeClass=function(t,e){return null!=t.classList?t.classList.remove(e):t.className=t.className.replace(e,"")},t.hasClass=function(t,e){return null!=t.classList?t.classList.contains(e):-1!==t.className.search(e)},t.toggleClass=function(e,n){return t.hasClass(e,n)?t.removeClass(e,n):t.addClass(e,n)},t.textContent=function(t,e){return void 0!==e?null!=t.textContent?t.textContent=e:t.innerText=e:t.textContent||t.innerText},t.css=function(t,e,n){return void 0===n?t.style[e]:t.style[e]=n}}.call(this),function(){var t,e,n,r,i,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=window.rh,i=r._,t=function(){function t(t,e){this.subscribers=null!=t?t:[],this.children=null!=e?e:{}}return t.prototype.getSubscribers=function(t,e,n,r){var i,o,s;return t.length>1?(o=t[1],(i=this.children[o])&&(r.push({fns:this.subscribers,key:e,value:n}),s=""+e+"."+o,i.getSubscribers(t.slice(1),s,null!=n?n[o]:void 0,r))):t.length>0&&this._getAllChildSubscribers(e,n,r),r},t.prototype.addSubscribers=function(e,n){var r,i;return 1===n.length?this.subscribers.push(e):n.length>1?(r=n[1],null==(i=this.children)[r]&&(i[r]=new t),this.children[r].addSubscribers(e,n.slice(1))):void 0},t.prototype.removeSubscriber=function(t,e){return 1===e.length?this._deleteSubscriber(t):e.length>1?this.children[e[1]].removeSubscriber(t,e.slice(1)):void 0},t.prototype._deleteSubscriber=function(t){var e;return e=this.subscribers.indexOf(t),null!=e&&-1!==e?this.subscribers.splice(e,1):r._debug?r._d("error","unsubscribe",""+this+".{key} is not subscribed with "+t):void 0},t.prototype._getAllChildSubscribers=function(t,e,n){var r,i,o;if(n.push({fns:this.subscribers,key:t,value:e}),this.children){null==e&&(e={}),o=this.children;for(i in o)r=o[i],r._getAllChildSubscribers(""+t+"."+i,e[i],n)}return n},t}(),n=function(e){function n(t,e,r){this.subscribers=t,this.children=e,this.data=null!=r?r:{},n.__super__.constructor.call(this,this.subscribers,this.childs)}return s(n,e),n.prototype.getSubscribers=function(t){var e,n;return n=t[0],e=this.children[n],e?e.getSubscribers(t,""+t[0],this.data[t[0]],[]):[]},n.prototype.addSubscribers=function(e,n){var r,i;return r=n[0],null==(i=this.children)[r]&&(i[r]=new t),this.children[r].addSubscribers(e,n)},n.prototype.removeSubscriber=function(t,e){var n,r;return n=e[0],null!=(r=this.children[n])?r.removeSubscriber(t,e):void 0},n.prototype.getData=function(t){var e,n,r,o,s,u;for(e=this.data,n=s=0,u=t.length;u>s&&(r=t[n],i.isDefined(e));n=++s)n===t.length-1?o=e[r]:e=e[r];return o},n.prototype.setData=function(t,e){var n,r,o,s,u;for(n=this.data,r=s=0,u=t.length;u>s;r=++s)o=t[r],r===t.length-1?n[o]=e:(i.isDefined(n[o])||(n[o]={}),n=n[o])},n}(t),e=function(){function t(){this._rootNode=new n,this._count=e,e+=1}var e;return e=0,t.prototype.toString=function(){return"Model_"+this._count},t.prototype.get=function(t){var e;return this._isForGlobal(t)?r.model.get(t):(i.isString(t)?e=this._rootNode.getData(this._getKeys(t)):r._d("error","Get",""+this+"."+t+" is not a string"),r._debug&&r._d("log","Get",""+this+"."+t+": "+JSON.stringify(e)),e)},t.prototype.publish=function(t,e,n){var o,s,u,l,a,c,h,d;if(null==n&&(n={}),this._isForGlobal(t))return r.model.publish(t,e,n);if(r._debug&&r._d("log","Publish",""+this+"."+t+": "+JSON.stringify(e)),"string"==typeof t){for(this._rootNode.setData(this._getKeys(t),e),u=this._rootNode.getSubscribers(this._getKeys(t)),l=0,c=u.length;c>l;l++)if(s=u[l],s.fns)for(d=s.fns,a=0,h=d.length;h>a;a++)o=d[a],i.isDefined(o)&&(r._debug&&r._d("log","Publish call",""+this+"."+s.key+": "+JSON.stringify(s.value)),n.sync?o(s.value,s.key):r._.defer(o,s.value,s.key))}else r._d("error","Publish",""+this+"."+t+" is not a string")},t.prototype.isSubscribed=function(t){var e,n,i,o,s;if(this._isForGlobal(t))return r.model.isSubscribed(t);for("."===t[0]&&(t=t.substring(1)),i=this._rootNode.getSubscribers(this._getKeys(t)),o=0,s=i.length;s>o;o++)n=i[o],n.key===t&&(e=!0);return e===!0},t.prototype.subscribe=function(t,e,n){var i,o;return null==n&&(n={}),this._isForGlobal(t)?r.model.subscribe(t,e,n):(r._debug&&r._d("log","Subscribe",""+this+"."+t),this._rootNode.addSubscribers(e,this._getKeys(t)),o=this._rootNode.getData(this._getKeys(t)),(n.forceInit||null!=o&&!n.initDone)&&e(o,t),i=function(n){return function(){return n.unsubscribe(t,e)}}(this))},t.prototype.unsubscribe=function(t,e){return this._isForGlobal(t)?r.model.unsubscribe(t):(r._debug&&r._d("log","Unsubscribe",""+this+"."+t),this._rootNode.removeSubscriber(e,this._getKeys(t)))},t.prototype.toggle=function(t){return this._isForGlobal(t)?r.model.toggle(t):this.publish(t,!this.get(t))},t.prototype.isGlobal=function(){return this===r.model},t.prototype.isGlobalKey=function(t){return t&&"."===t[0]},t.prototype._isForGlobal=function(t){return!this.isGlobal()&&this.isGlobalKey(t)},t.prototype._getKeys=function(t){var e;return e=t.split("."),""===e[0]&&(e=e.slice(1)),r._debug&&0===e.length&&r._d("error","Model",""+this+"."+t+" is invalid"),e},t}(),r.Model=e,r.model=new e,r.model.toString=function(){return"GlobalModel"}}.call(this),function(){var t,e,n,r,i,o;i=window.rh,o=i._,t=i.$,r=function(e,n){var r,s,u,l,a,c,h,d,p,f,_;for(_=t.find(e,"[data-rhwidget]"),p=0,f=_.length;f>p;p++)if(u=_[p],!t.dataset(u,"loaded")&&t.isDescendent(e,u)){s=t.dataset(u,"config"),s=s?o.resolveNiceJSON(s):{},a=o.explodeAndMap(t.dataset(u,"rhwidget"),";",":");for(c in a)l=a[c],l&&l.length>0&&(c[0]===c[0].toLowerCase()?s.rawArg=l:(r=o.resolveWidgetArgs(l),r.pipedArgs.length>0&&(s.pipedArgs=r.pipedArgs),r.config&&o.extend(s,r.config))),s.node=u,h=i.widgets[c],d=new h(s),d.init(n)}},e=function(e){var n,r,s,u,l,a,c,h;for(a=t.find(e,"[data-rhtags]"),h=[],u=0,l=a.length;l>u;u++)r=a[u],t.isDescendent(e,r)&&(n=t.dataset(r,"config"),n=n?o.resolveNiceJSON(n):{},n.ids=null!=(c=t.dataset(r,"rhtags"))?c.split(","):void 0,n.node=r,h.push(s=new i.widgets.ContentFilter(n)));return h},n=function(t,n){return r(t,n),e(t)},o.loadWidgets=r,o.loadContentFilter=e,o.loadDataHandlers=n}.call(this),function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}};e=window.rh,t=function(){function t(){this.guard=n(this.guard,this)}return t.prototype.guard=function(t,e){return null==this.guardedNames&&(this.guardedNames=[]),-1===this.guardedNames.indexOf(e)?(this.guardedNames.push(e),t.call(this),this.guardedNames.splice(this.guardedNames.indexOf(e),1)):void 0},t}(),e.Guard=t,e.guard=(new t).guard}.call(this),function(){var t,e,n;e=window.rh,n=e._,t=function(){function t(){}return t.prototype.attachOwner=function(t){var e,n,r,i;if(null==this._ownerFns&&(this._ownerFns={}),this.hasOwner()&&this.detach(this.owner),this.owner=t,this._overrideNames)for(i=this._overrideNames,n=0,r=i.length;r>n;n++)e=i[n],this._overrideOwnerFn(e);return this.ownerIsChanged()},t.prototype.detachOwner=function(){var t;if(this.hasOwner()){if(this._ownerFns)for(t in this._ownerFns)this._restoreOwnerFn(t);return this.owner=null,this._ownerFns={},this.ownerIsChanged()}},t.prototype.ownerIsChanged=function(){},t.prototype.hasOwner=function(){return null!=this.owner},t.prototype.addOverrides=function(t){var e,n,r,i;for(null==this._overrideNames&&(this._overrideNames=[]),i=[],n=0,r=t.length;r>n;n++)e=t[n],this._overrideNames.push(e),i.push(this._overrideOwnerFn(e));return i},t.prototype.removeOverrides=function(t){var e,n,r,i,o;for(o=[],r=0,i=t.length;i>r;r++)e=t[r],this._restoreOwnerFn(e),n=this._overrideNames.indexOf(e),o.push(n>-1?this._overrideNames.splice(n,1):void 0);return o},t.prototype._overrideOwnerFn=function(t){var e;return this.hasOwner()?(e=this.owner[t],this._ownerFns[t]=e,this.owner[t]=function(n){return function(){var r,i;return r=Array.prototype.slice.call(arguments,0),i=function(t){return e&&null!=e.apply?e.apply(n.owner,t):void 0},n[t](i,r)}}(this)):void 0},t.prototype._restoreOwnerFn=function(t){return this.hasOwner()?(this.owner[t]=this._ownerFns[t],delete this._ownerFns[t]):void 0},t}(),e.Plugin=t}.call(this),function(){var t,e,n,r,i={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=window.rh,r=n._,t=n.$,e=function(e){function n(){this.$el=t("#console",0),this.$el&&(null==window.console&&(window.console={}),this.attachOwner(window.console),this.addOverrides(s),r.each(s,function(t,e){return this[t]=function(){return this.color=i[e],this.logger.apply(this,arguments)}},this),this.createChildNodes(),this.setUpInputBox())}var i,s;return o(n,e),s=["info","log","warn","debug","error"],i=["#00FF00","#000000","#0000FF","#0000FF","#FF0000"],n.prototype.ownerIsChanged=function(){return this.$el.style.display=this.hasOwner()?"":this.$el?"none":void 0},n.prototype.logger=function(e,n,i){var o,s,u,l,a,c,h;for(null==i&&(i="span"),u=[],a=document.createElement(i),c=0,h=n.length;h>c;c++)if(o=n[c],r.isFunction(o)||r.isString(o))u.push(o);else if(null!=o){try{l=JSON.stringify(o)}catch(d){s=d,l=""+s.name+": "+s.message}u.push(l)}else u.push("undefined");return"#FF0000"===this.color&&u.push(r.stackTrace()),a.style.color=this.color,t.textContent(a,u.join(" ")),this.$logNode.appendChild(a),this.$logNode.appendChild(document.createElement("br")),this.$el.scrollTop=this.$el.scrollHeight,e?e(n):void 0},n.prototype.createChildNodes=function(){var e;return this.$logNode=t.find(this.$el,"p")[0],this.$logNode||(this.$logNode=document.createElement("p"),this.$logNode.className="console",this.$el.appendChild(this.$logNode)),this.$input=t.find(this.$el,"input")[0],this.$input?void 0:(e=document.createElement("label"),t.textContent(e,"> "),e.style.color="blue",this.$input=document.createElement("input"),this.$input.type="text",this.$input.className="console",this.$input.style.width="98%",this.$input.style.border="0",this.$input.style.padding="2px",this.$input.placeholder="Enter a valid expression",e.appendChild(this.$input),this.$el.appendChild(e))},n.prototype.setUpInputBox=function(){return this.$input.onkeydown=function(t){return function(e){var n,r,i;if(13===e.keyCode){t.color="#0000FF",r=t.$input.value;try{return i=Function("event","return "+r)(e),t.$input.value="",t.logger(null,[r],"b"),t.logger(null,[i])}catch(o){return n=o,t.color="#FF1100",t.logger(null,[""+n.name+": "+n.message],"b")}}}}(this)},n}(n.Plugin),n.Console=e}.call(this),function(){var t,e,n,r,i=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=window.rh,r=n._,t=n.$,e=function(e){function o(t){this.reRender=i(this.reRender,this);var e,r,o,s;for(u+=1,this._count=u,s=this.supportedArgs,r=0,o=s.length;o>r;r++)e=s[r],t[e]&&(this[e]=t[e]);this.parseOpts(t),this.node||n._d("error","constructor",""+this+" does not have a node")}var u;return s(o,e),u=0,o.prototype.toString=function(){return""+this.constructor.name+"_"+this._count},o.prototype.dataAttrs=["init","stext","shtml","controller","class","css","attr","value","checked","html","text","if","responsive","keydown","keyup","scroll","change","toggle","toggleclass","method","click","load"],o.prototype.dataAttrMethods=r.reduce(o.prototype.dataAttrs,function(t,e,n){return n["data-"+t]="data_"+t,n},{}),o.prototype.dataIAttrs=["itext","ihtml","iclass"],o.prototype.dataIAttrMethods=r.reduce(o.prototype.dataIAttrs,function(t,e,n){return n["data-"+t]="data_"+t,n},{}),o.prototype.supportedArgs=["node","model","useTemplate"],o.prototype.destruct=function(){var t,e,n,r;if(this.resetContent(),this._subscriptions)for(r=this._subscriptions,e=0,n=r.length;n>e;e++)(t=r[e])();return this._subscriptions=[],this.model=void 0},o.prototype.parseOpts=function(t){return this.opts=t},o.prototype.get=function(t){return null==this.model&&(this.model=new n.Model),this.model.get(t)},o.prototype.publish=function(t,e,r){return null==this.model&&(this.model=new n.Model),this.model.publish(t,e,r)},o.prototype.subscribe=function(t,e,r){var i;if(null!=t)return null==this.model&&(this.model=new n.Model),i=this.model.subscribe(t,e,r),(this.model.isGlobal()||this.model.isGlobal(t))&&(i=this.storeSubscribe(i)),i},o.prototype.subscribeOnly=function(t,e){return this.subscribe(t,e,{initDone:!0})},o.prototype.storeSubscribe=function(t){var e;return null==this._subscriptions&&(this._subscriptions=[]),e=function(n){return function(){var r;return r=n._subscriptions.indexOf(e),null!=r&&-1!==r&&n._subscriptions.splice(r,1),t()}}(this),this._subscriptions.push(e),e},o.prototype._rawExprObjects={},o.prototype.resolveRawExpr=function(t){var e,i,s,u,l;return u=o.prototype._rawExprObjects[t],null==u&&(s=[],l=r.resolveExprOptions(t),i=this._functionWithValue("",l.expr,s),e=function(e){var r,o;return o=function(){try{return i.call(this)}catch(e){return r=e,void(n._debug&&n._d("log","Expression: "+t,r.message))}}.call(this),e.call(this,o)},e=r.applyCallbackOptions(e,l.opts),u={callback:e,keys:s},o.prototype._rawExprObjects[t]=u),u},o.prototype.subscribeExpr=function(t,e,n){var i,o,s,u,l,a,c;if(null!=t){for(t&&r.isModelKey(t)&&(t="@"+t),o=this.resolveRawExpr(t),s=function(t){return function(){return o.callback.call(t,e)}}(this),c=o.keys,l=0,a=c.length;a>l;l++)i=c[l],u=this.subscribeOnly(i,s);return n&&n.push(u),s()}},o.prototype.resetContent=function(){var t,e,n,r,i,o,s,u;if(this.children)for(s=this.children,n=0,i=s.length;i>n;n++)t=s[n],t.destruct();if(this.htmlSubs)for(u=this.htmlSubs,r=0,o=u.length;o>r;r++)(e=u[r])();return this.children=[],this.htmlSubs=[]},o.prototype.addChild=function(t){return null==this.children&&(this.children=[]),this.children.push(t)},o.prototype.linkModel=function(t,e,n){var i,o,s,u;if(t&&(t=r.splitAndTrim(t,",")),t&&t.length>0)for(i=function(t){return function(e,r){return t.guard(function(){return n.publish(r,e,{sync:!0})},t.toString())}}(this),s=0,u=t.length;u>s;s++)o=t[s],this.storeSubscribe(e.subscribe(o,i))},o.prototype.init=function(e){var r,i,o,s;if(!this.initDone)return this.initDone=!0,e&&e.addChild(this),i=t.dataset(this.node,"input"),o=t.dataset(this.node,"output"),(i||o)&&(s=(null!=e?e.model:void 0)||n.model,"."===(i||o).trim()?this.model=s:(null==this.model&&(this.model=new n.Model),this.linkModel(i,s,this.model),this.linkModel(o,this.model,s))),(r=t.dataset(this.node,"init"))&&(this.data_init(this.node,r),t.dataset(this.node,"init",null)),this.render(),this.subscribeOnly(this.opts.renderkey,this.reRender)},o.prototype.initUI=function(){var e;return n._debug?(e=t.dataset(this.node,"loaded"),e&&(e=""+e+";"+this),t.dataset(this.node,"loaded",e||this)):t.dataset(this.node,"loaded",!0),null==this.tplNode&&(this.tplNode=this.node),this.resetContent()},o.prototype.reRender=function(t){return t?this.render():void 0},o.prototype.preRender=function(){var t;return this.useTemplate&&(t=this.node,this.node=this.tplNode.cloneNode(!0)),t},o.prototype.postRender=function(t){return t&&t.parentNode?t.parentNode.replaceChild(this.node,t):void 0},o.prototype.render=function(){var t;return n._test&&n.model.publish("test."+this+".render.begin",r.time()),this.initUI(),t=this.preRender(),this.nodeHolder=new n.NodeHolder([this.node]),this.resolveDataRepeat(),this.resolveDataAttrs(this.node),r.loadDataHandlers(this.node,this),this.postRender(t),n._test?n.model.publish("test."+this+".render.end",r.time()):void 0},o.prototype.isVisible=function(){return this.nodeHolder.isVisible()},o.prototype.show=function(){return this.nodeHolder.show()},o.prototype.hide=function(){return this.nodeHolder.hide()},o.prototype.toggle=function(){return this.isVisible()?this.hide():this.show()},o.prototype.isWidgetNode=function(e){return t.dataset(e,"rhwidget")},o.prototype.isDescendent=function(t){var e,n,r;for(e=t;;){if(r=e.parentNode,!r)break;if(this.isWidgetNode(e)){n=r;break}if(this.node===r)break;e=r}return null!=n},o.prototype.eachChild=function(e,n){return t.eachChild(this.node,e,function(t){return this.isDescendent(t)?void 0:n.call(this,t)},this)},o.prototype.eachDataNode=function(e,n){return t.eachDataNode(this.node,e,function(t,e){return this.isDescendent(t)?void 0:n.call(this,t,e)},this)},o.prototype.traverseNode=function(t,e,n){var r,i,o,s;if(e.call(this,t)){for(s=t.children,i=0,o=s.length;o>i;i++)r=s[i],this.isDescendent(r)||this.traverseNode(r,e,n);n&&n.call(this,t)}return t},o.prototype.resolveDataAttrs=function(){return this.traverseNode(this.node,function(e){return t.eachAttributes(e,function(t,n){var r;return r=this.dataAttrMethods[t],r&&n?this[r].call(this,e,n):void 0},this),!0})},o.prototype.resolveDataRepeat=function(){return this.eachDataNode("repeat",function(t,e){return this.data_repeat(t,e)})},o.prototype.resolveRepeatVar=function(t,e,n,i){return i[t]=i[t]||function(){switch(t){case"@index":return n;case"@size":return e.length;case"this":return e;default:return r.get(e,t)}}()},o.prototype.canResolveEnclosedVar=function(t){return this.dataAttrMethods[t]||this.dataIAttrMethods[t]},o.prototype.resolveItemIndex=function(e,n,i){var o;return e.children&&(o={},this.traverseNode(e,function(e){return t.eachAttributes(e,function(s,u,l){var a;if(r.isString(u)){if(a=this.dataIAttrMethods[s])return this[a].call(this,e,u,n,i,l),t.removeAttribute(e,s);if(this.canResolveEnclosedVar(s))return u=r.resolveEnclosedVar(u,function(t){return function(e){return t.resolveRepeatVar(e,n,i,o)}}(this)),t.dataset(e,s.substring(5),u);if(0===s.search("data-i"))return this.data_iHandler(e,u,n,i,s.substring(6)),t.removeAttribute(e,s)
}},this),!0})),e},o.prototype.guard=function(t,e){return null==e&&(e="ui"),o.__super__.guard.call(this,t,e)},o.prototype.data_repeat=function(e,i){var o,s,u,l,a,c,h;return h=r.resolvePipedExpression(i),s=h[0],l=h[1]&&r.resolveNiceJSON(h[1]),(null!=l?l.filter:void 0)&&(o=this._functionWithValue("item, index",l.filter)),a=(null!=l?l.step:void 0)||1,e.removeAttribute("data-repeat"),c=e.cloneNode(!0),u=new n.NodeHolder([e]),this._data_expr(s,function(e){var n,r,i,s,l,h,d;for(null==e&&(e=[]),s=[],a>0?(r=h=0,d=e.length):r=h=e.length-1;a>0?d>h:h>=0;r=h+=a)i=e[r],(!o||o.call(this,i,r))&&(n=this.resolve_rif(c,i,r))&&s.push(this.resolveItemIndex(n,i,r));return 0===s.length&&(l=c.cloneNode(!1),t.addClass(l,"rh-hide"),s.push(l)),u.updateNodes(s)})},o.prototype.resolve_rif=function(e,n,r){var i,o,s,u,l,a,c,h;if((l=t.dataset(e,"rif"))&&(i=this._functionWithValue("item, index",l)),!i||i.call(this,n,r))for(u=e.cloneNode(!1),t.removeAttribute(u,"data-rif"),h=e.childNodes,a=0,c=h.length;c>a;a++)o=h[a],s=this.resolve_rif(o,n,r),s&&u.appendChild(s);return u},o.prototype._functionCache={},o.prototype._function=function(t,e,n){var i,s,u,l,a,c,h;if(i=o.prototype._functionCache[t],i&&(s=i[e]),null!=s){if(n&&s.keys)for(h=s.keys,a=0,c=h.length;c>a;a++)l=h[a],n.push(l)}else e=r.resolveController(e),e=r.resolveModelKeys(e,n),u=new Function(t,e),s={fn:u,keys:n},null==i&&(i={}),i[e]=s,o.prototype._functionCache[t]=i;return s.fn},o.prototype._functionWithValueCache={},o.prototype._functionWithValue=function(t,e,n){var r,i,s,u,l,a,c;if(r=o.prototype._functionWithValueCache[t],r&&(i=r[e]),i){if(n&&i.keys)for(c=i.keys,l=0,a=c.length;a>l;l++)u=c[l],n.push(u)}else s=this._function(t,"return "+e+";",n),i={fn:s,keys:n},null==r&&(r={}),r[e]=i,o.prototype._functionWithValueCache[t]=r;return i.fn},o.prototype._data_iexpr=function(t,e,n,r){return this._functionWithValue("item, index, node",e).call(this,n,r,t)},o.prototype.data_itext=function(e,n,r,i){return t.textContent(e,this._data_iexpr(e,n,r,i))},o.prototype.data_ihtml=function(t,e,n,r){return t.innerHTML=this._data_iexpr(t,e,n,r)},o.prototype.data_iclass=function(e,n,r,i){var o;return o=this._data_iexpr(e,n,r,i),o?t.addClass(e,o):void 0},o.prototype.data_iHandler=function(e,n,r,i,o){var s;return s=this._data_iexpr(e,n,r,i),s?t.setAttribute(e,o,s):void 0},o.prototype.data_shtml=function(e,n){return t.removeAttribute(e,"data-shtml"),e.innerHTML=this.get(n)},o.prototype.data_stext=function(e,n){return t.removeAttribute(e,"data-stext"),t.textContent(e,this.get(n)||"")},o.prototype.data_init=function(t,e){var n,i;return i=r.resolveExprOptions(e),n=this._function("node",i.expr),n=r.applyCallbackOptions(n,i.opts),n.call(this,t)},o.prototype._data_expr=function(t,e){return this.subscribeExpr(t,e,this.htmlSubs)},o.prototype._eventCallBackData={},o.prototype._data_event_callback=function(t){var e,n;return e=o.prototype._eventCallBackData[t],null==e&&(e={},n=r.resolvePipedExpression(t),e.callback=this._function("event, node",n[0]),n[1]&&(e.opts=r.resolveNiceJSON(e[1])),o.prototype._eventCallBackData[t]=e),e},o.prototype.data_if=function(t,e){var r;return r=new n.NodeHolder([t]),this._data_expr(e,function(t){return t?r.show():r.hide()})},o.prototype.data_html=function(t,e){return this._data_expr(e,function(e){return null==e&&(e=""),t.innerHTML=e})},o.prototype.data_text=function(e,n){return this._data_expr(n,function(n){return null==n&&(n=""),t.textContent(e,n)})},o.prototype._classData={},o.prototype.data_class=function(t,e){var i;return i=o.prototype._attrData[e],null==i&&(i=r.resolveAttr(e),o.prototype._attrData[e]=i),r.each(i,function(e,r){var i;return i=new n.NodeHolder([t]),this._data_expr(e,function(t){var e;return e=t?[r]:[],i.updateClass(e)})},this)},o.prototype._attrData={},o.prototype.data_attr=function(e,n){var i;return i=o.prototype._attrData[n],null==i&&(i=r.resolveAttr(n),o.prototype._attrData[n]=i),r.each(i,function(n,r){return this._data_expr(n,function(n){return null!=n?t.setAttribute(e,r,n):t.hasAttribute(e,r)?t.removeAttribute(e,r):void 0})},this)},o.prototype.data_css=function(){var e;return e={},function(e,n){var i;return i=o.prototype._attrData[n],null==i&&(i=r.resolveAttr(n),o.prototype._attrData[n]=i),r.each(i,function(n,r){return this._data_expr(n,function(n){return null==n&&(n=null),t.css(e,r,n)})},this)}}(),o.prototype.data_checked=function(e,n){var r;return r=e.getAttribute("type"),"checkbox"===r||"radio"===r?(t.getAttribute(e,"checked")&&this.guard(function(){return this.publish(n,e.getAttribute("value",{sync:!0}))}),e.onclick=function(t){return function(){var r,i;return r=e.getAttribute("value"),i=null===r?e.checked:e.checked?r:void 0,t.guard(function(){return this.publish(n,i,{sync:!0})})}}(this),this.htmlSubs.push(this.subscribe(n,function(t){var n;return n=e.getAttribute("value"),e.checked=null!=n?t===n:t===!0}))):void 0},o.prototype.data_value=function(t,e){var n;return n=Math.random(),t.value&&this.guard(function(){return this.publish(e,t.value,{sync:!0})},n),t.onchange=function(r){return function(){return r.guard(function(){return this.guard(function(){return this.publish(e,t.value,{sync:!0})})},n)}}(this),this.htmlSubs.push(this.subscribe(e,function(e){return function(r){return e.guard(function(){return t.value=r},n)}}(this)))},o.prototype.data_responsive=function(t,e){var r,i,o,s;return i=this.get(".media_query."+e),o=new n.NodeHolder([t]),s=function(){return o.show()},r=function(){return o.hide()},n.responsive.attach(i,s,r),this.htmlSubs.push(function(){return n.responsive.detach(i,s,r)})},o.prototype._clickData={},o.prototype.data_click=function(t,e){var n,r;return r=o.prototype._clickData[e],null==r&&(n=this._function("event, node",e),r=function(t,e){return n.call(this,t,e)},o.prototype._clickData[e]=r),t.onclick=function(t){return function(e){return r.call(t,e,e.currentTarget)}}(this)},o.prototype._methodData={},o.prototype.data_method=function(t,e){var n;return n=o.prototype._methodData[e],null==n&&(n=function(t){return t.defaultPrevented?void 0:(this[e]||window[e])(t)},o.prototype._methodData[e]=n),r.addEventListener(t,"click",function(t){return function(e){return n.call(t,e)}}(this))},o.prototype._toggleData={},o.prototype.data_toggle=function(t,e){var n,i,s,u,l,a;return u=[],s=o.prototype._toggleData[e],null==s&&(a=r.resolvePipedExpression(e),i=a.shift()||"",i=r.explodeAndMap(i,";",":",{trim:!0}),a[0]&&(l=r.resolveNiceJSON(a[0])),s={keyValues:i,opts:l},o.prototype._toggleData[e]=s),r.each(s.keyValues,function(t,e){return u.push(e),null!=t?this.guard(function(){return this.publish(e,"true"===t,{sync:!0})}):void 0},this),n=function(t){return function(e){return t.guard(function(){return this.publish(e,!this.get(e),{sync:!0})})}}(this),s.opts&&(n=r.applyCallbackOptions(n,s.opts)),r.addEventListener(t,"click",function(t){return r.each(u,function(e){return t.defaultPrevented?void 0:n(e)})})},o.prototype.data_toggleclass=function(e,n){var i;return i=r.splitAndTrim(n,","),r.addEventListener(e,"click",function(n){return n.defaultPrevented?void 0:(e=n.currentTarget,r.each(i,function(n){return t.hasClass(e,n)?t.removeClass(e,n):t.addClass(e,n)}))})},o.prototype.data_change=function(t,e){var n,i;return i=this._data_event_callback(e),n=r.applyCallbackOptions(i.callback,i.opts),t.onchange=function(t){return function(e){return n.call(t,e.currentTarget)}}(this)},o.prototype.data_keydown=function(t,e){var n,i,o;return i=this._data_event_callback(e),n=r.applyCallbackOptions(i.callback,i.opts),o=i.opts&&i.opts.keyCode,t.onkeydown=function(t){return function(e){return o&&o!==e.keyCode?void 0:n.call(t,e,e.currentTarget)}}(this)},o.prototype.data_keyup=function(t,e){var n,i,o;return i=this._data_event_callback(e),n=r.applyCallbackOptions(i.callback,i.opts),o=i.opts&&i.opts.keyCode,t.onkeyup=function(t){return function(e){return o&&o!==e.keyCode?void 0:n.call(t,e,e.currentTarget)}}(this)},o.prototype.data_scroll=function(t,e){var n,i,o,s;return i=this._data_event_callback(e),s=i.opts,o=s&&s.delta||100,n=function(e){return function(n){var r;return r=t.getBoundingClientRect(),t.scrollTop>t.scrollHeight-(r.height+o)?i.callback.call(e,n,t):void 0}}(this),s&&(n=r.applyCallbackOptions(n,s)),r.addEventListener(t,"scroll",n)},o.prototype._loadData={},o.prototype.data_load=function(e,n){var i,s,u;return u=n.split(":"),i=u[0],s=u[1],o.prototype._loadData[i]?void 0:r.addEventListener(e,"click",function(n){return function(){var u;return o.prototype._loadData[i]?void 0:(o.prototype._loadData[i]=!0,s&&(t.addClass(e,"loading"),u=n.subscribeOnly(s,function(){return t.removeClass(e,"loading"),u()})),r.loadScript(i))}}(this))},o.prototype.data_controller=function(t,e){var i,o,s,u,l,a,c,h,d;for(null==this.controllers&&(this.controllers={}),d=r.splitAndTrim(e,";"),c=0,h=d.length;h>c;c++)u=d[c],a=r.resolvePipedExpression(u),o=a[0],a[1]&&(l=r.resolveNiceJSON(a[1])),a=r.splitAndTrim(o,"as"),i=n._controllers[a[0]],s=a[1],i&&!this.controllers[s]?this.controllers[s]=new i(this,l):n._debug&&(i||n._d("error","Controller "+i+" not found"),s||n._d("error","provide an instance name for controller"))},o}(n.Guard),n.widgets={},n.Widget=e,n.widgets.Basic=e}.call(this),function(){var t,e,n,r,i,o;r=window.rh,o=r._,t=r.$,e=r.consts,n=t("head",0),i=document.createElement("style"),i.innerHTML=".rh-hide:not(.rh-animate){display:none !important;}",n.insertBefore(i,n.childNodes[0]),o.addEventListener(document,"DOMContentLoaded",function(){return r.model.publish(e("EVT_WIDGET_BEFORELOAD"),!0,{sync:!0}),r._debug&&null==r.console&&(r.console=new r.Console),o.loadWidgets(document),o.loadContentFilter(document),r.model.publish(e("EVT_WIDGET_LOADED"),!0,{sync:!0})}),o.isIframe()&&(o.addEventListener(window,"beforeunload",function(){return void r.model.publish(e("EVT_BEFORE_UNLOAD"),!0,{sync:!0})}),o.addEventListener(window,"unload",function(){return void r.model.publish(e("EVT_UNLOAD"),!0,{sync:!0})}))}.call(this),function(){var t,e;t=window.rh,e=t._,e.addEventListener(window,"message",function(n){var r,i,o,s,u,l,a,c;if(e.isSameOrigin(n.origin)){if(u=null!=(a=n.data)?a.search(":"):void 0,-1!==u&&(s=n.data.substr(0,u),l=n.data.substr(u+1)),"rhmodel_publish"===s){r=JSON.parse(l),c=[];for(i in r)l=r[i],c.push(t.iframe.publish(i,l,{sync:!0}));return c}if("rhmodel_subscribe"===s){if(r=JSON.parse(l),o=r.input)return t.iframe.linkModel(n.source,r.id,o)}else if("rhmodel_unsubscribe"===s)return r=JSON.parse(l),t.iframe.clean(r.id)}})}.call(this),function(){var t,e,n,r,i,o=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty,u=function(t,e){function n(){this.constructor=t}for(var r in e)s.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=window.rh,i=r._,t=r.$,n=r.consts,e=function(t){function e(){this.unsubscribe=o(this.unsubscribe,this),this.linkedSubs={},i.isIframe()&&(r.model.subscribe(n("EVT_BEFORE_UNLOAD"),this.unsubscribe),r.model.subscribe(n("EVT_UNLOAD"),this.unsubscribe))}return u(e,t),e.prototype.toString=function(){return"Iframe"},e.prototype.unsubscribe=function(){var t;return this.parent?(t={id:this.id},this.parent.postMessage("rhmodel_unsubscribe: "+JSON.stringify(t),"*")):void 0},e.prototype.init=function(){var t,e,n;return null==this.id&&(this.id=i.uniqueId()),this.parent=window.parent,i.isIframe()&&(t=r.model.get("_sharedkeys.input"),t&&(e={input:t,id:this.id},this.parent.postMessage("rhmodel_subscribe: "+JSON.stringify(e),"*")),n=r.model.get("_sharedkeys.output"))?this.linkModel(this.parent,"parent",n):void 0},e.prototype.clean=function(t){var e,n,r,i;if(e=this.linkedSubs[t]){for(r=0,i=e.length;i>r;r++)(n=e[r])();return delete this.linkedSubs[t]}},e.prototype.linkModel=function(t,e,n){var i,o,s,u,l;for(null==n&&(n=[]),s=[],i=function(e){return function(n,r){return e.guard(function(){var e;return e={},e[r]=n,t.postMessage("rhmodel_publish: "+JSON.stringify(e),"*")})}}(this),u=0,l=n.length;l>u;u++)o=n[u],o=o.trim(),s.push(r.model.subscribe(o,i));return this.clean(e),this.linkedSubs[e]=s},e.prototype.publish=function(t,e,n){return null==n&&(n={}),this.guard(function(){return r.model.publish(t,e,n)})},e.prototype.guard=function(t,n){return null==n&&(n="Iframe"),e.__super__.guard.call(this,t,n)},e}(r.Guard),r.iframe=new e}.call(this),function(){var t,e,n;e=window.rh,n=e._,t=function(){function t(){}return t.prototype.toString=function(){return"Storage"},t.prototype.init=function(t){var r,i;return this.namespace?e._debug&&this.namespace!==t?e._d("error","Storage","Namespace cann't be changed"):void 0:(this.namespace=t,n.canUseLocalDB()?r=localStorage.getItem(this.namespace):(i=n.explodeAndMap(document.cookie,";","="),i[this.namespace]&&(r=unescape(i[this.namespace]))),this.storageMap=r?JSON.parse(r):{})},t.prototype.isValid=function(){return e._debug&&!this.storageMap&&e._d("error","Storage","Namespace is not set yet."),null!=this.storageMap},t.prototype.persist=function(t,e){return this.isValid()?(this.storageMap[t]=e,this.dump()):void 0},t.prototype.fetch=function(t){return this.isValid()?this.storageMap[t]:void 0},t.prototype.dump=function(){var t;return this.isValid()?n.canUseLocalDB()?localStorage.setItem(this.namespace,JSON.stringify(this.storageMap)):(t=n.explodeAndMap(document.cookie,";","="),t[this.namespace]=escape(JSON.stringify(this.storageMap)),document.cookie=n.reduce(t,function(t,e,n){return n.length&&(n+=";"),n+=""+e+"="+t},"")):void 0},t}(),e.storage=new t}.call(this),function(){var t,e,n;e=window.rh,n=e._,t=function(){function t(){this.subs=[]}return t.prototype.toString=function(){return"Responsive"},t.prototype.attach=function(t,e,n){var r,i;return i=window.matchMedia(t),r=function(t){return t.matches?e():n()},r(i),i.addListener(r),this.subs.push({mql:i,on:e,off:n,eventHandler:r})},t.prototype.detach=function(t,e,n){var r,i,o,s,u;for(u=this.subs,r=o=0,s=u.length;s>o;r=++o)if(i=u[r],i.mql.media===t&&i.on===e&&i.off===n){i.mql.removeListener(i.eventHandler),this.subs.splice(r);break}},t}(),e.responsive=new t}.call(this),function(){var t,e,n;n=window.rh,t=n.$,e=function(){function e(t){this.nodes=t}return e.prototype.isVisible=function(e){return null==e&&(e=this.nodes[0]),!t.hasClass(e,"rh-hide")},e.prototype.show=function(){var e,n,r,i,o;for(i=this.nodes,o=[],n=0,r=i.length;r>n;n++)e=i[n],this.isVisible(e)||o.push(t.removeClass(e,"rh-hide"));return o},e.prototype.hide=function(){var e,n,r,i,o;for(i=this.nodes,o=[],n=0,r=i.length;r>n;n++)e=i[n],this.isVisible(e)&&o.push(t.addClass(e,"rh-hide"));return o},e.prototype.updateClass=function(e){var n,r,i,o,s,u,l,a,c,h;for(null==this.oldClasses&&(this.oldClasses=[]),c=this.nodes,i=0,u=c.length;u>i;i++){for(r=c[i],h=this.oldClasses,o=0,l=h.length;l>o;o++)n=h[o],t.removeClass(r,n);for(s=0,a=e.length;a>s;s++)n=e[s],n.length>0&&(t.addClass(r,n),this.oldClasses.push(n))}},e.prototype.updateNodes=function(t){var e,n,r,i,o,s,u,l;for(e=this.nodes[0],r=e.parentNode,i=0,s=t.length;s>i;i++)n=t[i],r.insertBefore(n,e);for(l=this.nodes,o=0,u=l.length;u>o;o++)n=l[o],r.removeChild(n);return this.nodes=t},e}(),n.NodeHolder=e}.call(this),function(){var t,e;t=window.rh,e=t._,t._controllers={},t.registerController=function(e,n){return e&&n?t._controllers[e]=n:void 0}}.call(this),function(){var t,e,n,r=[].slice;n=window.rh,t=function(){function t(){this._listeners=[],this._cancelListeners=[]}return t.prototype.addListener=function(t,e){return t&&(this._listeners[this._listeners.length]=t),e&&(this._cancelListeners[this._cancelListeners.length]=e),function(n){return function(){return delete n._listeners[t],delete n._cancelListeners[e]}}(this)},t.prototype.trigger=function(){var t,e,n,i,o;for(e=1<=arguments.length?r.call(arguments,0):[],o=this._listeners,n=0,i=o.length;i>n;n++)t=o[n],t.apply(null,e);return!0},t.prototype.cancel=function(){var t,e,n,r,i;for(r=this._cancelListeners,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(t());return i},t}(),e=function(){function e(){this._events={}}return e.prototype.createEvent=function(e){return this._events[e]?void 0:this._events[e]=new t},e.prototype.addListener=function(t,e,n){return this.createEvent(t),this._events[t].addListener(e,n)},e.prototype.cancelEvent=function(t){return this._events[t].cancel(),delete this._events[t]},e.prototype.triggerEvent=function(){var t,e,n;return t=arguments[0],e=2<=arguments.length?r.call(arguments,1):[],(n=this._events[t]).trigger.apply(n,e)},e}(),n.events=new e}.call(this),function(){var t,e,n,r,i={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=window.rh,r=n._,t=n.$,e=function(t){function e(t){e.__super__.constructor.call(this,t),null==this.model&&(this.model=n.model)}return o(e,t),e}(n.Widget),window.rh.widgets.Global=e}.call(this),function(){var t,e,n,r,i=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=window.rh,r=n._,t=n.$,e=function(e){function o(t){this.renderChunck=i(this.renderChunck,this),this.reRender=i(this.reRender,this),o.__super__.constructor.call(this,t),null==this.key&&(this.key="_"+this),null==this.path&&(this.path=[]),null==this.children&&(this.children=[]),null==this.controllers&&(this.controllers={}),this.useTemplate=!0,this.renderedIndex=0,this.renderedCount=0,this.subscribeExpr(this.keyexpr,function(t){return null==t&&(t=[]),this.publish(this.key,t,{sync:!0})}),this.subscribeOnly(this.key,this.reRender),this.subscribeOnly(this.opts.loadmore,this.renderChunck)}return s(o,e),o.prototype.supportedArgs=["node","model","key","controllers","filter","spliton","path","tplNode","tplChildNodes"],o.prototype.parseOpts=function(t){var e;return o.__super__.parseOpts.apply(this,arguments),t.arg&&(this.key=t.arg),(e=t.pipedArgs)&&(e[0]&&e[0].length>0&&(this.filter=e[0]),e[1]&&e[1].length>0&&(this.spliton=e[1])),r.isString(this.filter)&&(this.filter=this.listItemExpr(this.filter)),r.isString(this.spliton)&&(this.spliton=this.listItemExpr(this.spliton)),this.key&&!r.isModelKey(this.key)?(this.keyexpr=this.key,this.key=null):void 0},o.prototype.notifyLoading=function(t){return this.opts.loading?this.publish(this.opts.loading,t):void 0},o.prototype._listItemExprData={},o.prototype.listItemExpr=function(t){var e;return e=o.prototype._listItemExprData[t],null==e&&(e=new Function("item, index","return "+t+";"),o.prototype._listItemExprData[t]=e),e},o.prototype.isWidgetNode=function(e){return o.__super__.isWidgetNode.apply(this,arguments)||t.dataset(e,"child")},o.prototype.reRender=function(t){return this.data=null,this.renderedIndex=0,this.renderedCount=0,o.__super__.reRender.call(this,t)},o.prototype.preRender=function(){var t,e;return e=this.node,null==this.tplChildNodes&&(this.tplChildNodes=function(){var e,n,r,i;for(r=this.tplNode.childNodes,i=[],e=0,n=r.length;n>e;e++)t=r[e],i.push(t);return i}.call(this)),this.node=this.tplNode.cloneNode(!1),this.alterNodeContent(),e},o.prototype.alterNodeContent=function(){return null==this.data&&(this.data=this.get(this.key)||[]),this.renderChunck()},o.prototype.renderChunck=function(){var t,e,n,i,o;for(this.notifyLoading(!1),t=n=i=this.renderedIndex,o=this.data.length-1;o>=n;t=n+=1)if(e=this.data[t],!this.filter||this.filter(e,t)){if(this.spliton&&t!==this.renderedIndex&&this.spliton(e,t)){this.notifyLoading(!0);break}this.renderOneItem(e,t)}return this.renderedIndex=t,0===this.renderedCount?r.defer(function(t){return function(){return t.hide()}}(this)):void 0},o.prototype.renderOneItem=function(e,r){var i,o,s,u,l,a,c;for(this.renderedIndex=r,i=this.opts.generateindex||n._debug,c=this.tplChildNodes,l=0,a=c.length;a>l;l++)u=c[l],(s=this.resolve_rif(u,e,r))&&(("undefined"==typeof o||null===o)&&(this.renderedCount++,o=!0),i&&t.dataset(s,"listindex",this.renderedCount-1),s.hasChildNodes()&&this.renderChildList(s,e,r),this.node.appendChild(this.resolveItemIndex(s,e,r,this.key)))},o.prototype.convertToListContainer=function(){},o.prototype._pathId=function(t){var e;return e="_",e+=this.path.join("_"),null!=t&&(this.path.length>0&&(e+="_"),e+=t),e},o.prototype._pathKey=function(t){var e;return null==t&&(t=""),t=t.toString(),e=this.path.join("."),t.length>0&&e.length>0?"."+e+"."+t:t.length>0?"."+t:"."+e},o.prototype.resolveRepeatVar=function(t,e,n,r){return r[t]=r[t]||function(){switch(t){case"@itemkey":return""+this.key+"."+n;case"@key":return this.key;case"@id":return this._pathId(n);case"@pid":return this._pathId();case"@path":return this._pathKey(n);case"@ppath":return this._pathKey();case"@level":return this.path.length;default:return o.__super__.resolveRepeatVar.call(this,t,e,n,r)}}.call(this)},o.prototype.canResolveEnclosedVar=function(t){return o.__super__.canResolveEnclosedVar.call(this,t)||"data-child"===t},o.prototype.renderChildList=function(e,n,r){return t.eachDataNode(e,"child",function(i,s){var u,l,a,c;return this.convertToListContainer(e),this.resolveItemIndex(i,n,r),s=t.dataset(i,"child"),"undefined"===s||""===s?i.parentNode.removeChild(i):(u=s.split("|"),c=u[1],a=u[0],l=new o({node:i,model:this.model,key:a,controllers:this.controllers,path:this.path.concat([this.renderedCount-1]),filter:c,tplNode:i.cloneNode(!1),tplChildNodes:this.tplChildNodes}),l.init(this),this.children.push(l))},this)},o}(n.Widget),window.rh.widgets.List=e}.call(this),function(){var t,e,n,r,i={}.hasOwnProperty,o=function(t,e){function n(){this.constructor=t}for(var r in e)i.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};n=window.rh,r=n._,t=n.$,e=function(e){function n(){return n.__super__.constructor.apply(this,arguments)}return o(n,e),n.prototype.convertToListContainer=function(e){return this.traverseNode(e,function(e){var n;return(n=t.dataset(e,"checked"))&&(t.dataset(e,"listindex",this.children.length),t.removeAttribute(e,"data-ivalue")),!n})},n.prototype.data_checked=function(e,r){var i;return(i=t.dataset(e,"listindex"))?this.data_gchecked(e,r,i):n.__super__.data_checked.call(this,e,r)},n.prototype.data_gchecked=function(t,e,n){var r,i,o;r=this.children[n],o=t.getAttribute("type"),("checkbox"===o||"radio"===o)&&(i=[],r.traverseNode(r.node,function(t){var e;return e=t.getAttribute("value"),e&&i.push(e),!0}),i=JSON.stringify(i),t.onclick=function(n){return function(){var r;return r=t.checked?JSON.parse(i):[],n.guard(function(){return this.publish(e,r,{sync:!0})})}}(this),this.htmlSubs.push(this.subscribe(e,function(e){return t.checked=i===JSON.stringify(e)})))},n}(n.widgets.List),window.rh.widgets.CheckboxList=e}.call(this),function(){var t,e,n,r,i,o,s,u,l={}.hasOwnProperty,a=function(t,e){function n(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};for(r=window.rh,i=r._,t=r.$,n=function(e){var n;return n=function(n){function i(n){i.__super__.constructor.call(this,n),null==this.model&&(this.model=r.model),t.dataset(this.node,e,n.rawArg),this.initUI(),this.resolveDataAttrs(this.node),this.initDone=!0}return a(i,n),i.prototype.toString=function(){return""+e+"_"+this._count},i.prototype.dataAttrMethods=function(){var t;return t={},t["data-"+e]="data_"+e,t}(),i}(r.Widget)},u=r.Widget.prototype.dataAttrs,o=0,s=u.length;s>o;o++)e=u[o],window.rh.widgets[e]=n(e)}.call(this),function(){var t,e,n,r,i,o={}.hasOwnProperty,s=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};r=window.rh,i=r._,t=r.$,n=r.consts,e=function(e){function o(t){o.__super__.constructor.call(this,t),this.ids=t.ids,this.className=t.className||"rh-hide",this.ids?this.subscribe(n("KEY_TAG_EXPRESSION"),function(t){return function(e){var n,r,o,s,u;for(n=!0,u=t.ids,o=0,s=u.length;s>o;o++)r=u[o],i.evalTagExpression(r,e)&&(n=!1);return t.toggleClass(n),"rh-hide"!==t.className&&t.toggleClick(n),t.applied=n}}(this),r.model):r._debug&&r._d("error","data-tags without any tag combination")}return s(o,e),o.prototype.preventClick=function(t){return t.preventDefault()},o.prototype.toggleClass=function(e){return e?this.applied?void 0:t.addClass(this.node,this.className):t.removeClass(this.node,this.className)},o.prototype.toggleClick=function(t){if(t){if(!this.applied)return i.addEventListener(this.node,"click",this.preventClick)}else if(this.applied)return i.removeEventListener(this.node,"click",this.preventClick)},o}(r.Widget),window.rh.widgets.ContentFilter=e}.call(this);