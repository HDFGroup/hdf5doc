<html>
<head>
<title>HDF5 Metadata</title>
</head>

<body>


<!--
  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
  * Copyright by The HDF Group.                                               *
  * Copyright by the Board of Trustees of the University of Illinois.         *
  * All rights reserved.                                                      *
  *                                                                           *
  * This file is part of HDF5.  The full HDF5 copyright notice, including     *
  * terms governing use, modification, and redistribution, is contained in    *
  * the files COPYING and Copyright.html.  COPYING can be found at the root   *
  * of the source code distribution tree; Copyright.html can be found at the  *
  * root level of an installed copy of the electronic HDF5 document set and   *
  * is linked from the top-level documents page.  It can also be found at     *
  * http://hdfgroup.org/HDF5/doc/Copyright.html.  If you do not have          *
  * access to either file, you may request a copy from help@hdfgroup.org.     *
  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 -->

<!-- This file provides a reasonably complete description of HDF5 metadata.  -->
<!-- A brief overview can be found in the file _topics/metadata.htm,         -->
<!-- which is designed for PHP-inclusion in running text.                    -->

<br />
<p>
Return to &ldquo;<a href="../../Advanced.html">Advanced Topics</a>.&rdquo;</p>
<hr />


<h1>HDF5 Metadata</h1>

<h2>Introduction</h2>
    HDF5 files can contain several types of metadata: 
    <ul>
        <li>Library metadata 
        <li>Static user metadata
        <li>Dynamic user metadata
    </ul>

<h2>Library Metadata</h2>
    Library metadata is metadata that the user does not have any direct 
    interaction with or control over.  It is generated by the HDF5 Library 
    to describe the structure of the file and structure and contents of 
    objects in the file.  
    For example, library metadata includes information such as:
    <ul>
        <li>Most elements of the header block (superblock), 
            which sets up the file, sets up the initial structures, 
            and identifies the file as a valid HDF5 file
        <li>Object headers, which set up objects in an HDF5 file
        <li>B-trees that describe the location of and provide access 
            to groups and members of groups 
    </ul>
    <p>
    HDF5 natively interprets and understands library metadata.  
    Library metadata is always present; even an otherwise-empty file must 
    contain a superblock and a root group object header to be a valid 
    HDF5 file. 


<h2>Static and Dynamic User Metadata</h2>
    User metadata is defined and provided by the user application.
    <p>
    HDF5 does not always natively understand user metadata; much of it 
    must be understood and interpreted by the application.  
    For example, the only thing the library understands in the 
    dynamic user metadata list below is the extent of the dataset 
    in the last bullet.  
    <p>
    User metadata is technically optional but is almost universally used.


<h3>Static User Metadata</h3>
    Static user metadata is information that the user can control 
    but that is not generally dynamic.  
    It is stored in the file superblock or an object header and 
    does not usually change through the life of a file or object.  
    <p>
    Examples of static user metadata include:
    <ul>
        <li>Property lists: For example, <code>H5Pset_fapl_family</code>
            sets a file access property specifying that file I/O will 
            use the family driver. 
        <li>Link names
        <li>A dataset&rsquo;s datatype and dataspace 
            (modulo the potential to extend or shrink it)
        <li>Dataset fill values
        <li>Dataset or group storage properties
    </ul>
    <p>
    Static user metadata does not usually change through the 
    life of a file or object.  
    In some cases, it can change but just doesn&rsquo;t tend to  to do so; 
    for example, the name of a hard link to an object can be changed 
    only by creating a new hard link and removing the old link. 
    In the more general case, static user metadata can be changed 
    only when making a new copy of an HDF5 file or object.  
    For example, file creation and dataset creation properties can be 
    changed only when making a new copy of a file or dataset, respectively.


<h3>Dynamic User Metadata</h3>
    Dynamic user metadata is metadata that the user or application 
    can change at will.  
    It is often stored in an HDF5 attribute, 
    may describe virtually anything, 
    and can easily change over time.  
    <p>
    The following are instances of dynamic user metadata: 
    <ul>
        <li>Minimum and maximum valid values in a dataset
        <li>Conditions under which data was collected
        <li>Data history and/or provenance
        <li>Relationships among datasets 
        <li>Scales or other interpretive information
        <li>The extent of a chunked dataset within the bounds of its maximum extent
    </ul>


<h2>Metadata Types and Mechanisms</h2>
    Table 1 lists several examples of each type of HDF5 metadata, 
    where it is stored, how it is set, and whether it is natively interpreted 
    by the HDF5 Library or must be interpreted by the user application.  
    This is a representative subset, not a complete list of HDF5 metadata.
    <p>
    <table width="100%" cellpadding="0">
      <tr valign="top>
        <td colspan="4" align="left" valign="bottom">
          <b>Table 1. Examples of HDF5 metadata by type</b>
          <hr color="green" size="3"/>
          </td>
        </tr>
      <tr valign="top" align="left">
        <th width="20%">Element</th>
        <th width="30%">Where stored</th>
        <th width="30%">How set</th>
        <th width="20%">Interpreted&nbsp;by</th>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="3"/>
          </td>
        </tr>
      <tr valign="top">
        <td colspan="4"><b>Library metadata</b></td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>Superblock</td>
        <td>Header block at beginning of file</td>
        <td>Created with file; always present</td>
        <td>HDF5 Library</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>File driver information</td>
        <td>Superblock and driver information block</td>
        <td><code>H5Pset_fapl_*</code></td>
        <td>HDF5 Library</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>B-trees</td>
        <td>At various locations within file</td>
        <td>Library</td>
        <td>HDF5 Library</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>Object offsets</td>
        <td>B-tree</td>
        <td>Library</td>
        <td>HDF5 Library</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>Object headers</td>
        <td>Header block for each object in an HDF5 file</td>
        <td>Created with object; present as long as object exists</td>
        <td>HDF5 Library</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="3"/>
          </td>
        </tr>

      <tr valign="top">
        <td colspan="4"><b>Static user metadata</b></td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>Dataset storage layout</td>
        <td>Dataset object header</td>
        <td><code>H5Pset_layout</code></td>
        <td>HDF5 Library</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>

      <tr valign="top" align="left">
        <td>Shared object header messages</td>
        <td>Superblock and global heap</td>
        <td><code>H5Pset_shared_mesg_*&nbsp;&nbsp;</code></td>
        <td>HDF5 Library</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>

      <tr valign="top" align="left">
        <td>Link names and hierarchical structure</td>
        <td>Group symbol table entries</td>
        <td>H5G, H5L interfaces</td>
        <td>HDF5 Library</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>Permanent property lists</td>
        <td>Dataset object header, data layout message,</td>
        <td>H5P interface</td>
        <td>HDF5 Library</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>Transient property lists</td>
        <td>Not stored</td>
        <td>H5P interface</td>
        <td>HDF5 Library</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>Checksum</td>
        <td>Dataset object header plus a checksum value accompanying 
            each compressed dataset chunk</td>
        <td><code>H5Pset_fletcher32</code></td>
        <td>HDF5 Library and application</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>Datatype</td>
        <td>Dataset object header</td>
        <td>H5T interface</td>
        <td>HDF5 Library</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>Dataspace 
            <!--
            <br /><font size="-2">
            (contiguous dimensions or chunked maximum dimensions)
            </font>
            -->
            </td>
        <td>Dataset object header</td>
        <td>H5S interface </td>
        <td>HDF5 Library</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <font size="-2">
          (contiguous dimensions or chunked maximum dimensions)
          </font>
          <hr color="green" size="3"/>
          </td>
        </tr>

      <tr valign="top">
        <td colspan="4"><b>Dynamic user metadata</b></td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>Min/max dataset values </td>
        <td>Attribute(s)</td>
        <td>H5A interface</td>
        <td>Application</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>Data collection conditions</td>
        <td>Attribute(s)</td>
        <td>H5A interface</td>
        <td>Application</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>Data provenance</td>
        <td>Attribute(s)</td>
        <td>H5A interface</td>
        <td>Application</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>Object relationships 
            <br>
            <font size="-2">
            (other&nbsp;than&nbsp;hierarchical&nbsp;structure)
            </font>
        <td>Attributes</td>
        <td>H5A interface</td>
        <td>Application</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>Measurement scales</td>
        <td>Attribute(s)</td>
        <td>H5A interface</td>
        <td>Application</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="1"/>
          </td>
        </tr>
         
      <tr valign="top" align="left">
        <td>Dataspace 
            <br /><font size="-2">
            (current chunked dimensions)
            </font></td>
        <td>Dataset object header</td>
        <td><code>H5Dset_extent</code></td>
        <td>HDF5 Library and application</td>
        </tr>
      <tr valign="top">
        <td colspan="4">
          <hr color="green" size="3"/>
          </td>
        </tr>
         
    </table>
    

<h2>Additional Information</h2>
    See the following texts for additional details, usage information, 
    and examples.

<h3>Properties</h3>
    HDF5 property lists are used for both static and dynamic user metadata.  
    Object creation property lists are static; they are stored with the 
    object and cannot be changed without rewriting that object.  
    Object access property lists are dynamic, or transient.  
    They must be defined when an object is first created and redefined 
    every time the object is opened; they are not stored.
    <p>
    Both static and dynamic user properties associated with the following 
    classes of objects are discussed in specific chapters of the
    <!-- BEGIN FOR ELECTRONIC -->
    <a href="../../UG/index.html"><cite>HDF5 User&rsquo;s Guide</cite></a>:
    <!-- END FOR ELECTRONIC -->
    <!-- BEGIN FOR PRINT --
    <cite>HDF5 User&rsquo;s Guide</cite>
    (<code>http://www.hdfgroup.org/HDF5/doc/UG/index.html</code>):
    <!-- END FOR PRINT -->
    <div align=left>
    <table>
      <tr valign="top" align="left">
        <td><code>&nbsp;&nbsp;&nbsp;&nbsp;</code></td>
        <td><u>Object</u></td>
        <td><u>Chapter</u></td>
        </tr>
      <tr valign="top" align="left">
        <td>&nbsp;</td>
        <td>File properties</td>
        
        <td>&ldquo;<a href="../../UG/UG_frame08TheFile.html">The HDF5 File</a>&rdquo;</td>
        </tr>
      <tr valign="top" align="left">
        <td>&nbsp;</td>
        <td>Group properties</td>
        <td>&ldquo;<a href="../../UG/UG_frame09Groups.html">HDF5 Groups</a>&rdquo;</td>
        </tr>
      <tr valign="top" align="left">
        <td>&nbsp;</td>
        <td>Dataset properties<code>&nbsp;&nbsp;</code></td>
        <td>&ldquo;<a href="../../UG/UG_frame10Datasets.html">HDF5 Datasets</a>&rdquo;</td>
        </tr>
    </table>
    </div>

    <p>
    The &ldquo;<a href="../../RM/RM_H5P.html">H5P: 
    Property List Interface</a>&rdquo; section in the 
    <a href="../../RM/RM_H5Front.html"><cite>HDF5 Reference Manual</cite></a> 
    <!-- BEGIN FOR PRINT --
    (<code>http://www.hdfgroup.org/HDF5/doc/RM/RM_H5Front.html</code>):
    <!-- END FOR PRINT -->
    lists and describes the usage details for all of the interfaces used 
    to manage the above types of properties and several additional types.

<h3>Attributes</h3>
    HDF5 attributes, which offer nearly infinite flexibility for 
    dynamic user metadata, are discussed in:
    <ul>
        <li>The &ldquo;<a href="../../UG/UG_frame13Attributes.html">HDF5 
            Attributes</a>&rdquo; chapter of the 
            <a href="../../UG/UG_front.html"><cite>HDF5 User&rsquo;s 
            Guide</cite></a>
        <li>The &ldquo;<a href="../../RM/RM_H5A.html">H5A: Attribute 
            Interface</a>&rdquo; section in the 
            <a href="../../RM/RM_H5Front.html"><cite>HDF5 
            Reference Manual</cite></a>. 
    </ul>

<h3>Library Metadata</h3>
    Aside from the hierarchical structure of a file, library metadata is 
    generally opaque to the user.  
    <p>
    If a file&rsquo;s structure is unknown, it can be determined through 
    functions described in the 
    &ldquo;<a href="../../RM/RM_H5L.html">H5L: Link Interface</a>,&rdquo; 
    &ldquo;<a href="../../RM/RM_H5O.html">H5O: Object Interface</a>,&rdquo; and 
    &ldquo;<a href="../../RM/RM_H5G.html">H5G: Group Interface</a>&rdquo; 
    sections of the
    <a href="../../RM/RM_H5Front.html"><cite>HDF5 Reference Manual</cite></a>. 

<h3>Managing Metadata</h3>
<h4>Metadata Cache</h4>
    Significant performance gains can be achieved in certain circumstances 
    by directly managing metadata I/O.  This occurs most frequently in a 
    high-performance computing (HPC) environment or when working with 
    large data and complex access patterns.  
    Managing the metadata cache can be a complex undertaking and 
    should not be undertaken without careful study.  
    <p>
    These issues are discussed in detail in 
    &ldquo;<a href="../../Advanced/MetadataCache/index.html">Metadata 
    Caching in HDF5</a>,&rdquo; a document in the collection 
    <a href="../../Advanced.html"><cite>Advanced Topics in HDF5</cite></a>.
    <p>
    The HDF5 functions used to manage metadata caching are described in the 
    &ldquo;<a href="../../RM/RM_H5F.html">H5F: File Interface</a>&rdquo; and 
    &ldquo;<a href="../../RM/RM_H5P.html">H5P: Property List Interface</a>&rdquo; 
    sections of the 
    <a href="../../RM/RM_H5Front.html"><cite>HDF5 Reference Manual</cite></a>. 
    Look for functions with names containing the string <code>'_mdc'</code>.

<h4>Metadata Journaling</h4>
    Some HDF5 applications can run for a very long time, 
    sometimes for several days or even weeks. 
    In such cases, an unexpected failure can cause the loss of 
    all computed results that have not yet been written to storage.  
    HDF5 provides the ability to periodically flush raw data to storage 
    to guard against complete loss, but preserving metadata in the case 
    of such a failure has been more problematic. 
    HDF5 will introduce metadata journaling in HDF5 Release 1.10 
    to address this issue, making it possible to reconstruct metadata 
    in the event of such an event.
    <p>
    In release 1.10, metadata journaling functions will be described in 
    the <cite>HDF5 Reference Manual</cite> 
    and a detailed discussion of their use is expected to be included 
    in the collection 
    <cite>Advanced Topics in HDF5</cite>.


<!-- THIS INFORMATION [AND MUCH MORE] IS ALREADY IN "ADDITIONAL INFORMATION"  -->
<!-- IMMEDIATELY PRECEDING
<h2>Additional Resources</h2>
    <ul>
        <li><a href="../../H5.format.html"><cite>HDF5 
            File Format Specification</cite></a>
        <li><a href="../../UG/index.html"><cite>HDF5 
            User&rsquo;s Guide</cite></a>
        <li><a href="../../RM/RM_H5Front.html"><cite>HDF5 
            Reference Manual</cite></a>
        <li>&ldquo;<a href="../../Advanced/MetadataCache/index.html">Metadata 
            Caching in HDF5</a>&rdquo; 
    </ul>
-->

<!--
---------1---------2---------3---------4---------5---------6---------7---------8
-->



<hr /><br />
<p>
Return to &ldquo;<a href="../../Advanced.html">Advanced Topics</a>.&rdquo;</p>
<br />


<hr>
<!-- #BeginLibraryItem "/ed_libs/Footer-THGonly.lbi" -->
<address>
<table width="100%" border="0">
  <tr valign="top">
      <td align="left">
          <address>
          The HDF Group Help Desk: <img src="../../Graphics/help.png" align=top height=16>
          <br>
          Describes HDF5 Development Trunk, Release 1.9.x.
          <br>
          Highest current public release is HDF5 Release 1.8.x.
          </address>
      </td><td width="5%">&nbsp;</td>
      <td align="right">
          <a href="../../Copyright.html">Copyright</a> by
          <a href="http://www.hdfgroup.org">The HDF Group</a>
      </td>   
  </tr>   
</table>
</address>
<!-- #EndLibraryItem --><html><SCRIPT LANGUAGE="JAVASCRIPT">
<!--
document.writeln("Last modified: 20 July 2011");
-->
</SCRIPT>
 
</body>
</html>
