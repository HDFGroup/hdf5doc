<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">
<html>
<head>

<title>HDF5 User&rsquo;s Guide: Attributes</title>

<!--(Meta)==========================================================-->


<!--(Links)=========================================================-->

<link href="ed_styles/NewUGelect.css" rel="stylesheet" type="text/css">

<!--( Begin styles definition )=====================================-->
<!--     Replaced with external stylesheet 'styles_NewUG.css'.      -->
<!--( End styles definition )=======================================-->

</head>

<body>

<!-- #BeginLibraryItem "/ed_libs/Copyright.lbi" -->
<!--
  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
  * Copyright by The HDF Group.                                               *
  * Copyright by the Board of Trustees of the University of Illinois.         *
  * All rights reserved.                                                      *
  *                                                                           *
  * This file is part of HDF5.  The full HDF5 copyright notice, including     *
  * terms governing use, modification, and redistribution, is contained in    *
  * the files COPYING and Copyright.html.  COPYING can be found at the root   *
  * of the source code distribution tree; Copyright.html can be found at the  *
  * root level of an installed copy of the electronic HDF5 document set and   *
  * is linked from the top-level documents page.  It can also be found at     *
  * http://hdfgroup.org/HDF5/doc/Copyright.html.  If you do not have          *
  * access to either file, you may request a copy from help@hdfgroup.org.     *
  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 -->
<!-- #EndLibraryItem --><!-- HEADER LEFT "HDF5 User's Guide" -->
<!-- HEADER RIGHT "HDF5 Attributes" -->

<!--( TOC )=========================================================-->
<SCRIPT language="JavaScript">
<!--
document.writeln ('\
<table x-use-null-cells\
                align="right"\
		width=240\
		cellspacing=0\
		class="tocTable">\
  <tr valign="top"> \
    <td class="tocTableHeaderCell" colspan="2"> \
        <span class="TableHead">Chapter Contents</span></td>\
  </tr>\
-->
<!-- Table Version 3 -->\
<!--
  <tr valign="top"> \
    <td class="tocTableContentCell2"> \
      <a href="#Intro">1.</a></td>\
    <td class="tocTableContentCell3">\
	  <a href="#Intro">Introduction</a></td> \
  </tr>\
  <tr valign="top"> \
    <td class="tocTableContentCell2"> \
      <a href="#Model">2.</a></td>\
    <td class="tocTableContentCell3">\
	  <a href="#Model">Programming Model</a></td>\
  </tr>\
  <tr valign="top"> \
    <td class="tocTableContentCell2"> \
      <a href="#Functions">3.</a></td>\
    <td class="tocTableContentCell3">\
	  <a href="#Functions">Attribute (H5A) Function Summaries</a></td> \
  </tr>\
  <tr valign="top"> \
    <td class="tocTableContentCell2"> \
      <a href="#Working1">4.</a></td>\
    <td class="tocTableContentCell3">\
	  <a href="#Working1">Working with Attributes</a><br>\
	    Attribute structure<br> \
		Create, write, read<br> \
		Access by name or index<br> \
		Obtain information<br> \
		Iterate, delete, close \
	  </td>\
  </tr>\
\
  <tr valign="top"> \
    <td class="tocTableContentCell"> \
-->
<!-- editingComment -- "tocTableContentCell" and "tocTableContentCell4" \
-->\
<!-- are the table-closing cell class.\
    <td class="tocTableContentCell2"> \
-->\
<!--
      <a href="#SpecIssues">5.</a></td>\
    <td class="tocTableContentCell4">\
	  <a href="#SpecIssues">Special Issues</a><br>\
	    Large attributes<br>\
		Attribute names<br>\
		No partial I/O\
  </td></tr>\
</table>\
')
-->
</SCRIPT>
<!--(End TOC)=======================================================-->


<!-- editingComment
  <span class="editingComment">[ [ [
  ] ] ]</span>
-->

<!-- editingComment
-->

<div align="center">
<a name="TOP">
<h2>Chapter 8<br><font size="7">HDF5 Attributes</font></h2>
</a>
</div>


<a name="Intro">
<h3>1. Introduction</h3>
</a>

<p>An HDF5 <span class="termdefinition">attribute</span> is 
 a small metadata object describing the nature and/or 
 intended usage of a 
 <span class="termdefinition">primary data object</span>.
 A primary data object may be a dataset, group, or named datatype.
</p>
 
<p>Attributes are assumed to be very small as data objects go, so 
 storing them as standard HDF5 datasets would be quite inefficient.
 HDF5 attributes are therefore managed through a special 
 attributes interface, H5A, which is designed to easily 
 attach attributes to primary data objects as 
 small datasets containing metadata information and 
 to minimize storage requirements.</p>

<p>Consider, as examples of the simplest case, a set of 
 laboratory readings taken under known temperature and 
 pressure conditions of 18.0 degrees celsius and 
 0.5 atmospheres, respectively.  
 The temperature and pressure could be stored as attributes of the 
 dataset could be described as the following name/value pairs:</p>
<pre>
   temp=18.0
   pressure=0.5</pre>

<p>While HDF5 attributes are not standard HDF5 datasets, 
 they have much in common:</p>
<ul>
    <li>An attribute has a user-defined dataspace and 
        the included metadata has a user-assigned datatype</li>
    <li>Metadata can be of any valid HDF5 datatype</li>
    <li>Attributes are addressed by name</li>
</ul>


<!-- FOR USE WITH PRINT VERSION --------------------------------------
<table x-use-null-cells
		style="x-cell-content-align: top;
				border-spacing: 0px;
			border-left-width: 20px;
			border-left-style: Solid;
			border-left-color: #FFFFFF;
			border-bottom-width: 20px;
			border-bottom-style: Solid;
			border-bottom-color: #FFFFFF;
				float: aligncenter;
				left: 56px;
				top: 615px;
				width: 220;"
                align=left
		width=220
		cellspacing=0>

<tr valign="top">
<td style="border-top-style: Solid;
			border-top-color: #008000;
			border-top-width: 3px;
			border-right-width: 1px;
			border-left-width: 6px;
			border-left-style: Solid;
			border-left-color: #008000;
			border-bottom-style: Solid;
			border-bottom-width: 1px;
			border-bottom-color: #008000;
			padding-right: 10px;
			padding-left: 10px;">
<span class="TableHead">Note:</span></td></tr>

<tr valign="top">
<td style="border-bottom-width: 3px;
			border-bottom-color: #008000;
			border-bottom-style: Solid;
			border-left-width: 1px;
			border-left-color: #008000;
			border-left-style: Solid;
			padding-right: 10px;
			padding-left: 10px;">

Attributes are small datasets but not separate objects;
they are contained within the object header of a primary data object.  
As such, attributes are opened, read, or written only with H5A functions.

</td></tr>
</table>
<!-- FOR USE WITH PRINT VERSION -------------------------------------->
<!--(End Comment Box)===============================================-->

<!-- FOR USE WITH PRINT VERSION --------------------------------------
 <br>
<!-- FOR USE WITH PRINT VERSION -------------------------------------->

<p>But there are some very important differences:</p>
 <ul>
    <li>There is no provision for special storage 
        such as compression or chunking</li>
    <li>There is no partial I/O or sub-setting capability for attribute 
    data</li>
    <li>Attributes cannot be shared</li>
    <li>Being small, an attribute is stored in the object header 
        of the object it describes and is thus attached directly to 
        that object</li>
 </ul>

 <span class="termemphasis">Large attributes</span>,
 described below in &ldquo;<a href="#SpecIssues">Special Issues</a>&rdquo;, 
 are best stored as separate HDF5 datasets and are not subject to the above 
 limitations.

<!-- NEW PAGE -->
<p>This chapter discusses or lists the following:</p>

<ul>
	<li>The HDF5 attributes programming model</li>
	<li>H5A function summaries</li>
	<li>Working with HDF5 attributes</li>
        <ul>
	<li>The structure of an attribute</li>
	<li>Creating, writing, and reading attributes</li>
	<li>Accessing attributes by name or index</li>
	<li>Obtaining information regarding 
	    an object&rsquo;s attributes </li>
	<li>Iterating across an object&rsquo;s attributes </li>
	<li>Deleting an attribute </li>
	<li>Closing attributes </li>
        </ul>
	<li>Special issues regarding attributes</li>
</ul>


<p>In the following discussions, attributes are generally 
 attached to datasets.  Attributes attached to other 
 primary data objects, i.e., groups or named datatypes, 
 are handled in exactly the same manner.</p>

<!--( Comment box )=================================================-->
<!-- FOR USE WITH ELECTRONIC VERSION ---------------------------------->
<!-- 
<table x-use-null-cells
		style="x-cell-content-align: top;
				border-spacing: 0px;
			border-left-width: 20px;
			border-left-style: Solid;
			border-left-color: #FFFFFF;
			border-bottom-width: 20px;
			border-bottom-style: Solid;
			border-bottom-color: #FFFFFF;
				float: aligncenter;
				left: 56px;
				top: 615px;
				width: 220;"
                align="left"
		width="220"
		cellspacing="0">

<tr valign="top">
<td style="border-top-style: Solid;
			border-top-color: #008000;
			border-top-width: 3px;
			border-right-width: 1px;
			border-left-width: 6px;
			border-left-style: Solid;
			border-left-color: #008000;
			border-bottom-style: Solid;
			border-bottom-width: 1px;
			border-bottom-color: #008000;
			padding-right: 10px;
			padding-left: 10px;">
<span class="TableHead">Note</span></td></tr>

<tr valign="top">
<td style="border-bottom-width: 3px;
			border-bottom-color: #008000;
			border-bottom-style: Solid;
			border-left-width: 1px;
			border-left-color: #008000;
			border-left-style: Solid;
			padding-right: 10px;
			padding-left: 10px;">

Attributes are small datasets but not separate objects;
they are contained within the object header of a primary data object.  
As such, attributes are opened, read, or written only with H5A functions.

</td></tr>
</table>
-->
<!---- FOR USE WITH ELECTRONIC VERSION --------------------------------->



<!--(Flags Table)===================================================-->
<!--
<div align="center">
<table x-use-null-cells
		style="x-cell-content-align: top;
				border-spacing: 0px;
				left: 0px;
				top: 330px;
				height: 150px;
				float: aligncenter;
				width: 600px;"
		width=600
		height=145
		cellspacing=0>
<col style="width: 23.025%;">
<col style="width: 76.975%;">

<tr valign="top">
<td style="border-left-width: 1px;
			border-top-style: Solid;
			border-top-color: #008000;
			border-top-width: 3px;
			border-right-width: 1px;
			border-bottom-style: Solid;
			border-bottom-width: 1px;
			border-bottom-color: #008000;
			padding-right: 10px;
			padding-left: 10px;"
	width=23.025%>
<p><span class="TableHead">Column 1</span></td>
<td style="border-top-style: Solid;
			border-top-color: #008000;
			border-top-width: 3px;
			border-right-width: 1px;
			border-bottom-style: Solid;
			border-bottom-width: 1px;
			border-bottom-color: #008000;
			padding-right: 10px;
			padding-left: 10px;"
	width=76.975%>
<p><span class="TableHead">Column 2 of &lsquo;flags&rsquo; table</span></td></tr>

<tr valign="top">
<td style="padding-right: 10px; padding-left: 10px;"
	width=23.025%>
<p>Text</td>
<td style="padding-right: 10px; padding-left: 10px;"
	width=76.975%>
<p>Text</td>
</tr>

<tr valign="top">
<td style="border-bottom-width: 3px;
			border-bottom-color: #008000;
			border-bottom-style: Solid;
			padding-right: 10px;
			padding-left: 10px;"
	width=23.025%>
<p>Text</td>
<td style="border-bottom-width: 3px;
			border-bottom-color: #008000;
			border-bottom-style: Solid;
			padding-right: 10px;
			padding-left: 10px;"
	width=76.975%>
<p>Text</td>
</tr>
</table>
</div>
-->
<!--
<p class="runninghead">Purpose</p>

<p class="runninghead">Relationship to other objects</p>
-->

<a name="Model">
<p>&nbsp;</p><!-- NEW PAGE -->
<h3 class="pagebefore">2. Programming Model</h3>
</a>
<p>The figure below shows the UML model for an HDF5 attribute 
    and its associated dataspace and datatype.</p>

<!--( UML Model Box )===============================================-->
<!-- FOR USE WITH ELECTRONIC VERSION ---------------------------------->
<!-- 
		width=600
		cellspacing=0
-->
<table x-use-null-cells
                class="fullImgTable"
		align="center">
<!-- <table align="right" class="greenframe1" width="270"> -->
<!--   <tr><td height="310" valign="center" align="center" class="greenline1"> -->
<tr valign="top"> 
    <td class="fullImgTableImgCell" align="center">
        <img src="Images/UML_Attribute.jpg" 
        alt="Image of UML model for an HDF5 attribute and its 
        associated dataspace and datatype"></td></tr>
    <tr><td align="left" class="fullImgTableCapCell">
    <span class="figureNumber">Figure 1. The UML model for an HDF5 attribute
    </span>
    <!-- formerly Figure 2:--></td>
    </tr>
</table>
<br />
<!-- FOR USE WITH ELECTRONIC VERSION --------------------------------->
<!--( End UML Model )===============================================-->

<h4>2.1. To Create and Write a New Attribute</h4>

<!--( UML Model Box )===============================================-->
<!-- FOR USE WITH PRINT VERSION --------------------------------------
<table align="center" class="greenframe1" width=250>
    <tr><td height=250 valign="center" align="center" class="greenline1">
        <img src="Images/UML_Attribute.jpg" 
        alt="Image of UML model for an HDF5 attribute and its 
        associated dataspace and datatype"></td></tr>
    <tr><td class="figurecaption" align="left">
        <font class="figurenumber">Figure 1. The UML model for an HDF5 attribute</font>
        </tr></td>
</table>
<!-- FOR USE WITH PRINT VERSION -------------------------------------->
<!--( End UML Model )===============================================-->

<p>Creating an attribute is similar to creating a dataset. 
 To create an attribute, the application must specify the object 
 to which the attribute is attached, the datatype and dataspace 
 of the attribute data, and the attribute creation property list. 
</p>

<p>The following steps are required to create and write 
 an HDF5 attribute:</p>
<ol>
     <li>Obtain the object identifier for the attribute&rsquo;s primary 
         data object</li>
     <li>Define the characteristics of the attribute and specify the 
         attribute creation property list</li>
         <ul>
         <li>Define the datatype</li>
         <li>Define the dataspace</li>
         <li>Specify the attribute creation property list</li>
         </ul>
     <li>Create the attribute</li>
     <li>Write the attribute data (optional)</li>
     <li>Close the attribute (and datatype, dataspace, and 
         attribute creation property list, if necessary)</li>
     <li>Close the primary data object (if appropriate)</li>
</ol>

<!-- NEW PAGE -->
<h4>2.2. To Open and Read or Write an Existing Attribute</h4>

<p>The following steps are required to open and read/write
 an existing attribute.  Since HDF5 attributes allow no partial I/O,
 you need specify only the attribute and the attribute&rsquo;s memory datatype 
 to read it:</p>
<ol>
     <li>Obtain the object identifier for the attribute&rsquo;s primary 
         data object</li>
     <li>Obtain the attribute&rsquo;s name or index</li>
     <li>Open the attribute</li>
         <ul>
         <li>Get attribute dataspace and datatype (optional)</li>
         </ul>
     <li>Specify the attribute&rsquo;s memory type</li>
     <li>Read and/or write the attribute data</li>
     <li>Close the attribute</li>
     <li>Close the primary data object (if appropriate)</li>
</ol>


<!--
<p>The programming model for element 1 
 can be summarized as follows:</p>

<ul>
	<li class=BulletCompact>Step 1 (optional).
	<li class=BulletCompact>Step 2.
	<li class=BulletCompact>Step 3.
</ul>

<p>
 First consider the simple case, text text, 
 followed by program line:

<dir><pre>
return_var = H5Xfunction (param1, 
&nbsp;&nbsp;&nbsp;&nbsp;param2, param3,
&nbsp;&nbsp;&nbsp;&nbsp;param4)
</dir></pre>

 Text text text.  

<p>Now consider the more generalized case, text text text.

<dir><pre>
return_var = H5Xfunction (param1, param2, param3)
   &lt;...<em>text text text</em>...&gt;
return_var = H5Xfunction (param1, param2, param3)
   &lt;...<em>text text text</em>...&gt;
return_var = H5Xfunction (param1, param2, param3)
</pre></dir>

<p>Notes: 
 Text, text text.

<div class=pagenever>

<h4>2.2 Programming model element 2</h4>

-->


<!--
<a name="h5dump">
<p>&nbsp;</p>
<h3 class="pagebefore">3 Using <code>h5dump</code></h3>
</a>
<dir>

</dir>
-->

<a name="Functions">
<p>&nbsp;</p><!-- NEW PAGE -->
<h3 class="pagebefore">3. Attribute (H5A) Function Summaries</h3>
</a>
<p>Functions that can be used with attributes (H5A functions) and functions 
that can be used with property lists (H5P functions) are listed below.</p>
<br>

<table x-use-null-cells
		class="functTable"
		width="600"
		cellspacing="0"
	        align="center">
<tr valign="bottom">
    <td colspan="2" align="left" valign="bottom"><b>Function Listing 1. 
    Attribute functions (H5A)</b></td>
    </tr>
<tr valign="top"> 
    <td class="functTableLeftHdr">
    <span class="TableHead">C Function<br>F90 Function</span>
    </td>
    <td class="functTableRightHdr">
    <span class="TableHead">Purpose</span>
    </td>
    </tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Acreate</code>
    <br>
    <code>h5acreate_f</code></td>
    <td class="functTableCell">
    Creates a dataset as an attribute of another group, dataset, 
    or named datatype. 
    The C function is a macro: see <a href="../RM/APICompatMacros.html">
    &ldquo;API Compatibility Macros in HDF5.&rdquo;</a>
    </td></tr>

<tr valign="top">
    <td class="functTableCell">
    <code>H5Acreate_by_name</code>
    <br>
    <code>h5acreate_by_name_f</code></td>
    <td class="functTableCell">
    Creates an attribute attached to a specified object. 
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aexists</code>
    <br>
    <code>h5aexists_f</code></td>
    <td class="functTableCell">
    Determines whether an attribute with a given name exists on an object. 
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aexists_by_name</code>
    <br>
    <code>h5aexists_by_name_f</code></td>
    <td class="functTableCell">
    Determines whether an attribute with a given name exists on an object. 
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aclose</code>
    <br>
    <code>h5aclose_f</code></td>
    <td class="functTableCell">
    Closes the specified attribute.
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Adelete</code>
    <br>
    <code>h5adelete_f</code></td>
    <td class="functTableCell">
    Deletes an attribute.
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Adelete_by_idx</code>
    <br>
    <code>h5adelete_by_idx_f</code></td>
    <td class="functTableCell">
    Deletes an attribute from an object according to index order. 
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Adelete_by_name</code>
    <br>
    <code>h5adelete_by_name_f</code></td>
    <td class="functTableCell">
    Removes an attribute from a specified location. 
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aget_create_plist</code>
    <br>
    <code>h5aget_create_plist_f</code></td>
    <td class="functTableCell">
    Gets an attribute creation property list identifier. 
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aget_info</code>
    <br>
    <code>h5aget_info_f</code></td>
    <td class="functTableCell">
    Retrieves attribute information by attribute identifier. 
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aget_info_by_idx</code>
    <br>
    <code>h5aget_info_by_idx_f</code></td>
    <td class="functTableCell">
    Retrieves attribute information by attribute index position. 
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aget_info_by_name</code>
    <br>
    <code>h5aget_info_by_name_f</code></td>
    <td class="functTableCell">
    Retrieves attribute information by attribute name. 
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aget_name</code>
    <br>
    <code>h5aget_name_f</code></td>
    <td class="functTableCell">
    Gets an attribute name.
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aget_name_by_idx</code>
    <br>
    <code>h5aget_name_by_idx_f</code></td>
    <td class="functTableCell">
    Gets an attribute name by attribute index position.
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aget_space</code>
    <br>
    <code>h5aget_space_f</code></td>
    <td class="functTableCell">
    Gets a copy of the dataspace for an attribute.
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aget_storage_size</code>
    <br>
    <code>h5aget_storage_size_f</code></td>
    <td class="functTableCell">
    Returns the amount of storage required for an attribute. 
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aget_type</code>
    <br>
    <code>h5aget_type_f</code></td>
    <td class="functTableCell">
    Gets an attribute datatype.
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aiterate</code>
    <br>
    <code>(none)</code></td>
    <td class="functTableCell">
    Calls a user&rsquo;s function for each attribute 
    attached to a data object.
    The C function is a macro: see <a href="../RM/APICompatMacros.html">
    &ldquo;API Compatibility Macros in HDF5.&rdquo;</a>
    </td></tr>

<tr valign="top">
    <td class="functTableCell">
    <code>H5Aiterate_by_name</code>
    <br>
    <code>(none)</code></td>
    <td class="functTableCell">
    Calls user-defined function for each attribute on an object. 
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aopen</code>
    <br>
    <code>h5aopen_f</code></td>
    <td class="functTableCell">
    Opens an attribute for an object specified by object identifier and 
    attribute name. 
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aopen_by_idx</code>
    <br>
    <code>h5aopen_by_idx_f</code></td>
    <td class="functTableCell">
    Opens an existing attribute that is attached to an object specified by 
    location and name.
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aopen_by_name</code>
    <br>
    <code>h5aopen_by_name_f</code></td>
    <td class="functTableCell">
    Opens an attribute for an object by object name and attribute name. 
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Aread</code>
    <br>
    <code>h5aread_f</code></td>
    <td class="functTableCell">
    Reads an attribute.
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Arename</code>
    <br>
    <code>h5arename_f</code></td>
    <td class="functTableCell">
    Renames an attribute. 
    </td></tr>
<tr valign="top">
    <td class="functTableCell">
    <code>H5Arename_by_name</code>
    <br>
    <code>h5arename_by_name_f</code></td>
    <td class="functTableCell">
    Renames an attribute. 
    </td></tr>
<tr valign="top">
    <td class="functTableBottom">
    <code>H5Awrite</code>
    <br>
    <code>H5awrite_f</code></td>
    <td class="functTableBottom">
    Writes an attribute.
    </td></tr>
</table>
<br /><br />

<table x-use-null-cells 
		class="functTable"
		width=100%
		cellspacing=0
	        align="center">
  <tr valign="bottom">
    <td colspan="2" align="left" valign="bottom"><b>Function Listing 2. 
    Attribute creation property list functions (H5P)</b></td>
  </tr>
  <tr valign=top> 
    <td class="functTableLeftHdr">
        <span class=TableHead>C Function<br>F90 Function</span>
    </td>
    <td class="functTableRightHdr">
        <span class=TableHead>Purpose</span>
    </td>
  </tr>
  <tr valign=top> 
    <td class="functTableCell">
	<code>H5Pset_char_encoding<br>h5pset_char_encoding_f</code> 
    </td>
    <td class="functTableCell">
	Sets the character encoding used to encode a string. 
        Use to set ASCII or UTF-8 character encoding for object names.
    </td>
  </tr>
  <tr valign=top> 
    <td class="functTableCell">
	<code>H5Pget_char_encoding<br>h5pget_char_encoding_f</code> 
    </td>
    <td class="functTableCell">
	Retrieves the character encoding used to create a string. 
    </td>
  </tr>
  <tr valign=top> 
    <td class="functTableCell">
	<code>H5Pget_attr_creation_order<br>h5pget_attr_creation_order_f</code> 
    </td>
    <td class="functTableCell">
	Retrieves tracking and indexing settings for attribute creation order. 
    </td>
  </tr>
  <tr valign=top> 
    <td class="functTableCell">
	<code>H5Pget_attr_phase_change<br>h5pget_attr_phase_change_f</code> 
    </td>
    <td class="functTableCell">
	Retrieves attribute storage phase change thresholds. 
    </td>
  </tr>
  <tr valign=top> 
    <td class="functTableCell">
	<code>H5Pset_attr_creation_order<br>h5pget_attr_creation_order_f</code> 
    </td>
    <td class="functTableCell">
	Sets tracking and indexing of attribute creation order. 
    </td>
  </tr>
  <tr valign=top> 
    <td class="functTableBottom">
	<code>H5Pset_attr_phase_change<br>h5pset_attr_phase_change_f</code> 
    </td>
    <td class="functTableBottom">
	Sets attribute storage phase change thresholds. 
    </td>
  </tr>
  
  
  </table>
<br />

<a name="Working1">
<p>&nbsp;</p><!-- NEW PAGE -->
<h3 class="pagebefore">4. Working with Attributes</h3>
</a>


<h4>4.1. The Structure of an Attribute</h4>

<p>An attribute has two parts: name and value(s)</p>
<p>HDF5 attributes are sometimes discussed as name/value pairs 
 in the form <code>name=value</code>.</p>

<p>An attribute&rsquo;s name is a null-terminated ASCII character string.
 Each attribute attached to an object has a unique name.
</p>

<p>The value portion of the attribute contains 
 one or more data elements of the same datatype. 
</p>

<p>HDF5 attributes have all the characteristics of HDF5 datasets
 except that there is no partial I/O capability. In other words,
 attributes can be written and read only in full with no sub-setting.
</p>


<h4>4.2. Creating, Writing, and Reading Attributes</h4>

<p>If attributes are used in an HDF5 file, 
 these functions will be employed: <code>H5Acreate</code>, 
 <code>H5Awrite</code>, and <code>H5Aread</code>.
 <code>H5Acreate</code> and <code>H5Awrite</code> are used together
 to place the attribute in the file.
 If an attribute is to be used and is not currently in memory,
 <code>H5Aread</code> generally comes into play 
 usually in concert with one each of the 
 <code>H5Aget_*</code> and <code>H5Aopen_*</code> functions.
</p>

<dl>
 <dt><span class="RunningHead">To create an attribute</span>, 
     call <code>H5Acreate</code>:

 <dd>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <code>hid_t H5Acreate (hid_t <em>loc_id</em>, 
          const char *<em>name</em>, 
          <br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          hid_t <em>type_id</em>, 
          hid_t <em>space_id</em>, 
          hid_t <em>create_plist</em>,
          <br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          hid_t <em>access_plist</em>)</code>
</dl>
 
<p><code>loc_id</code> identifies the object (dataset, group, or named 
datatype) to which the attribute is to be attached. 
 
 <code>name</code>, 
 <code>type_id</code>,
 <code>space_id</code>, and 
 <code>create_plist</code>
 convey, respectively, the attribute&rsquo;s name, datatype, dataspace, 
 and attribute creation property list.
 The attribute&rsquo;s name must be locally unique: 
 it must be unique within the context of the object 
 to which it is attached.</p>

<p><code>H5Acreate</code> creates the attribute in memory. 
 The attribute does not exist in the file until <code>H5Awrite</code> 
 writes it there.
</p>

<dl>
 <dt><span class="RunningHead">To write or read an attribute</span>, 
     call <code>H5Awrite</code> or <code>H5Aread</code>, respectively:

 <dd>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <code>herr_t H5Awrite (hid_t <em>attr_id</em>, 
          hid_t <em>mem_type_id</em>, 
          <br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          const void *<em>buf</em>)</code>

 <dd>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <code>herr_t H5Aread (hid_t <em>attr_id</em>, 
          hid_t <em>mem_type_id</em>, 
          <br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          void *<em>buf</em>)</code>
</dl>

<p><code>attr_id</code> identifies the attribute while
 <code>mem_type_id</code> identifies the in-memory datatype 
 of the attribute data.
</p>

<p><code>H5Awrite</code> writes the attribute data 
 from the buffer <code>buf</code> to the file. 
 <code>H5Aread</code> reads attribute data from the file into
 <code>buf</code>.
</p>

<p>The HDF5 Library converts the metadata between the 
 in-memory datatype, <code>mem_type_id</code>, and 
 the in-file datatype, defined when the attribute was created,
 without user intervention.</p>

 

<h4>4.3. Accessing Attributes by Name or Index</h4>

<p>Attributes can be accessed by name or index value. 
 The use of an index value makes it possible to iterate 
 through all of the attributes associated with a given object. </p>

<p><span class="RunningHead">To access an attribute by its name</span>, 
use the <code>H5Aopen_by_name</code> function. <code>H5Aopen_by_name</code> 
returns an attribute identifier that can then be used by any function that 
must access an attribute such as <code>H5Aread</code>.
Use the function <code>H5Aget_name</code> to determine an attribute&rsquo;s name.
</p>

<p><span class="RunningHead">To access an attribute by its index value
</span>, use the <code>H5Aopen_by_idx</code> function. To determine an 
attribute index value when it is not already known, 
use the <code>H5Oget_info</code>function. <code>H5Aopen_by_idx</code> is 
generally used in the course of opening several attributes for later access. 
Use <code>H5Aiterate</code> if the intent is to 
perform the same operation on every attribute attached to an object.
</p>


<h4>4.4. Obtaining Information Regarding an Object&rsquo;s Attributes</h4>

<p>In the course of working with HDF5 attributes, one may need to 
 obtain any of several pieces of information:</p>
<ul>
	<li>An attribute name</li>
	<li>The dataspace of an attribute </li>
	<li>The datatype of an attribute </li>
	<li>The number of attributes attached to an object</li>
</ul>

<span class="RunningHead">To obtain an attribute&rsquo;s name</span>, 
     call <code>H5Aget_name</code> with an attribute identifier, 
     <code>attr_id</code>:

 <pre>
        <code>ssize_t H5Aget_name (hid_t attr_id, size_t buf_size, 
            char *buf)</code>
</pre>

<p>As with other attribute functions, <code>attr_id</code> 
 identifies the attribute; <code>buf_size</code> defines the size of the 
 buffer; and <code>buf</code> is the buffer to which the attribute&rsquo;s name 
 will be read. 
</p>

<p>If the length of the attribute name, and hence the value required for 
 <code>buf_size</code>, is unknown, a first call to 
 <code>H5Aget_name</code> will return that size.  If the value of
 <code>buf_size</code> used in that first call is too small,
 the name will simply be truncated in <code>buf</code>.
 A second <code>H5Aget_name</code> call can then be used to retrieve the 
 name in an appropriately-sized buffer.
</p>

<!-- NEW PAGE -->

<span class="RunningHead">To determine the dataspace or datatype 
     of an attribute</span>, call <code>H5Aget_space</code> or 
     <code>H5Aget_type</code>, respectively:

<pre>
        <code>hid_t H5Aget_space (hid_t <em>attr_id</em>)</code>

        <code>hid_t H5Aget_type (hid_t <em>attr_id</em>)</code>

</pre>
<p><code>H5Aget_space</code> returns the dataspace identifier
 for the attribute <code>attr_id</code>.
</p>

<p><code>H5Aget_type</code> returns the datatype identifier
 for the attribute <code>attr_id</code>.
</p>


<span class="RunningHead">To determine the number of attributes 
     attached to an object</span>, use the <code>H5Oget_info</code> function.
     The function signature is below. 

<pre>
        herr_t H5Oget_info( hid_t object_id, H5O_info_t *object_info  ) 
</pre>

<p>The number of attributes will be returned in the <code>object_info</code> 
buffer. This is generally the preferred first step in determining attribute 
index values. If the call returns <code>N</code>, the 
attributes attached to the object <code>object_id</code> 
have index values of <code>0</code> through <code>N</code>
<code>-1</code>.
</p>


<h4>4.5. Iterating across an Object&rsquo;s Attributes</h4>

<p>It is sometimes useful to be able to perform the identical operation
 across all of the attributes attached to an object.  
 At the simplest level, you might just want to open each attribute.
 At a higher level, you might wish to perform a rather complex operation 
 on each attribute as you iterate across the set.
</p>

<dl>
 <dt><span class="RunningHead">To iterate an operation across the 
     attributes attached to an object</span>, 
     one must make a series of calls to <code>H5Aiterate</code>:

 <dd>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <code>herr_t H5Aiterate (hid_t <em>obj_id</em>, 
          H5_index_t <em>index_type</em>, 
          <br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          H5_iter_order_t <em>order</em>, 
          hsize_t *<em>n</em>,
          H5A_operator2_t <em>op</em>, 
          <br>
          &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
          void *<em>op_data</em>)</code>

</dl>

<p><code>H5Aiterate</code> successively marches across all of the 
 attributes attached to the object specified in 
 <code>loc_id</code>, performing the operation(s) 
 specified in <code>op_func</code> with the data
 specified in <code>op_data</code> on each attribute.
</p>

<p>When <code>H5Aiterate</code> is called, 
<code>index</code> contains the index of the attribute 
to be accessed in this call. 
When <code>H5Aiterate</code> returns, <code>index</code> 
will contain the index of the next attribute. 
If the returned <code>index</code> is the null pointer, 
then all attributes have been processed, and the iterative process 
is complete. 
</p>

<p><code>op_func</code> is a user-defined operation 
 that adheres to the <code>H5A_operator_t</code> prototype.
 This prototype and certain requirements imposed on the operator&rsquo;s 
 behavior are  described in the <code>H5Aiterate</code> entry
 in the <a href="http://www.hdfgroup.org/HDF5/doc/RM/RM_H5Front.html">
 <cite>HDF5 Reference Manual</cite></a>.
</p>

<p><code>op_data</code> is also user-defined to meet
 the requirements of <code>op_func</code>.
 Beyond providing a parameter with which to pass this data, 
 HDF5 provides no tools for its management and imposes no restrictions.
</p>


<!-- editingComment
  <p class=editingcommentlt>[ [ [ Need example? ] ] ]</p>
-->

<!-- NEW PAGE -->
<h4>4.6. Deleting an Attribute</h4>

<p>Once an attribute has outlived its usefulness or 
 is no longer appropriate, it may become necessary to delete it.
</p>

<dl>
 <dt><span class="RunningHead">To delete an attribute</span>, 
     call <code>H5Adelete</code>:

 <dd>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <code>herr_t H5Adelete (hid_t <em>loc_id</em>, 
          const char *<em>name</em>)</code>
</dl>

<p><code>H5Adelete</code> removes the attribute 
 <code>name</code> from the group, dataset, or 
 named datatype specified in <code>loc_id</code>.
</p>

<p><code>H5Adelete</code> must not be called if there are 
 any open attribute identifiers on the object 
 <code>loc_id</code>.  Such a call can cause 
 the internal attribute indexes to change; future writes to 
 an open attribute would then produce unintended results.
</p>



<h4>4.7. Closing an Attribute</h4>

<p>As is the case with all HDF5 objects, once access to an attribute 
 it is no longer needed, that attribute must be closed.
 It is best practice to close it as soon as practicable;
 it is mandatory that it be closed prior to the <code>H5close</code> 
 call closing the HDF5 Library.
</p>

<dl>
 <dt><span class="RunningHead">To close an attribute</span>, 
     call <code>H5Aclose</code>:

 <dd>
    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    <code>herr_t H5Aclose (hid_t <em>attr_id</em>)</code>
</dl>

<p><code>H5Aclose</code> closes the specified attribute by terminating 
 access to its identifier, <code>attr_id</code>.
</p>

<a name="SpecIssues">
<p>&nbsp;</p><!-- NEW PAGE -->
<h3 class="pagebefore">5. Special Issues</h3>
</a>
<p>Some special issues for attributes are discussed below.</p>

<!-- FOR USE WITH PRINT VERSION --------------------------------------
<table align="center" class="greenframe1" width=350>
    <tr><td height=310 valign="center" align="center" class="greenline1">
        <img src="Images/Shared_Attribute.jpg" 
        alt="Model for a large or shared HDF5 attribute"></td></tr>
    <tr><td class="figurecaption" align="left">
        <font class="figurenumber">Figure 2. A large or shared HDF5 attribute 
    and its associated dataset(s)</font>
        A large or shared HDF5 attribute and its associated dataset(s). 
        <br /><code>DatasetA</code> is an attribute of 
        <code>Dataset1</code> that may have been too large 
        to store as an attribute.  
        It is associated with <code>Dataset1</code> 
        by means of an object reference pointer attached as an 
        attribute to <code>Dataset1</code>.
        Such an attribute can be shared among multiple datasets by 
        means of addtional object reference pointers attached
        to addtional datasets.</td>
    </tr></td>
</table>
<!-- FOR USE WITH PRINT VERSION -------------------------------------->
<!--( End large or shared attribute )===============================-->


<h4>Large Attributes</h4>
<p>Attributes are intended to be small objects. 
A large dataset intended as metadata for another dataset 
can be stored as a supplemental dataset.
An attribute would then be attached to the original dataset indicating 
the relationship as an object reference pointer.
This approach is illustrated in the figure below<!-- formerly Figure 3 -->.
</p>
<p>How small is <i>small</i> and how large is <i>large</i> 
are not defined by the library;
it is left to the user&rsquo;s interpretation.
The HDF5 development team generally considers the maximum size of
attributes to be 16K bytes, but this has never been 
set as a design or implementation limit.</p>
<!-- editingComment
  <span class="editingComment">[ [ [
  Is this an appropirate comment?  (I think it is.)
  ] ] ]</span>
-->

<!--( Large or shared attribute )===================================-->
<!-- FOR USE WITH ELECTRONIC VERSION ---------------------------------->
<table x-use-null-cells
		cellspacing=0
                class="fullImgTable"
		align="center">
		<!-- width=600 -->
                
<!-- <table align="right" class="greenframe1" width="250"> -->
<tr valign="top"> 
    <td class="fullImgTableImgCell" align="center">
<!--    <tr><td height="310" valign="center" align="center" class="greenline1"> -->
    <img src="Images/Shared_Attribute.jpg" 
    alt="Model for a large or shared HDF5 attribute"></td></tr>
<tr><td align="left" class="fullImgTableCapCell"> 
    <span class="figurenumber">Figure 2. A large or shared HDF5 attribute 
    and its associated dataset(s)</span>
    <!-- formerly Figure 3: -->
    <br /><code>DatasetA</code> is an attribute of 
    <code>Dataset1</code> that may have been too large 
    to store as an attribute.  
    It is associated with <code>Dataset1</code> 
    by means of an object reference pointer attached as an 
    attribute to <code>Dataset1</code>.
    Such an attribute can be shared among multiple datasets by 
    means of addtional object reference pointers attached
    to addtional datasets.</td>
    </tr>
</table>
<!-- FOR USE WITH ELECTRONIC VERSION --------------------------------->



<h4>Shared Attributes</h4>
<p>Attributes written and managed through the H5A interface 
     cannot be shared.  
     If shared attributes are required, they must be handled 
     in the manner described above for large attributes 
     and illustrated in the figure above<!-- formerly Figure 3 -->.
     </p>

<h4>Attribute Names</h4>
<p>While an attribute name may include any valid ASCII character 
such as blanks, users should keep readability issues in mind. 
In C, the name must be terminated with a null character, 
     <code>\0</code>.
     </p>

<h4>No Special I/O or Storage</h4>
<p>HDF5 attributes have all the characteristics of HDF5 datasets 
     except the following:</p>
     <ul>
     <li>Attributes are written and read only in full: 
       there is no provision for partial I/O or sub-setting</li>
     <li>No special storage capability is provided for attributes: 
       there is no compression or chunking, and 
       attributes are not extendable</li>
    </ul>
        

<!--
<a name="Examples">
<p>&nbsp;</p>
<h3 class="pagebefore">13.00 Code Examples for Text Text Text</h3>
</a>
<dir>


<p class=editingcomment>[ [ [ Comprehensive example set yet to be prepared. ] ] ]</p>


<h4>13.00.1 Example using text text text</h4>


<p>The following example ....:
 </p>

<dir><pre>
code
code
code
</pre></dir>

<h4>13.00.2 Example using text text text</h4>

<p>This example shows how ....:
 </p>

<dir><pre>
code
code
code
</pre></dir>

</dir>
-->
<br /><br /><br />
 

</body>
</html>
