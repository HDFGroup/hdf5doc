
================================================================================
Process for Creating PDF Version of the HDF5 User's Guide (UG) from Source Files
================================================================================

                                               Last modified: 19 November 2009

PDF versions of the HDF5 Reference Manual (RM) and the new HDF5 User's Guide 
(UG) are created from the HTML source at each release of the HDF5 Library.  
The process is managed through two application environments, DreamWeaver (an 
HTML editing environment) and HTMLdoc (a PDF conversion tool).  This document 
describes the process in detail for the UG; the process for the RM is very 
similar and is described in a separate document.


Complete this process first for either the RM or UG, then for the other.


The HDF5 User's Guide
-------------------------
1.  Skip this step if you have already done it for the UG; you can use the 
    same working copy for both tasks.

    Check out a fresh working copy of the minor release branch specifically
    for this task. For example:
      svn checkout https://svn.hdfgroup.uiuc.edu/hdf5doc/branches/hdf5_1_8_4  \
          hdf5_1_8_4-PDFs

    Using Macromedia Dreamweaver, define a site that contains all the 
    documents within the subdirectory html/, including the .html, image, 
    DreamWeaver library (in ed_libs/), and .book files.

2.  Working in DreamWeaver...
    In the ed_libs directory:

      a) Assuming your libraries are set up for electronic viewing (to
         verify, check that there is nothing more than a commented note and
         an '&nbsp;' in the ed_libs/*_Null.lbi libraries), move the code
         from the relevant library files into the respective _Null library 
         files, replacing the &nbsp;.
           
         For example, take all the code from Footer.lbi and insert it into
         Footer_Null.lbi, taking care not to remove the commented note.

         You can ignore any file in ed_libs/ that does not have a corresponding 
         _Null file.

      b) In the now empty library file, add an &nbsp;.

      c) Save the libraries and their respective Null files.

      d) With a library still open (not a Null one) choose 
          Modify>Templates>Update Pages...
         In 'Look in:', select 'Entire Site'.
         In 'Update:', select 'Library Items' and 
                       deselect 'Templates'.
         Click on the 'Start' button.

3.  If you have not yet generated the RM PDF, perform the task outlined in
    step three of the RM process.txt file.  This is the step of converting 
    the '!-- FOR USE WITH...' flags from the electronic form to the print form.

         <!-- FOR USE WITH ELECTRONIC VERSION ---> 
         <!-- FOR USE WITH PRINT VERSION ---> 

4.  Using HTML DOC:  
      
      a) Open H5_newUG.book 
      
      b) The Input tab:
           Document Type: Web Page
           Input Files:
	     Part1SplitterPg.html
             03_Model.html
	     Part2SplitterPg.html
             08_TheFile.html
             09_Groups.html
             10_Datasets.hmtl
             11_Datatypes.html
             12_Dataspaces.hmtl
             13_Attributes.html
	     Part3SplitterPg.html
	     ../ddl.html
	     ../Glossary.html
           Logo Image: none
           Title File/Image: none

      c) The Output tab:
           Output To: File
           Output Path: HDF5_UG_body.pdf
           Output Format: PDF
           Output Options: JPEG Big Images
           Compression (not critical, change at will): Slider right above 'Fast'
           JPEG Quality (not critical, change at will): 60
  
      d) The Page tab:
           Page Size: Letter, 2-Sided
             Top: 0.50in, Left: 1.00in, Right: 0.50in, Bottom: 0.50in
           Header: Blank, Blank, Blank
           Footer: Blank, Blank, 1,2,3,...
           Number Up: 1

      e) The Colors tab:
           Everything Blank
           Link Style: Plain
    
      f) The Fonts tab:
           Base Font Size: 11.0
           Line Spacing: 1.2
           Body Typeface: Times
           Heading Typeface: Helvetica
           Header/Footer Size: 10.0
           Header/Footer Font: Helvetica
           Character Set: iso-8859-1
           Options: Do Not Check 'Embed Fonts'

      g) The PDF tab:
           PDF Version: 1.3
           Page Mode: Document
           Page Layout: Single
           Page Effect: None
           Options: Check 'Include Links'

      h) The Security tab:
           Encryption: No

      i) The Options tab:
           HTML Editor: Point to Dreamweaver (recommended)
           Browser Width: 680
           GUI Option: Check all 3

      j) Save the book file.
     
      k) Verify that the output file (HDF5_UG_body.pdf) is not open.

      l) Generate the document.

5.  Open HDF5_UG_body.pdf
    
      a) Scan through the document page by page to verify that there are no 
         elements that should have been eliminated via javascripts or swapped 
         commentation.

      b) Scan through again looking only for places where page breaks need to 
         be added, removed, or relocated.  I have found that re-generating the 
         document after every pagination correction actually saves time in the 
         long run.  This is because some pagination corrections that must be 
         made may create other problems further down in the document.  
         Re-generating the document ensures that every problem you focus on 
         won't have to be redone.

      c) When you are sure all the pagination is correct (don't forget to 
         start each of the sections included in the Table of Contents on a 
         recto) note page numbers for the beginning of each section in the TOC.

6.  Open H5_newUG_TOC.html

      a) Edit page numbers accordingly. 

      b) Save.

7.  Using HTML DOC:

      a) Open H5_newUG_Front.book

      b) The Input tab:
           Document Type: Web Page
           Input Files:
             H5_newUG_Title.html
             H5_newUG_TOC.html
           Logo Image: none
           Title File/Image: none

      c) The Output tab:
           Output To: File
           Output Path: H5_newUG_Front.pdf
           Output Format: PDF
           Output Options: JPEG Big Images
           Compression (not critical, change at will): Slider right above 'Fast'
           JPEG Quality (not critical, change at will): 60
  
      d) The Page tab:
           Page Size: Letter, 2-Sided
             Top: 0.50in, Left: 1.00in, Right: 0.50in, Bottom: 0.50in
           Header: Blank, Blank, Blank
           Footer: Blank, Blank, Blank
           Number Up: 1

      e) The Colors tab:
           Everything Blank
           Link Style: Plain
    
      f) The Fonts tab:
           Base Font Size: 11.0
           Line Spacing: 1.2
           Body Typeface: Times
           Heading Typeface: Helvetica
           Header/Footer Size: 10.0
           Header/Footer Font: Helvetica
           Character Set: iso-8859-1
           Options: Do Not Check 'Embed Fonts'

      g) The PDF tab:
           PDF Version: 1.3
           Page Mode: Document
           Page Layout: Single
           Page Effect: None
           Options: Check 'Include Links'

      h) The Security tab:
           Encryption: No

      i) The Options tab:
           HTML Editor: Point to Dreamweaver (recommended)
           Browser Width: 680
           GUI Options: Check all 3

      j) Save the book file.
     
      k) Verify that the output file (H5_newUG_Front.pdf) is not open.

      l) Generate the document.      


8.  Following a procedure virtually identical to that outlined in (7) above, 
    use the file PDF_CandL.book to generate a 1-page copyright and license 
    statement.

    This copyright page can be generated once and used in both the RM and 
    UG PDFs.  


9.  Using Adobe Acrobat Pro:

      a) Insert the Copyright page into the frontmatter file and remove any 
         blank pages that prevent the TOC or any subsequent material from 
         appearing on a recto.

         The resultiing page order should be as follows:

             Title page            (recto)
             Copyright page        (on the back of the title page)
             TOC                   (starts on a recto; may be several pages)
             additional material   (starts on a recto; may be several pages)

         The resulting file is your final frontmatter file.

      b) Insert the frontmatter file at the front of the previously-generated
         body file.

      c) Name the resulting file consistently with the names of UG and RM PDFs 
         from prior releases.


10. Commit the final UG and RM PDFs to the repository and update the website.

