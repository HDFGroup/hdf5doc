<!doctype HTML public "-//W3C//DTD HTML 4.0 Frameset//EN">
<html>
<head>
<title>Chapter 4: HDF5 Groups</title>

<!--(Meta)==========================================================-->

<!--(Links)=========================================================-->

<!--( Begin styles definition )=====================================-->
<link href="ed_styles/NewUGelect.css" rel="stylesheet" type="text/css">
<!--( End styles definition )=======================================-->

</head> 

<body>

<!-- #BeginLibraryItem "/ed_libs/styles_UG.lbi" -->
<!--
  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
  * Copyright by The HDF Group.                                               *
  * Copyright by the Board of Trustees of the University of Illinois.         *
  * All rights reserved.                                                      *
  *                                                                           *
  * This file is part of HDF5.  The full HDF5 copyright notice, including     *
  * terms governing use, modification, and redistribution, is contained in    *
  * the files COPYING and Copyright.html.  COPYING can be found at the root   *
  * of the source code distribution tree; Copyright.html can be found at the  *
  * root level of an installed copy of the electronic HDF5 document set and   *
  * is linked from the top-level documents page.  It can also be found at     *
  * http://hdfgroup.org/HDF5/doc/Copyright.html.  If you do not have          *
  * access to either file, you may request a copy from help@hdfgroup.org.     *
  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 -->
<!-- #EndLibraryItem --><!-- HEADER LEFT "HDF5 User's Guide" -->
<!-- HEADER RIGHT "HDF5 Groups" -->

<!--( TOC )=========================================================-->
<SCRIPT language="JavaScript">
<!--
document.writeln ('\
<table x-use-null-cells\
                align=right\
		width=240\
		cellspacing="0"\
		class="tocTable">\
  <tr valign="top"> \
    <td class="tocTableHeaderCell" colspan="2"> \
        <span class="TableHead">Chapter Contents</span></td>\
  </tr>\
-->
<!-- Table Version 3 -->\
<!--
  <tr valign="top"> \
    <td class="tocTableContentCell2"> \
      <a href="#Intro">1.</a></td>\
    <td class="tocTableContentCell3">\
	  <a href="#Intro">Introduction</a></td> \
  </tr>\
  <tr valign="top"> \
    <td class="tocTableContentCell2"> \
      <a href="#DGroupObj">2.</a></td>\
    <td class="tocTableContentCell3">\
	  <a href="#DGroupObj">Description of the Group Object</a></td>\
  </tr>\
  <tr valign="top"> \
    <td class="tocTableContentCell2"> \
      <a href="#H5Dump">3.</a></td>\
    <td class="tocTableContentCell3">\
	  <a href="#H5Dump">Using <code>h5dump</code></a></td> \
  </tr>\
  <tr valign="top"> \
    <td class="tocTableContentCell2"> \
      <a href="#GroupFuncSums">4.</a></td>\
    <td class="tocTableContentCell3">\
	  <a href="#GroupFuncSums">Group (H5G) Function Summaries</a></td>\
  </tr>\
  <tr valign="top"> \
    <td class="tocTableContentCell2"> \
      <a href="#ProgModel">5.</a></td>\
    <td class="tocTableContentCell3">\
	  <a href="#ProgModel">Programming Model</a></td> \
  </tr>\
  <tr valign="top"> \
    <td class="tocTableContentCell2"> \
      <a href="#DiscoverInfo">6.</a></td>\
    <td class="tocTableContentCell3">\
	  <a href="#DiscoverInfo">Discovering Information About Objects</a></td>\
  </tr>\
  <tr valign="top"> \
    <td class="tocTableContentCell2"> \
      <a href="#DiscoverGrObjs">7.</a></td>\
    <td class="tocTableContentCell3">\
	  <a href="#DiscoverGrObjs">Discovering Objects in a Group</a></td>\
  </tr>\
  <tr valign="top"> \
    <td class="tocTableContentCell2"> \
      <a href="#DiscoverAll">8.</a></td>\
    <td class="tocTableContentCell3">\
	  <a href="#DiscoverAll">Discovering All the Objects in the File</a></td>\
  </tr>\
\
  <tr valign="top"> \
    <td class="tocTableContentCell"> \
-->
<!-- editingComment -- "tocTableContentCell" and "tocTableContentCell4" \
-->\
<!-- are the table-closing cell class.\
    <td class="tocTableContentCell2"> \
-->\
<!--
      <a href="#Examples">9.</a></td>\
    <td class="tocTableContentCell4">\
	  <a href="#Examples">Examples of File Structures</a>\
-->
<!-- editingComment -- This section not currently complete or validated.\
  </tr><tr valign="top"> \
    <td class="tocTableContentCell"> \
    <a href="#Appendix">10</a></td>\
    <td class="tocTableContentCell4"><a href="#Appendix">Appendix</a></td>\
-->\
<!--
  </td></tr>\
</table>\
')
-->
</SCRIPT>
<!--(End TOC)=======================================================-->

<!--(TOC VERS 1 and 2)==============================================-->
<!-- Table Version 1
  <tr valign="top"> 
    <td class="tocTableContentCell" colspan="2"> 
    <a href="#Intro">1: Introduction</a> 
    <br /> 
    <a href="#DGroupObj">2: Description of the Group</a>
    <br /> 
    <a href="#h5dump">3: Using <code>h5dump</code></a>
    <br />
    &nbsp;&nbsp;&nbsp;&nbsp;<a href="#DGroupObj">Object</a> 
    <br />
    <a href="#GroupFuncSums">4: Group Function</a> 
    <br />
    &nbsp;&nbsp;&nbsp;&nbsp;<a href="#GroupFuncSums">Summaries</a> 
    <br /> 
    <a href="#ProgModel">5: The Programming Model</a> 
    <br /> 
    <a href="#DiscoverInfo">6: Discovering Information</a> 
    <br />
    &nbsp;&nbsp;&nbsp;&nbsp;<a href="#DiscoverInfo">About Objects</a>
    <br />
    <a href="#DiscoverAll">7: Discovering All the</a>
    <br />
    &nbsp;&nbsp;&nbsp;&nbsp;<a href="#DiscoverAll">Objects in the File</a>
    <br />
    <a href="#Examples">8: Examples of File</a> 
    <br />
    &nbsp;&nbsp;&nbsp;&nbsp;<a href="#Examples">Structures</a>
    <br />
    <a href="#Appendix">9: Appendix</a> 
    </td>
  </tr>
-->

<!-- Table Version 2
  <tr valign="top"> 
    <td class="tocTableContentCell2"> 
    <a href="#Intro">1</a></td>
    <td class="tocTableContentCell3"><a href="#Intro">Introduction</a> 
  </tr><tr valign="top"> 
    <td class="tocTableContentCell2"> 
    <a href="#DGroupObj">2</a></td>
    <td class="tocTableContentCell3"><a href="#DGroupObj">Description of the Group Object</a>
  </tr><tr valign="top"> 
    <td class="tocTableContentCell2"> 
    <a href="#h5dump">3</a></td>
    <td class="tocTableContentCell3"><a href="#h5dump">Using <code>h5dump</code></a> 
  </tr><tr valign="top"> 
    <td class="tocTableContentCell2"> 
    <a href="#GroupFuncSums">4</a></td>
    <td class="tocTableContentCell3"><a href="#GroupFuncSums">Group Function Summaries</a> 
  </tr><tr valign="top"> 
    <td class="tocTableContentCell2"> 
    <a href="#ProgModel">5</a></td>
    <td class="tocTableContentCell3"><a href="#ProgModel">Programming Model</a> 
  </tr><tr valign="top"> 
    <td class="tocTableContentCell2"> 
    <a href="#DiscoverInfo">6</a></td>
    <td class="tocTableContentCell3"><a href="#DiscoverInfo">Discovering Information About Objects</a>
  </tr><tr valign="top"> 
    <td class="tocTableContentCell2"> 
    <a href="#DiscoverAll">7</a></td>
    <td class="tocTableContentCell3"><a href="#DiscoverGrObjs">Discovering Objects in a Group</a>
  </tr><tr valign="top"> 
    <td class="tocTableContentCell2"> 
    <a href="#DiscoverAll">8</a></td>
    <td class="tocTableContentCell3"><a href="#DiscoverAll">Discovering All the Objects in the File</a>
  </tr><tr valign="top"> 
    <td class="tocTableContentCell2"> 
    <a href="#Examples">9</a></td>
    <td class="tocTableContentCell3"><a href="#Examples">Examples of File Structures</a>
  </tr><tr valign="top"> 
    <td class="tocTableContentCell"> 
    <a href="#Appendix">10</a></td>
    <td class="tocTableContentCell4"><a href="#Appendix">Appendix</a></td>
  </tr>
-->

<!--(END TOC VERS 1 and 2)==========================================-->

<div align="center">
<a name="TOP">
<h2>Chapter 4<br /><font size="7">HDF5 Groups</font></h2>
</a>
</div>

<a name="Intro">
<h3>4.1. Introduction</h3>
</a>

<!-- editingComment
<span class="editingComment">
   [ [ [ 
   The use of the term "path name" becomes rather stilted in this chapter.  
   Add a note early on that the shorthand "path" is generally used as an 
   equivalent.  Then edit "path name" ==> "path" where appropriate. 
   ] ] ]
  </span>
-->

  <p>
  As suggested by the name Hierarchical Data Format, 
  an HDF5 file is hierarchically structured.  
  The HDF5 group and link objects implement this hierarchy. </p>

  <p>
  In the simple and most common case, 
  the file structure is a tree structure;
  in the general case, the file structure may be a 
  directed graph with a designated entry point.
  The tree structure is very similar to the file system 
  structures employed on UNIX systems, directories and files, 
  and on Apple Macintosh and Microsoft Windows systems, 
  folders and files.
  HDF5 groups are analogous to the directories and folders;
  HDF5 datasets are analogous to the files.</p>
 
  <p>
  The one <span class="termemphasis">very important difference</span> 
  between the HDF5 file structure and 
  the above-mentioned file system analogs 
  is that HDF5 groups are linked as a directed graph, 
  allowing circular references;  
  the file systems are strictly hierarchical, 
  allowing no circular references.
  The figures below illustrate the range of possibilities.  </p>

  <p>
  In Figure 1, the group structure is strictly hierarchical, 
  identical to the file system analogs.</p>
  

   <p>
   In Figures 2 and 3, the structure takes advantage of the 
   directed graph&rsquo;s allowance of circular references.  
   In Figure 2, <code>GroupA</code> is not only 
   a member of the root group, <code>/</code>, 
   but a member of <code>GroupC</code>.  
   Since Group C is a member of Group B 
   and Group B is a member of Group A, 
   Dataset1 can be accessed by means of the circular reference
   <code>/Group A/Group B/Group C/Group A/Dataset1</code>.
   Figure 3 illustrates an extreme case in which 
   <code>GroupB</code> is a member of itself, enabling a 
   reference to a member dataset such as 
   <code>/Group A/Group B/Group B/Group B/Dataset2</code>.</p>


<table align="center" width="400" border="0">
    <tr valign="center" align="center">
        <td>
        <hr color="green" size="3"/>
        <img height="250" src="Images/Group_fig1.jpg"></td>
        </tr>
    <tr valign="top" align="left">
        <td>
        <hr color="green" size="1" />
        <b>Figure 1. An HDF5 file with a strictly hierarchical group structure</b> 
        <hr color="green" size="3"/></td>
        </tr>
</table>
<br />
<br />


<table align="center" width="400" border="0">
    <tr valign="center" align="center">
        <td><hr color="green" size="3"/>
        <img height="250" src="Images/Group_fig2,8.jpg"></td>
        </tr>
    <tr valign="top" align="left">
        <td >
        <hr color="green" size="1" />
        <b>Figure 2. An HDF5 file with a directed graph group structure
        including a circular reference</b>
        <hr color="green" size="3"/></td>
        </tr>
</table>
<br />
<br />

<table align="center" width="400" border="0">
    <tr valign="center" align="center">
        <td><hr color="green" size="3"/>
        <img height="250" src="Images/Group_fig3.jpg"></td>
        </tr>
    <tr valign="top" align="left">
        <td ><hr color="green" size="1" />
        <b>Figure 3. An HDF5 file with a directed graph group structure
        and one group as a member of itself</b><br />
        <hr color="green" size="3"/></td>
        </tr>
</table>
<br />





<!-- NEW PAGE -->
  <p>
  As becomes apparent upon reflection,
  directed graph structures can become quite complex;
  caution is advised!</p>

  <p>
  The balance of this chapter discusses the following topics:</p>
  <ul>
    <li>The HDF5 group object (or a group)
        and its structure in more detail</li>
    <li>HDF5 link objects (or links)</li>
    <li>The programming model for working with groups and links</li>
    <li>HDF5 functions provided for working with groups, group members, and 
        links</li>
    <li>Retrieving information about objects in a group</li>
    <li>Discovery of the structure of an HDF5 file and the contained objects</li>
    <li>Examples of file structures</li>
  </ul>


<SCRIPT language="JavaScript">
<!--
document.writeln ("
<a name="DGroupObj">
<div align=right>
<a href="#TOP"><font size="-1">(Top)</font></a>
</div>
</a>
");
-->
</SCRIPT>


<a name="DGroupObj">
<h3 class=pagebefore>4.2. Description of the Group Object</h3>
</a>

<h4>4.2.1 The Group Object</h4>

  <p>
  Abstractly, an HDF5 group contains zero or more objects 
  and every object must be a member of at least one group. 
  The root group, the sole exception, may not belong to any group.</p>
  
  
<table width = 400 cellspacing="0" align="center">
  <tr valign="top"> 
    <td align="center">
    <hr color="green" size="3"/>
    <img src="Images/groups_fig4.JPG">
</td></tr>
<tr><td><hr color="green" size="1" /></td></tr>
<tr valign="top">
<td align="left" >
    <b>Figure 4. Abstract model of the HDF5 group object</b>
     <hr color="green" size="3"/>
</td></tr>
</table>
<br />



  <p>
  Group membership is actually implemented via 
  <em>link</em> objects. See the figure above. 
  A link object is owned by a group and points to a 
  <em>named object</em>. 
  Each link has a <em>name</em>, and each link points to 
  exactly one object. 
  Each named object has at least one and possibly many links to it.</p>

  <p>There are three classes of named objects: <em>group</em>, 
  <em>dataset</em>, and <em>named datatype</em>. See the figure below.  
  Each of these objects is the member of at least one group, 
  which means there is at least one link to it.</p>

<table width="500" cellspacing="0" align="center">
  <tr valign="top">
    <td align="center"><hr color="green" size="3"/>
    <img src="Images/groups_fig5.JPG">
</td></tr>
<tr><td><hr color="green" size="1" /></td></tr>
<tr>
<td align="left" ><b>Figure 5. Classes of named objects</b>
     <hr color="green" size="3"/>
</td></tr>
</table>
<br />


  

  <p>
  The primary operations on a group are to 
  add and remove members and to discover member objects. 
  These abstract operations, as listed in the figure below, 
  are implemented in the H5G APIs, as listed in section 4, 
  &ldquo;<a href="#GroupFuncSums">Group Function Summaries</a>.&rdquo;</p>
  
  <p>
  To add and delete members of a group, 
  links from the group to <em>existing</em> objects in the file 
  are created and deleted with the 
  <code><em>link</em></code> and <code><em>unlink</em></code> operations. 
  When a <em>new</em> named object is created,
  the HDF5 Library executes the link operation in the background 
  immediately after creating the object 
  (i.e., a new object is added as a member of the group in which it 
  is created without further user intervention).</p>
  <p>
  Given the name of an object, the <em>get_object_info</em> 
  method retrieves a description of the object, 
  including the number of references to it. 
  The <em>iterate</em> method iterates through the members of 
  the group, returning the name and type of each object.</p>
  
  
<!--
<table x-use-null-cells
		width="600"
		cellspacing="0"
                class="fullImgTable"
		align="center">
  <tr valign="top"> 
    <td class="fullImgTableImgCell" align="center">
    <img src="Images/groups_fig3.JPG">
-->

<!-- NEW PAGE -->
<table border="0" width ="300" align="center">
  <tr valign="top"><td>&nbsp;&nbsp;</td>
    <td align="center"><hr color="green" size="3"/>
    <br />
    <table align="center" border="1">
    <tr><td align="center"><code><b>Group</b></code></td></tr>
    <tr><td align="left"><code>size:size_t</code></td></tr>
    <tr><td align="left"><code>create()<br />
                               open()<br />
			       close()<br />
			       <br />
			       link()<br />
			       unlink()<br />
			       move()<br />
			       <br />
			       iterate()<br />
			       get_object_info()<br />
			       get_link_info()</code></td></tr>
    </table>
    <br />
</td><td>&nbsp;&nbsp;</td></tr>
<tr><td>&nbsp;&nbsp;</td>
<td align="left" ><hr color="green" size="1"/>
    <b>Figure 6. The group object</b><br />
    <hr color="green" size="3"/>
</td><td>&nbsp;&nbsp;</td></tr>
</table>
<br />

  <p>
  Every HDF5 file has a single root group, with the 
  name <code>/</code>.  The root group is identical to any 
  other HDF5 group, except:</p>

  <ul>
      <li>The root group is automatically created when the 
          HDF5 file is created (<code>H5Fcreate</code>).</li>
      <li>The root group has no parent, but, by convention 
          has a reference count of 1.</li>
      <li>The root group cannot be deleted (i.e., unlinked)!</li>
  </ul>


<h4>4.2.2 The Hierarchy of Data Objects</h4>

  <p>An HDF5 file is organized as a rooted, directed graph using 
  HDF5 group objects.  The named data objects are the nodes of the graph, 
  and the links are the directed arcs. 
  Each arc of the graph has a name, with the special name <code>/</code>
  reserved for the root group.  
  New objects are created and then inserted into the graph with a link 
  operation tht is automatically executed by the library;
  existing objects are inserted into the graph with a link operation  
  explicitly called by the user, which creates a named link from 
  a group to the object. </p>
 
  <p>An object can be the target of more than one link.</p>
  
  <p>
  <a name="SupScript1">The names on the links must be 
  unique within each group, but there may be 
  many links with the same name in different groups. 
  These are unambiguous, because some ancestor must have a different name, 
  or else they are the same object. 
  The graph is navigated with path names, analogous to Unix file 
  systems (see section 2.3, 
  &ldquo;<a href="#PathNames">HDF5 Path Names</a>&rdquo;). 
  An object can be opened with a full path starting 
  at the root group, or with a relative path and a starting point.
  That starting point is always a group, though it may be the 
  current working group, another specified group, or 
  the root group of the file. 
  Note that all paths are relative to a single HDF5 file. 
  In this sense, an HDF5 file is analogous to a single UNIX file system.
  <a href="#FootNote"><sup><font size="-1">1</font></sup></a></p>
  
  <p>
  It is important to note that, just like the UNIX file system, 
  HDF5 objects do not have <em>names</em>, the names are associated 
  with <em>paths</em>. 
  An object has an <em>object identifier</em> that is unique within the file, 
  but a single object may have many <em>names</em> because there may be  
  many paths to the same object. 
  An object can be renamed, or moved to another group, by adding and 
  deleting links. In this case, the object itself never moves.  
  For that matter, membership in a group has no implication 
  for the physical location of the stored object.</p>
  
  <p>
  Deleting a link to an object does not 
  necessarily delete the object. 
  The object remains available as long as there is at least one link to it.  
  After all links to an object are deleted, it can no longer be opened, 
  and the storage may be reclaimed.</p>
    
  <p>
  It is also important to realize that the linking mechanism 
  can be used to construct very complex graphs of objects. 
  For example, it is possible for object to be shared between several 
  groups and even to have more than one name in the same group. 
  It is also possible for a group to be a member of itself, 
  or to create other <em>cycles</em> in the graph, such as 
  in the case where a child group is linked to one of its ancestors. </p>
  
  <p>
  HDF5 also has <em>soft links</em> similar to UNIX soft links. 
  A <em>soft link</em> is an object that has a name and a path name for 
  the target object.  The soft link can be followed to open the target 
  of the link just like a regular or <em>hard</em> link. 
  The differences are that the hard link cannot be created if the 
  target object does not exist and it always points to the same object. 
  A soft link can be created with any path name, whether or not the 
  object exists; it may or may not, therefore, be possible to follow 
  a soft link.
  Furthermore, a soft link&rsquo;s target object may be changed.</p>

<a name="PathNames">


<h4>4.2.3 HDF5 Path Names</h4></a>

<!-- editingComment
  <span class="editingComment">  
       [ [ [ 
       The opening paragraph here is still foggy, and now a bit redundant.  
       A discussion of objects before launching into the discussion of l
       inks might be helpful? 
       ] ] ]
       </span>
-->
       
  <p>
  The structure of the HDF5 file constitutes the name space 
  for the objects in the file. 
  A path name is a string of components separated by slashes 
  (<code>/</code>). 
  Each component is the name of a hard or soft link which points to 
  an object in the file. 
  The slash not only separates the components, but indicates their
  hierarchical releationship; the component indicated by the link name  
  following a slash is a always a member of the component indicated by 
  the link name preceding that slash.</p>
  
  <p>
  The first component in the path name may be any of the following:</p>
  <ul><li>the special character dot (<code>.</code>, a period), 
          indicating the current group </li>
      <li>the special character slash (<code>/</code>), 
          indicating the root group </li>
      <li>any member of the current group </li>
  </ul>
  
  <p>
  Component link names may be any string of ASCII characters 
  not containing a slash or a dot 
  (<code>/</code> and <code>.</code>, which are reserved as noted above).
  However, users are advised to avoid the use of punctuation and 
  non-printing characters, as they may create problems for other software. 
  The figure below provides a BNF grammar for HDF5 path names.</p>
  
<table width="600" cellspacing="0" align="center">
    <tr valign="top">
        <td><hr color="green" size="3"/>
<pre><code>
  PathName ::= AbsolutePathName | RelativePathName
  Separator ::= "/" ["/"]*
  AbsolutePathName ::= Separator [ RelativePathName ]
  RelativePathName ::= Component [ Separator RelativePathName ]*
  Component ::=  "." |  Characters
  Characters ::= Character+   -  { "." }
  Character ::= {c:  c Î { { legal ASCII characters } - {'/'} }
</code></pre>
        </td></tr>
    <tr>
        <td align="left"><hr color="green" size="1"/>
        <b>Figure 7. A BNF grammar for HDF5 path names</b>
    <hr color="green" size="3"/>
</td></tr>
</table>
<br />


<!-- NEW PAGE -->
  An object can always be addressed by a either a
  <em>full or absolute</em> path name, starting at the root group,
  or by a <em>relative</em> path name, starting in a known location 
  such as the current working group.
  As noted elsewhere, a given object may have multiple full and 
  relative path names. 
  
  <p>
  Consider, for example, the file illustrated in the figure below.
  <code>Dataset1</code> can be identified by either of these 
  absolute path names:</p>
  <pre>
    /GroupA/Dataset1
    /GroupA/GroupB/GroupC/Dataset1</pre>
    
  <p>
  Since an HDF5 file is a directed graph structure, and is therefore 
  not limited to a strict tree structure, and 
  since this illustrated file includes the sort of circular reference
  that a directed graph enables, 
  <code>Dataset1</code> can also be identified by this absolute path name:</p>
  <pre>
    /GroupA/GroupB/GroupC/GroupA/Dataset1</pre>

  <p>
  Alternatively, if the current working location is <code>GroupB</code>,
  <code>Dataset1</code> can be identified by either of these 
  relative path names:</p>
  <pre>
    GroupC/Dataset1
    GroupC/GroupA/Dataset1</pre>
  
  <p>
  Note that relative path names in HDF5 do not employ the 
  <code>../</code> notation, the UNIX notation indicating a 
  parent directory, to indicate a parent group.</p>

<table width="400" align="center" border="0">
    <tr valign="bottom" align="center">
        <td><hr color="green" size="3"/>
            <img src="Images/Group_fig2,8.jpg">
            </td></tr>
    <tr valign="top" align="left">
        <td ><hr color="green" size="1"/>
        <b>Figure 8.
        An HDF5 file with a directed graph group structure
        including a circular reference</b>
        <hr color="green" size="3"/>
        </td></tr>
</table>
<br />



<!-- *** BEGIN _topic/group_implementations.htm NEAR DUPLICATE *** -->
<!-- *** SEE editingComment FOLLOWING SECTION HEADING          *** -->

<a name="GroupStyles">
<h4>4.2.4 Group Implementations in HDF5</h4></a>

<!-- editingComment
  <span class="editingComment">  
       [ [ [ 
       This section is a close copy of but not identical to 
       _topic/group_implementations.htm, which is sourced into the RM.
       If/when the UG is broken into smaller files, re-unifying these 
       sections should be considered.
       ] ] ]
       </span>
-->
       
  <p>
  The original HDF5 group implementation provided 
  a single indexed structure for link storage.
  A new group implementation, in HDF5 Release 1.8.0,
  enables more efficient compact storage for very small groups,
  improved link indexing for large groups,
  and other advanced features.</p>
  <ul>
    <li>The <i>original indexed</i> format remains the default.
        Links are stored in a B-tree in the group&rsquo;s local heap.</li>
    <li>Groups created in the new <i>compact-or-indexed</i> format, 
        the implementation introduced with Release 1.8.0,
        can be tuned for performance, 
        switching between the compact and indexed formats 
        at thresholds set in the user application.</li>
    <ul>
        <li>The <i>compact</i> format will conserve file space
            and processing overhead when working with small groups and 
            is particularly valuable when a group contains no links.
            Links are stored as a list of messages in the group&rsquo;s
            header.</li>
        <li>The <i>indexed</i> format will yield improved performance
            when working with large groups, e.g., groups containing
            thousands to millions of members.
            Links are stored in a fractal heap and 
            indexed with an improved B-tree.</li>
    </ul>
    <li>The new implementation also enables the use of link names 
        consisting of non-ASCII character sets 
        (see <a href="../RM/RM_H5P.html#Property-SetCharEncoding">
        <code>H5Pset_char_encoding</code></a>)
        and is required for all link types other than hard or soft links,
        e.g., external and user-defined links
        (see the <a href="../RM/RM_H5L.html">H5L APIs</a>).</li>
  </ul>

  <p>
  The original group structure and the newer structures 
  are not directly interoperable. 
  By default, a group will be created in the original indexed format.
  An existing group can be changed to a compact-or-indexed format 
  if the need arises; there is no capability to change back.
  As stated above, once in the compact-or-indexed format, 
  a group can switch between compact and indexed as needed.</p>

  <p>
  Groups will be initially created in the compact-or-indexed format
  only when one or more of the following conditions is met:</p>
  <ul>
    <li>The <i>low version bound</i> value of 
        the <i>library version bounds</i> property 
        has been set to Release 1.8.0 or later 
        in the file access property list
        (see <a href="../RM/RM_H5P.html#Property-SetLibverBounds">
        <code>H5Pset_libver_bounds</code></a>).
        Currently, that would require an <code>H5Pset_libver_bounds</code>
        call with the <em>low</em> parameter set to
        <code>H5F_LIBVER_LATEST</code>.
        <p>
        When this property is set for an HDF5 file, all objects in the file 
        will be created using the latest available format; no effort will
        be made to create a file that can be read by older libraries.</li>
    <li>The creation order tracking property, 
        <code>H5P_CRT_ORDER_TRACKED</code>, has been set  
        in the group creation property list
        (see <a href="../RM/RM_H5P.html#Property-SetLinkCreationOrder">
        <code>H5Pset_link_creation_order</code></a>).</li>
  </ul>

  <p>
  <!--
  The compact-or-indexed format also enables completely new capabilities:
  user-defined and external links and non-ASCII link names.
  -->
  An existing group, currently in the original indexed format, 
  will be converted to the compact-or-indexed format 
  upon the occurrence of any of the following events:</p>
  <ul>
    <li>An external or user-defined link is inserted into the group.</li>
    <li>A link named with a string composed of non-ASCII characters 
        is inserted into the group.</li>

  <!-- QUESTION -- REVEAL THIS CIRCUMSTANCE ONLY AFTER (AND IF!) 
                -- IT IS IMPLEMENTED, THEN DELETE THE COMMENT

    <li>The <code>max_compact</code> and <code>min_dense</code>
        properties have been set in the group creation property list
        (see <a href="../RM/RM_H5P.html#Property-SetLinkPhaseChange">
        <code>H5Pset_link_phase_change</code></a>).
                                                         <br /><i><b>
                                                              [ [ [
                                  Masked bullet, immediately above:
                                         Not currently implemented.  
                                                  -- June 2007, FMB
                    Confirmed with NF that H5Pset_link_phase_change 
                       still does not trigger a group style change.
                                                -- August 2010, FMB
                                                              ] ] ]
                                                           </b></i>
  -->
  </ul>

  <p>
  The compact-or-indexed format offers performance improvements 
  that will be most notable at the extremes, 
  i.e., in groups with zero members 
  and in groups with tens of thousands of members.  
  But measurable differences may sometimes appear 
  at a threshold as low as eight group members.
  Since these performance thresholds and criteria differ from
  application to application, tunable settings are provided to 
  govern the switch between the compact and indexed formats
  (see <a href="../RM/RM_H5P.html#Property-SetLinkPhaseChange">
  <code>H5Pset_link_phase_change</code></a>).
  Optimal thresholds will depend on the application and the 
  operating environment.</p>

  <p>
  Future versions of HDF5 will retain the ability to 
  create, read, write, and manipulate 
  all groups stored in either the original indexed format or
  the compact-or-indexed format.</p>

<!-- *** END _topic/group_implementations.htm NEAR DUPLICATE *** -->


<SCRIPT language="JavaScript">
<!--
document.writeln ("
<a name="h5dump">
<div align=right>
<a href="#TOP"><font size="-1">(Top)</font></a>
</div>
</a>
");
-->
</SCRIPT>

<!-- NEW PAGE -->
<a name="H5Dump">
<h3 class=pagebefore>4.3. Using <code>h5dump</code></h3>
</a>

  <p>You can use <code>h5dump</code>, the command-line utility 
  distributed with HDF5, to examine a file for purposes either of 
  determining where to create an object within an HDF5 file or 
  to verify that you have created an object in the intended place.
  inspecting the contents of an HDF5 file.</p>

  <p>
  In the case of the new group created in section 5.1, 
  &ldquo;<a href="#ModelCreateGroup">Creating a group</a>,&rdquo; 
  the following <code>h5dump</code> command will display the 
  contents of <code>FileA.h5</code>:</p>

<dir><pre>
h5dump FileA.h5 
</pre></dir>

  <p>
  Assuming that the discussed objects, <code>GroupA</code> and 
  <code>GroupB</code> are the only objects that exist in 
  <code>FileA.h5</code>, the output will look something like the 
  following:</p>

<dir><pre>
HDF5 "FileA.h5" {
GROUP "/" {
GROUP GroupA {
GROUP GroupB {
}
}
}
}
</pre></dir>

  <p>
  <code>h5dump</code> is fully described on the 
  <a href="../RM/Tools.html" target="RMwindow">Tools</a> page of the 
  <a href="../RM/RM_H5Front.html" 
  target="RMwindow"><cite>HDF5 Reference Manual</cite></a>.</p>
  
  <p>The HDF5 DDL grammar is fully described in the document
  <a href="../ddl.html" target="RMwindow">DDL in BNF for HDF5</a>, 
  an element of this <cite>HDF5 User&rsquo;s Guide</cite>.</p>


<SCRIPT language="JavaScript">
<!--
document.writeln ("
<a name="GroupFuncSums">
<div align=right>
<a href="#TOP"><font size="-1">(Top)</font></a>
</div>
</a>
");
-->
</SCRIPT>

<!-- NEW PAGE -->
<a name="GroupFuncSums">
<h3 class=pagebefore>4.4. Group Function Summaries</h3>
</a>
<p>Functions that can be used with groups (H5G functions) and property 
list functions that can used with groups (H5P functions) are listed below. 
A number of group functions have been deprecated. Most of these have become 
link (H5L) or object (H5O) functions. These replacement functions are also
listed below.</p>


<table width="600" cellspacing="0" align="center" cellpadding="0">
    <tr valign="bottom">
        <td colspan="3" align="left" valign="bottom">
        <b>Function Listing 1. Group functions (H5G)</b></td>
        </tr>
    <tr height="5"><td colspan="3"><hr color="green" size="3" /></td></tr>
    <tr valign="top"> 
        <td>
        <b>C Function<br />Fortran Function</b>
        </td><td>&nbsp;</td>
        <td>
        <b>Purpose</b>
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td colspan=1 rowspan=1>
        <code>H5Gcreate<br />h5gcreate_f</code> 
        </td><td>&nbsp;</td>
        <td colspan=1 rowspan=1>
        Creates a new empty group and gives it a name. The C function is a 
        macro: see <a href="../RM/APICompatMacros.html">&ldquo;API 
        Compatibility Macros in HDF5.&rdquo;</a>
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td colspan=1 rowspan=1>
        <code>H5Gcreate_anon<br />h5gcreate_anon_f</code> 
        </td><td>&nbsp;</td>
        <td colspan=1 rowspan=1>
        Creates a new empty group without linking it into the file structure. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Gopen<br />h5gopen_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Opens an existing group for modification and returns a group 
        identifier for that group. The C function is a 
        macro: see <a href="../RM/APICompatMacros.html">&ldquo;API 
        Compatibility Macros in HDF5.&rdquo;</a>
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Gclose<br />h5gclose_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Closes the specified group.
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Gget_create_plist<br />h5gget_create_plist_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Gets a group creation property list identifier. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Gget_info<br />h5gget_info_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Retrieves information about a group. 
        Use instead of <code>H5Gget_num_objs</code>.
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Gget_info_by_idx<br />h5gget_info_by_idx_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Retrieves information about a group according to the group’s 
        position within an index. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Gget_info_by_name<br />h5gget_info_by_name_f</code>
        </td><td>&nbsp;</td>
        <td>
        Retrieves information about a group. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>(none)<br />h5gget_obj_info_idx_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Returns name and type of the group member identified by its index.
        Use with the <code>h5gn_members_f</code> function. 
        <code>h5gget_obj_info_idx_f</code> and <code>h5gn_members_f</code> 
        are the Fortran equivalent of 
        the C function <code>H5Literate</code>.
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>(none)<br />h5gn_members_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Returns the number of group members.
        Use with the <code>h5gget_obj_info_idx_f</code> function. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="3" /></td></tr>
</table>
<br />
<br />

<!-- NEW PAGE -->
<table width="600" cellspacing="0" align="center" cellpadding="0">
    <tr valign="bottom">
        <td colspan="3" align="left" valign="bottom">
        <b>Function Listing 2. Link (H5L) and object (H5O) functions
        </b></td>
    </tr>
    <tr><td colspan="3"><hr color="green" size="3" /></td></tr>
  <tr valign="top"> 
    <td>
        <b>C Function<br />Fortran Function</b>
    </td><td>&nbsp;</td>
    <td>
        <b>Purpose</b>
    </td>
  </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
    <td>
	<code>H5Lcreate_hard<br />h5lcreate_hard_f</code> 
    </td><td>&nbsp;</td>
    <td>
	Creates a hard link to an object. 
        Replaces <code>H5Glink</code> and <code>H5Glink2</code>.
    </td>
  </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
    <td>
	<code>H5Lcreate_soft<br />h5lcreate_soft_f</code> 
    </td><td>&nbsp;</td>
    <td>
	Creates a soft link to an object. 
        Replaces <code>H5Glink</code> and <code>H5Glink2</code>.
    </td>
  </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
    <td>
	<code>H5Lcreate_external<br />h5lcreate_external_f</code> 
    </td><td>&nbsp;</td>
    <td>
	Creates a soft link to an object in a different file. 
        Replaces <code>H5Glink</code> and <code>H5Glink2</code>.
    </td>
  </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
    <td>
	<code>H5Lcreate_ud<br />(none)</code> 
    </td><td>&nbsp;</td>
    <td>
	Creates a link of a user-defined type. 
    </td>
  </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
    <td>
	<code>H5Lget_val<br />(none)</code> 
    </td><td>&nbsp;</td>
    <td>
	Returns the value of a symbolic link. 
        Replaces <code>H5Gget_linkval</code>.
    </td>
  </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
    <td>
	<code>H5Literate<br />h5literate_f</code> 
    </td><td>&nbsp;</td>
    <td>
	Iterates through links in a group. 
        Replaces <code>H5Giterate</code>.
        See also <code>H5Ovisit</code> and <code>H5Lvisit</code>.
    </td>
  </tr>
  <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
        <td>
        <code>H5Literate_by_name<br />h5literate_by_name_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Iterates through links in a group. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Lvisit<br />(none)</code> 
        </td><td>&nbsp;</td>
        <td>
        Recursively visits all links starting from a specified group. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Ovisit<br />h5ovisit_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Recursively visits all objects accessible from a specified object. 
        </td>
        </tr>
  <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
    <td>
	<code>H5Lget_info<br />h5lget_info_f</code> 
    </td><td>&nbsp;</td>
    <td>
	Returns information about a link. 
        Replaces <code>H5Gget_objinfo</code>. 
    </td>
  </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
    <td>
	<code>H5Oget_info<br />(none)</code> 
    </td><td>&nbsp;</td>
    <td>
	Retrieves the metadata for an object specified by an identifier. 
        Replaces <code>H5Gget_objinfo</code>. 
    </td>
  </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
    <td>
	<code>H5Lget_name_by_idx<br />h5lget_name_by_idx_f</code> 
    </td><td>&nbsp;</td>
    <td>
	Retrieves name of the nth link in a group, according to the order 
        within a specified field or index.
        Replaces <code>H5Gget_objname_by_idx</code>.
    </td>
  </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
    <td>
	<code>H5Oget_info_by_idx<br />(none)</code> 
    </td><td>&nbsp;</td>
    <td>
	Retrieves the metadata for an object, identifying the object by an 
        index position. 
        Replaces <code>H5Gget_objtype_by_idx</code>.
    </td>
  </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
    <td>
	<code>H5Oget_info_by_name<br />h5oget_info_by_name_f</code> 
    </td><td>&nbsp;</td>
    <td>
    Retrieves the metadata for an object, identifying the object by 
    location and relative name. 
    </td>
  </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
    <td>
	<code>H5Oset_comment<br />(none)</code> 
    </td><td>&nbsp;</td>
    <td>
	Sets the comment for specified object. 
        Replaces <code>H5Gset_comment</code>.
    </td>
  </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
    <td>
	<code>H5Oget_comment<br />(none)</code> 
    </td><td>&nbsp;</td>
    <td>
	Gets the comment for specified object. 
        Replaces <code>H5Gget_comment</code>.
    </td>
  </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
    <td>
	<code>H5Ldelete<br />h5ldelete_f</code> 
    </td><td>&nbsp;</td>
    <td>
	Removes a link from a group. 
        Replaces <code>H5Gunlink</code>.
    </td>
  </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
  <tr valign="top"> 
    <td>
	<code>H5Lmove<br />h5lmove_f</code> 
    </td><td>&nbsp;</td>
    <td>
	Renames a link within an HDF5 file. 
        Replaces <code>H5Gmove</code> and <code>H5Gmove2</code>.
    </td>
  </tr>
    <tr><td colspan="3"><hr color="green" size="3" /></td></tr>
</table>
<br />
<br />



<table width="600" cellspacing="0" align="center" cellpadding="0">
    <tr valign="bottom">
        <td colspan="3" align="left" valign="bottom">
        <b>Function Listing 3. Group creation property list functions (H5P)
        </b></td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="3" /></td></tr>
    <tr valign="top"> 
        <td>
        <span class="TableHead">C Function<br />Fortran Function</span>
        </td><td>&nbsp;</td>
        <td>
        <span class="TableHead">Purpose</span>
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pall_filters_avail<br />(none)</code> 
        </td><td>&nbsp;</td>
        <td>
        Verifies that all required filters are available.
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pget_filter<br />h5pget_filter_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Returns information about a filter in a pipeline. The C function 
        is a macro: see <a href="../RM/APICompatMacros.html">&ldquo;API 
        Compatibility Macros in HDF5.&rdquo;</a>
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pget_filter_by_id<br />h5pget_filter_by_id_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Returns information about the specified filter. The C function 
        is a macro: see <a href="../RM/APICompatMacros.html">&ldquo;API 
        Compatibility Macros in HDF5.&rdquo;</a>
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pget_nfilters<br />h5pget_nfilters_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Returns the number of filters in the pipeline.
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pmodify_filter<br />h5pmodify_filter_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Modifies a filter in the filter pipeline.
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Premove_filter<br />h5premove_filter_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Deletes one or more filters in the filter pipeline.
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pset_deflate<br />h5pset_deflate_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Sets the deflate (GNU gzip) compression method and compression 
        level.
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pset_filter<br />h5pset_filter_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Adds a filter to the filter pipeline.
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pset_fletcher32<br />h5pset_fletcher32_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Sets up use of the Fletcher32 checksum filter.
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pset_fletcher32<br />h5pset_fletcher32_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Sets up use of the Fletcher32 checksum filter.
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pset_link_phase_change<br />h5pset_link_phase_change_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Sets the parameters for conversion between compact and dense groups.
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pget_link_phase_change<br />h5pget_link_phase_change_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Queries the settings for conversion between compact and dense groups. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pset_est_link_info<br />h5pset_est_link_info_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Sets estimated number of links and length of link names in a group. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pget_est_link_info<br />h5pget_est_link_info_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Queries data required to estimate required local heap or object 
        header size. 
        </td>
        </tr>
    <!-- NEW PAGE -->
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pset_nlinks<br />h5pset_nlinks_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Sets maximum number of soft or user-defined link traversals. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pget_nlinks<br />h5pget_nlinks_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Retrieves the maximum number of link traversals. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pset_link_creation_order<br />
        h5pset_link_creation_order_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Sets creation order tracking and indexing for links in a group. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pget_link_creation_order<br />
        h5pget_link_creation_order_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Queries whether link creation order is tracked and/or indexed 
        in a group. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pset_create_intermediate_group<br />
        h5pset_create_inter_group_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Specifies in the property list whether to create missing intermediate 
        groups. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pget_create_intermediate_group<br />(none)</code> 
        </td><td>&nbsp;</td>
        <td>
        Determines whether the property is set to enable creating missing 
        intermediate groups. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pset_char_encoding<br />h5pset_char_encoding_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Sets the character encoding used to encode a string. 
        Use to set ASCII or UTF-8 character encoding for object names.
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top"> 
        <td>
        <code>H5Pget_char_encoding<br />h5pget_char_encoding_f</code> 
        </td><td>&nbsp;</td>
        <td>
        Retrieves the character encoding used to create a string. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="3" /></td></tr>
</table>
<br />
<br />



<table width="600" cellspacing="0" align="center" cellpadding="0">
    <tr valign="bottom">
        <td colspan="3" align="left" valign="bottom">
        <b>Function Listing 4. Other external link functions
        </b></td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="3" /></td></tr>
    <tr valign="top"> 
        <td>
        <b>C Function<br />Fortran Function</b>
        </td><td>&nbsp;</td>
        <td>
        <b>Purpose</b>
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top">
        <td>
        <code>H5Pset/get_elink_file_cache_size</code>
        <br />
        <code>(none)</code></td><td>&nbsp;</td>
        <td>
        Sets/retrieves the size of the external link open file cache 
        from the specified file access property list. </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr valign="top">
        <td>
        <code>H5Fclear_elink_file_cache</code>
        <br />
        <code>(none)</code></td><td>&nbsp;</td>
        <td>
        Clears the external link open file cache for a file. 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="3" /></td></tr>
</table>
<br />




<SCRIPT language="JavaScript">
<!--
document.writeln ("
<a name="ProgModel">
<div align=right>
<a href="#TOP"><font size="-1">(Top)</font></a>
</div>
</a>
");
-->
</SCRIPT>

<!-- NEW PAGE -->
<a name="ProgModel">
<h3 class=pagebefore>4.5. Programming Model: Working with Groups</h3>
</a>

  <p>The programming model for working with groups is as follows:</p>

  <ol>
      <li>Create a new group or open an existing one. </li>
      <li>Perform the desired operations on the group.  </li>
      <ul>
          <li>Create new objects in the group.</li>
          <li>Insert existing objects as group members.</li>
	  <li>Delete existing members.</li>
	  <li>Open and close member objects.</li>
	  <li>Access information regarding member objects.</li>
	  <li>Iterate across group members.</li>
	  <li>Manipulate links.</li>
      </ul>
      <li>Terminate access to the group.  (Close the group.)</li>
  </ol>
 
<a name="ModelCreateGroup"> 
<h4>4.5.1 Creating a Group</h4></a>
 
  <p>
  To create a group, use <code>H5Gcreate</code>, specifying the 
  location and the path of the new group. 
  The location is the identifier of the file or the group in a file
  with respect to which the new group is to be identified.  
  The path is a string that provides wither an absolute path or a 
  relative path to the new group (see section 2.3, 
  &ldquo;<a href="#PathNames">HDF5 Path Names</a>&rdquo;).  
  A path that begins with a slash (<code>/</code>) is an absolute path
  indicating that it locates the new group from the root group of the 
  HDF5 file.  
  A path that begins with any other character is a relative path. 
  When the location is a file, a relative path is a path from that 
  file&rsquo;s root group; 
  when the location is a group, a relative path is a path from that group.</p>
  
  <p>
  The sample code in the example below creates three groups. 
  The group <code>Data</code> is created in the root directory;  
  two groups are then created in <code>/Data</code>, 
  one with absolute path, the other with a relative path.</p>
  

<table width="600" cellspacing="0" align="center">
    <tr valign="top"> 
        <td align="left">
        <hr color="green" size="3"/>
<pre>
  hid_t file;
  file = H5Fopen(....);

  group = H5Gcreate(file, "/Data", H5P_DEFAULT, H5P_DEFAULT, H5P_DEFAULT);
  group_new1 = H5Gcreate(file, "/Data/Data_new1", H5P_DEFAULT, H5P_DEFAULT, 
      H5P_DEFAULT);
  group_new2 = H5Gcreate(group, "Data_new2", H5P_DEFAULT, H5P_DEFAULT, 
      H5P_DEFAULT);
</pre>
        </td></tr>
    <tr><td><hr color="green" size="1" /></td></tr>
    <tr valign="top">
        <td align="left" >
        <b>Example 1. Creating three new groups</b>
        <hr color="green" size="3"/></td>
        </tr>
</table>
<br />

  <p>
  The third <code>H5Gcreate</code> parameter optionally specifies 
  how much file space to reserve to store the names that will 
  appear in this group.  If a non-positive value is supplied, 
  a default size is chosen.  </p>
<!-- editingComment
  <span class="editingComment"> 
      (See XXX for an explanation of performance tuning.)
      </span>
-->  

<!-- NEW PAGE -->
<h4>4.5.2 Opening a Group and Accessing an Object in that Group</h4>
  
  <p>Though it is not always necessary, it is often useful to explicitely
  open a group when working with objects in that group. Using the file 
  created in the example above, the example below illustrates the use 
  of a previously-acquired file identifier and a path relative to that 
  file to open the group <code>Data</code>.</p> 

  <p>
  Any object in a group can be also accessed by its absolute or relative path. 
  To open an object using a relative path, an application must first open 
  the group or file on which that relative path is based.  
  To open an object using an absolute path, the application can use any 
  location identifier in the same file as the target object;
  the file identifier is commonly used, but object identifier for any object 
  in that file will work.  
  Both of these approaches are illustrated in the example below. </p>
  
  <p>
  Using the file created in the examples above, 
  the example below provides sample code illustrating the use of both 
  relative and absolute paths to access an HDF5 data object.  
  The first sequence (two function calls) uses a previously-acquired 
  file identifier to open the group <code>Data</code>, and 
  then uses the returned group identifier and a relative path to open 
  the dataset <code>CData</code>.  
  The second approach (one function call) uses the same previously-acquired 
  file identifier and an absolute path to open the same dataset. </p>
  

<table width="600" cellspacing="0" align="center">
    <tr valign="top"> 
        <td align="left">
        <hr color="green" size="3"/>
<pre>
  group = H5Gopen(file, "Data", H5P_DEFAULT);
  dataset1 = H5Dopen(group, "CData", H5P_DEFAULT);
  
  dataset2 = H5Dopen(file, "/Data/CData", H5P_DEFAULT);
</pre>
</td></tr>
    <tr><td><hr color="green" size="1" /></td></tr>
    <tr valign="top">
        <td align="left" >
        <b>Example 2. Open a dataset with relative and absolute paths</b>
        <hr color="green" size="3"/></td>
        </tr>
</table>
<br />



<h4>4.5.3 Creating a Dataset in a Specific Group</h4>
  
  <p>Any dataset must be created in a particular group. 
  As with groups, a dataset may be created in a particular group 
  by specifying its absolute path or a relative path. 
  The example below illustrates both approaches to creating a 
  dataset in the group <code>/Data</code>.</p>
  
  
<table width="600" cellspacing="0" align="center">
    <tr valign="top"> 
        <td align="left">
        <hr color="green" size="3"/>
<pre>
  dataspace = H5Screate_simple(RANK, dims, NULL);
  dataset1 = H5Dcreate(file, "/Data/CData", H5T_NATIVE_INT,
                    dataspace, H5P_DEFAULT, H5P_DEFAULT, H5P_DEFAULT);

  group = H5Gopen(file, "Data", H5P_DEFAULT);
  dataset2 = H5Dcreate(group, "Cdata2", H5T_NATIVE_INT,
                    dataspace, H5P_DEFAULT, H5P_DEFAULT, H5P_DEFAULT);
</pre>
</td></tr>
    <tr><td><hr color="green" size="1" /></td></tr>
    <tr valign="top">
        <td align="left" >
        <b>Example 3. Create a dataset with absolute and relative paths</b>
        <hr color="green" size="3"/></td>
        </tr>
</table>
<br />



<!-- NEW PAGE -->
<h4>4.5.4 Closing a Group</h4>
  
  <p>To ensure the integrity of HDF5 objects and to release system 
  resources, an application should always call the appropriate 
  close function when it is through working with an HDF5 object. 
  In the case of groups, <code>H5Gclose</code> ends access to the group 
  and releases any resources the HDF5 Library has maintained 
  in support of that access, including the group identifier.  </p>
  
  <p> 
  As illustrated in the example below, all that is required for an 
  <code>H5Gclose</code> call is the group identifier acquired when 
  the group was opened; there are no relative versus absolute path 
  considerations.</p>
  
  
<table width="600" cellspacing="0" align="center">
    <tr valign="top"> 
        <td align="left">
        <hr color="green" size="3"/>
<pre>
  herr_t status;
  status = H5Gclose(group);
</pre>
        </td></tr>
    <tr><td><hr color="green" size="1" /></td></tr>
    <tr valign="top">
        <td align="left" >
        <b>Example 4. Close a group</b>
        <hr color="green" size="3"/></td>
        </tr>
</table>
<br />


  <p>
  A non-negative return value indicates that the group was successuflly 
  closed and the resources released; a negative return value indicates that
  the attempt to close the group or release resources failed.</p>

<!-- editingComment
  <span class="editingComment">  
         [ [ [ 
	 Return values have been decidely under-discussed prior to this mention. 
	 Probably ought to be mentioned with the discussion of each new function call. 
	 ] ] ]
	 </span> 
-->


<h4>4.5.5 Creating Links </h4>

  <p>As previously mentioned, every object is created in a specific group. 
  Once created, an object can be made a member of additional groups by means  
  of links created with one of the <code>H5Lcreate_*</code> functions.</p>

  <p>
  A <span class="termDefinition">link</span> is, in effect, a path 
  by which the target object can be accessed; it therefore has a 
  name which functions as a single path component. 
  A link can be removed with an <code>H5Ldelete</code> call, effectively 
  removing the target object from the group that contained the link
  (assuming, of course, that the removed link was the only link to the 
  target object in the group). </p>
  
  
  <p>
  <strong>Hard Links</strong><br />
  There are two kinds of links, <span class="termDefinition">hard links</span> 
  and <span class="termDefinition">symbolic links</span>. 
  Hard links are reference counted; symbolic links are not. 
  When an object is created, a hard link is automatically created.
  An object can be deleted from the file by removing all the hard links to it.</p>

  <p>
  Working with the file from the previous examples, 
  the code in the example below illustrates the creation of a hard link,
  named <code>Data_link</code>, in the root group, <code>/</code>, 
  to the group <code>Data</code>. 
  Once that link is created, the dataset <code>Cdata</code> can be accessed 
  via either of two absolute paths, <code>/Data/Cdata</code> or 
  <code>/Data_Link/Cdata</code>.</p>
  
  
<table width="600" cellspacing="0" align="center">
    <tr valign="top"> 
        <td align="left">
        <hr color="green" size="3"/>
<pre>
  status = H5Lcreate_hard(Data_loc_id, "Data", DataLink_loc_id, "Data_link", 
            H5P_DEFAULT, H5P_DEFAULT)

  dataset1 = H5Dopen(file, "/Data_link/CData", H5P_DEFAULT);
  dataset2 = H5Dopen(file, "/Data/CData", H5P_DEFAULT);
</pre>
        </td></tr>
    <tr><td><hr color="green" size="1" /></td></tr>
    <tr valign="top">
        <td align="left">
        <b>Example 5. Create a hard link</b> 
        <hr color="green" size="3"/></td></tr>
</table>
<br />



<!-- NEW PAGE -->
  <p>
  The example below shows example code to delete a link,
  deleting the hard link <code>Data</code> from the root group. 
  The group <code>/Data</code> and its members are still in the file, 
  but they can no longer be accessed via a path using the component 
  <code>/Data</code>.</p>
  
<table width="600" cellspacing="0" align="center">
    <tr valign="top"> 
        <td align="left">
        <hr color="green" size="3"/>
<pre>
  status = H5Ldelete(Data_loc_id, "Data", H5P_DEFAULT);

  dataset1 = H5Dopen(file, "/Data_link/CData", H5P_DEFAULT);
             /*  This call should succeed; all path component still exist*/
  dataset2 = H5Dopen(file, "/Data/CData", H5P_DEFAULT);  
             /*  This call will fail; the path component '/Data' has been deleted*/
</pre>
</td></tr>
    <tr><td><hr color="green" size="1" /></td></tr>
    <tr valign="top">
        <td align="left">
        <b>Example 6. Delete a link </b> 
        <hr color="green" size="3"/></td></tr>
</table>
<br />



  <p>
  When the last hard link to an object is deleted, the object is no longer 
  accessible. <code>H5Ldelete</code> will not prevent you from deleting 
  the last link to an object. To see if an object has only one link, 
  use the <code>H5Oget_info</code> function. If the value of the rc 
  (reference count) field in the is greater than 1, then the link can 
  be deleted without making the object inaccessible.</p>
  
  <p>The example below shows <code>H5Oget_info</code> 
  to the group originally called <code>Data</code>. </p>

  
<table width="600" cellspacing="0" align="center">
    <tr valign="top"> 
        <td align="left">
        <hr color="green" size="3"/>
<pre>
  status = H5Oget_info(Data_loc_id, object_info);
</pre>
        </td></tr>
    <tr><td><hr color="green" size="1" /></td></tr>
    <tr valign="top">
        <td align="left">
        <b>Example 7. Finding the number of links to an object</b>
        <hr color="green" size="3"/></td></tr>
</table>
<br />



  <p>It is possible to delete the last hard link to an object and not make 
  the object inaccessible. Suppose your application opens a dataset, and 
  then deletes the last hard link to the dataset. While
  the dataset is open, your application still has a connection to the 
  dataset. If your application creates a hard link to the dataset before 
  it closes the dataset, then the dataset will still be accessible.</p>
  <p>
  <strong>Symbolic Links</strong><br />
  <span class="termDefinition">Symbolic links</span> are objects that assign a name 
  in a group to a path. 
  Notably, the target object is determined only when the symbolic link is accessed, 
  and may, in fact, not exist.  Symbolic links are not reference counted, 
  so there may be zero, one, or more symbolic links to an object. </p>

  <p>
  The major types of symbolic links are soft links and external links. Soft 
  links are symbolic links within an HDF5 file and are created with the 
  <code>H5Lcreate_soft</code> function. Symbolic links to 
  objects located in external files, in other words external links, can be 
  created with the <code>H5Lcreate_external</code> function. Symbolic links 
  are removed with the <code>H5Ldelete</code> function.</p>
  

  <p>
  The example below shows the creating two soft links to the 
  group <code>/Data</code>. </p>
  
<!-- NEW PAGE -->
<table width="600" cellspacing="0" align="center">
    <tr valign="top"> 
        <td align="left">
        <hr color="green" size="3"/>
<pre>
  status = H5Lcreate_soft(path_to_target, link_loc_id, "Soft2", H5P_DEFAULT, H5P_DEFAULT);
  status = H5Lcreate_soft(path_to_target, link_loc_id, "Soft3", H5P_DEFAULT, H5P_DEFAULT);

  dataset = H5Dopen(file, "/Soft2/CData", H5P_DEFAULT);
</pre>
        </td></tr>
    <tr><td><hr color="green" size="1" /></td></tr>
    <tr valign="top">
        <td align="left">
        <b>Example 8. Create a soft link </b> 
        <hr color="green" size="3"/></td>
        </tr>
</table>
<br />



  <p>
  With the soft links defined in the example above, the dataset <code>CData</code> 
  in the group <code>/Data</code> can now be opened with any of the names 
  <code>/Data/CData</code>, <code>/Soft2/CData</code>, or 
  <code>/Soft3/CData</code>.</p>

  <p>In release 1.8.7, a cache was added to hold the names of files 
  accessed via external links. The size of this cache can be changed 
  to help improve performance. For more information, see the entry 
  in the <a href="../RM/RM_H5Front.html" target="RMwindow">
  <cite>HDF5 Reference Manual</cite></a> for the 
  <code>H5Pset_elink_file_cache_size</code> function call. 
  </p>


  
  <p>
  <strong>Note Regarding Hard Links and Soft Links</strong><br />
  Note that an object&rsquo;s existence in a file is governed by the presence
  of at least one hard link to that object.
  If the last hard link to an object is removed, the object is removed 
  from the file and any remaining soft link becomes a 
  <span class="termDefinition">dangling link</span>, a link whose target
  object does not exist.</p>
  
  <p>
  <strong>Moving or Renaming Objects, and a Warning</strong></p>
  
  <p>An object can be renamed by changing the name of a link to it with 
  <code>H5Lmove</code>. 
  This has the same effect as creating a new link with the new name and 
  deleting the link with the old name.</p>
  

  <p>
  Exercise caution in the use of <code>H5Lmove</code>
  and <code>H5Ldelete</code> as these functions each include a step that 
  unlinks a pointer to an HDF5 object. 
  If the link that is removed is on the only path leading to an HDF5 object, 
  that object will become permanently inaccessible in the file. </p>

  <p>Scenario 1: Removing the Last Link</p>
  <p>To avoid removing the last link to an object or otherwise making an 
  object inaccessible, use the <code>H5Oget_info</code> 
  function. Make sure that the value of the reference count field (rc) is 
  greater than 1. 
  </p>

  <p>Scenario 2: Moving a Link that Isolates an Object</p>
  <p>Consider the following example: assume that the group <code>group2</code> 
  can only be accessed via the following path, where <code>top_group</code> 
  is a member of the file&rsquo;s root group: </p>
  
  <code>/top_group/group1/group2/</code>

  <p>
  Using <code>H5Lmove</code>, <code>top_group</code> 
  is renamed to be a member  of <code>group2</code>. At this point, 
  since <code>top_group</code> was the only route from the root group to 
  <code>group1</code>, there is no longer a path by which one can access 
  <code>group1</code>, <code>group2</code>, or any member datasets. 
  And since <code>top_group</code> is now a member of <code>group2</code>,
  <code>top_group</code> itself and any member datasets have thereby also 
  become inaccessible.</p>
  

  
  
  <b>Mounting a File</b>
  <p>An external link is a permanent connection between two files. A 
  temporary connection can be set up with the <code>H5Fmount</code> 
  function. For more information, see the 
  &ldquo;<a href="08_TheFile.html">The HDF5 File</a>&rdquo; chapter, 
  and the <code>H5Fmount</code> function in the 
  <a href="../RM/RM_H5Front.html"><cite>HDF5 Reference Manual</cite></a>.</p>
  



<SCRIPT language="JavaScript">
<!--
document.writeln ("
<a name="DiscoverInfo">
<div align=right>
<a href="#TOP"><font size="-1">(Top)</font></a>
</div>
</a>
");
-->
</SCRIPT>




<a name="DiscoverInfo">
<h4 class=pagebefore>4.5.6 Discovering Information about Objects</h4>
</a>

  <p>There is often a need to retrieve information about a particular object.
  The <code>H5Lget_info</code> and <code>H5Oget_info</code> functions fill 
  this niche by returning a description of the object or link in an 
  <code>H5L_info_t</code> or <code>H5O_info_t</code> structure.</p>
  
  <!-- <p> ??????? the rest of section 6 has been commented out </p> -->
  
  <!-- start of a section of 6 that has been commented out
  These structures contains the following information: </p>
  
  <p> ??????? what about the new structures? do they also contain the following information? ??????? </p>
  <p> ??????? MEE: because more work needs to be done to translate the old version to the new version, I think we should comment out most of this section starting with
  the sentence above "These structures contain the following information:" and including everything down to the start of the next section. The next section is 
  chapter 7 "Discovering Objects in a Group". ??????? </p>
  <ul> 
      <li>The file and object identifiers, which together provide unique 
          identification of the object
-->
<!-- end of a section of 6 that has been commented out -->          
<!-- editingComment
	  <span class="editingComment"><br />
	        [ [ [ 
		Why are there 2 of each? 
		] ] ]
	        </span>
-->
<!-- start of another section of 6 that has been commented out -->
<!--
      <li>The number of references, or hard links, to the object
      <li>The object type: group, dataset, named datatype, or soft link, 
          returned as <code>H5G_GROUP</code>, <code>H5G_DATASET</code>, 
	  <code>H5G_TYPE</code>, or <code>H5G_LINK</code>, respectively
      <li>The modification time (datasets only)
      <li>A link length value; the length of the path name of a symbolic 
          link's target object 
	  (returned for symolic links, or soft links, only)
  </ul>
  
  <p>
  The <code>H5G_stat_t</code> structure specification and the 
  <code>H5Gget_objinfo</code> function signature appear in Figure 17.
  The <code>H5G_stat_t</code> structure elements are as listed above.
  The <code>H5Gget_objinfo</code> function parameters are used follows:
  <ul>
      <li><code><em>loc_id</em></code> specifies the object for which 
          information being sought.
      <li>A path to the object is returned in <code><em>name</em></code>.
-->
<!-- end of a section of 6 that has been commented out -->      
          <!--  editingComment
	        "A path"  -- Per Quincey, this tries to be the first path, 
	        but it becomes problematic when an object has moved around much.
	  -->
<!-- beginning of a section of 6 that has been commented out
          <li><code><em>follow_link</em></code> is a Boolean value specifying
          whether to follow a soft link and open the target object 
	  (<code>TRUE</code>) or not (<code>FALSE</code>).
      <li>The <code>H5G_stat_t</code> struct is returned in the
          <code><em>statbuf</em></code> buffer.   
  </ul> 
    
  <p>
<table x-use-null-cells
		width="600"
		cellspacing="0"
                class="fullImgTable"
		align="center">
		<tr valign="top">
<td class="fullImgTableImgCell">
<pre>
  typedef struct H5G_stat_t {
                             unsigned long fileno[2];
                             unsigned long objno[2];
                             unsigned nlink;
                             int type;
                             time_t mtime; 
                             size_t linklen;
                          } H5G_stat_t

  herr_t H5Gget_objinfo(hid_t loc_id, const char *name, hbool_t follow_link, H5G_stat_t *statbuf )
</pre>
</td></tr>
<tr>
<td align=center class="fullImgTableCapCell">
    <span class="figureNumber">Figure 17. 
    The <code>H5G_stat_t</code> struct specification and 
    the <code>H5Gget_objinfo</code> function signature</span>
</td></tr>
</table>
-->
<!-- end of another section of 6 that has been commented out -->
<!-- NEW <> PAGE -->
  <!-- part of section 6 that is commented out <p>
  Figure 18 provides a code example that prints the local paths 
  to the members of a group, following a soft link when it is found.    
  
  
  <p>
<table x-use-null-cells
		width="600"
		cellspacing="0"
                class="fullImgTable"
		align="center">
		<tr valign="top">
<td class="fullImgTableImgCell">
<pre><code>
    H5G_stat_t statbuf;

    H5Gget_objinfo(loc_id, name, FALSE, &amp;statbuf);
    switch (statbuf.type) {
    case H5G_GROUP: 
         printf(" Object with name %s is a group \n", name);
         break;
    case H5G_DATASET: 
         printf(" Object with name %s is a dataset \n", name);
         break;
    case H5G_TYPE: 
         printf(" Object with name %s is a named datatype \n", name);
         break;
    case H5G_LINK: 	
        lname = (char *)malloc(statbuf.linklen);

         H5Gget_linkval(loc_id, name, statbuf.linklen, lname);
         printf(" Object with name %s is a link to %s \n", name, lname);
         H5Gget_objinfo(loc_id, name, TRUE, &amp;statbuf);
         switch (statbuf.type) {
             case H5G_GROUP: 
                 printf(" Target of link name %s is a group \n", name);
                 break;
            case H5G_DATASET: 
                 printf(" Target of link name %s is a dataset \n", name);
                 break;
            case H5G_TYPE: 
                 printf(" Target of link name %s is a named datatype \n", name);
                 break;
           case H5G_LINK: 
                printf(" Target of link name %s is a soft link \n", name);
                break;
           default:
              printf(" Unable to identify target ");
           }
          break;
    default:
         printf(" Unable to identify an object ");
    }
</code></pre>
</td></tr>
<tr>
<td align=center class="fullImgTableCapCell">
    <span class="figureNumber">Figure 18. 
    Printing a specified object's name and type and, 
    in the case of a link, opening the target object</span>
</td></tr>
</table>
  <p> ??????? H5Gget_linkval is mentioned above. it was deprecated in 1.8. this section above needs to be rewritten. ??????? </p>

  
  --> 
  <!-- end of section 6 text that is commented out -->
  
<SCRIPT language="JavaScript">
<!--
document.writeln ("
<a name="DiscoverGrObjs">
<div align=right>
<a href="#TOP"><font size="-1">(Top)</font></a>
</div>
</a>
");
-->
</SCRIPT>


<a name="DiscoverGrObjs">
<h4 class=pagebefore>4.5.7 Discovering Objects in a Group</h4>
</a>

  <!-- the paragraph below no longer mentions the previously included alternate way because the alternate way used deprecated functions. --> 
  <!-- the functions that replace the deprecated functions could be included if the text is edited. -->
  <p>To examine all the objects or links in a group, 
  use the <code>H5Literate</code> or <code>H5Ovisit</code> functions to 
  examine the objects, and use 
  the <code>H5Lvisit</code> function to examine the links.
  <code>H5Literate</code> is useful both with a single group and 
  in an iterative process that examines an entire file 
  or section of a file (such as the contents of a group or the contents 
  of all the groups that are members of that group)
  and acts on objects as they are encountered. <code>H5Ovisit</code> 
  recursively visits all objects accessible from a specified object. 
  <code>H5Lvisit</code> recursively visits all the links starting from a 
  specified group. </p>
   
  <!-- start of commenting out the rest of section 7. the commented out parts use deprecated functions to look at objects. this section can be used if the deprecated functions
  are replaced and the text edited.
  
  <p>
  An alternative approach is to determine the number of objects
  in a group then approach them one at a time.  
  This is accomplished with the functions
  <code>H5Gget_num_objs</code>,
  <code>H5Gget_objname_by_idx</code>, and
  <code>H5Gget_objtype_by_idx</code>.
  
  <p>??????? the three H5G functions above were deprecated in 1.8. this section needs to be rewritten ??????? </p>
  
  
  <p>
  <code>H5Gget_num_objs</code> retrieves the number of objects,
  say <code><em>n</em></code>, in the group.  
  The values from <code>0</code> through <code><em>n</em> - 1</code>
  can then be used as indices to access the members of the group.
  For example, 
  an index value of <code>0</code> identifies the first member,
  an index value of <code>1</code> identifies the second member, and
  an index value of <code><em>n</em> - 1</code> identifies the last member.
  (Note that HDF5 objects do not have permanent indices; 
  these values are strictly transient and may be different each time a 
  group is opened.)
  
  <p>
  Using the index described above, the name and object type can
  be retrieved using <code>H5Gget_objname_by_idx</code> and
  <code>H5Gget_objtype_by_idx</code>, respectively.
  With the name and object type, an application can proceed to
  operate as necessary on all or selected group members.
-->
<!-- end of commenting out of section 7 -->

<!--  editingComment
      Need examples (and maybe illustration?).
-->
  

<SCRIPT language="JavaScript">
<!--
document.writeln ("
<a name="DiscoverAll">
<div align=right>
<a href="#TOP"><font size="-1">(Top)</font></a>
</div>
</a>
");
-->
</SCRIPT>


<a name="DiscoverAll">
<h4 class=pagebefore>4.5.8 Discovering All the Objects in the File</h4>
</a>

  <p>The structure of an HDF5 file is 
  <span class="termDefinition">self-describing</span>, 
  meaning that an application can navigate an HDF5 file 
  to discover and understand all the objects it contains. 
  This is an iterative process wherein the structure is traversed as a graph, 
  starting at one node and recursively visiting linked nodes. 
  To explore the entire file, the traversal should start at the root group.</p>
  
  <!-- the rest of section 8 describes how to use H5Giterate. H5Literate replaces H5Giterate. the parameters aren't exactly the same, so I don't want to 
  just do a 1:1 replacing of old with new. so, the rest of this section should be commented out.-->
  <!-- start commenting out part of section 8 
  <p>
  The function <code>H5Giterate</code>, used to discover the members of 
  a group, is the key to the discovery process. 
  An application calls <code>H5Giterate</code> with a pointer to a 
  callback function (see Figure 19). 
  The HDF5 Library iterates through the group specified by the 
  <code>loc_id</code> and <code>name</code> parameters, 
  calling the callback function once for each group member. 
  The callback function must have the signature defined by 
  <code>H5G_iterate_t</code>. 
  When invoked, the arguments to the callback function are 
      the group being iterated, 
      the group member&rsquo;s name (the object name), and 
      a pointer set by the user program. 
  The callback function is part of the application, 
  so it can execute any actions the program requires 
  to discover and store information about the objects.</p>



  
  <p>
<table x-use-null-cells
		width="600"
		cellspacing="0"
                class="fullImgTable"
		align="center">
		<tr valign="top">
<td class="fullImgTableImgCell">
<pre>
  typedef herr_t (*H5G_iterate_t)(hid_t group_id, const char *member_name, 
      void *operator_data);
  H5Giterate(hid_t loc_id, const char * name, int *idx, H5G_iterate_t operator, 
      void *operator_data );
</pre>
</td></tr>
<tr>
<td align=center class="fullImgTableCapCell">
    <span class="figureNumber">Figure 19. </span>
</td></tr>
</table>

  <p>
  Note that the <code>H5Giterate</code> function follows the links 
  from a single group and that 
  these links correspond to the components in a path name. 
  To iterate over an entire substructure, <code>H5Giterate</code> must be called
  recursively on every member of the original group that turns out to also
  be a group.
  To iterate over an entire file, the first call to <code>H5Giterate</code> 
  must iterate over the root group; subsequent calls to <code>H5Giterate</code> 
  must then iterate over every subsequent group.
  -->
  <!-- end commented out part of section 8 -->
<!-- NEW <> PAGE -->
<!-- start commenting out part of section 8
  <p>
  Figure 20 illustrates the relationship between the calling module
  of the application, the callback function (<code>do_obj</code>), 
  and calls to the HDF5 Library.  
  In this diagram, &ldquo;Global Variables and Functions&rdquo; 
  symbolizes the fact that the callback function executes as part 
  of the application, and may therefore call functions and 
  update data structures to describe the file and its objects.
  
  <p>
<table x-use-null-cells
		width="600"
		cellspacing="0"
                class="fullImgTable"
		align="center">
  <tr valign="top"> 
    <td class="fullImgTableImgCell" align="center">
    <img src="Images/groups_fig20.JPG">
</td></tr>
<tr>
<td align=center class="fullImgTableCapCell">
    <span class="figureNumber">Figure 20. 
    Relationships between a calling module, the callback function,
    and the callback function's calls back to the HDF5 library</span>
</td></tr>
</table>
-->
<!-- end commented out part of section 8 -->

<!-- NEW <> PAGE -->

<!-- start commenting out part of section 8
  <p>
  Figure 21 illustrates the sequence of events precipitated by an 
  <code>H5Giterate</code> call. 
  <ol>
    <li>The application first calls <code>H5Giterate</code>, 
        passing a pointer to a callback function 
	(<code>do_obj</code> in the figure).
        Note that the callback function is part of the application.
    <li>The HDF5 Library then iterates through the members of the group, 
        calling the callback function in the application once for each
	group member.
    <li>When the iteration is complete, the <code>H5Giterate</code> 
        call returns to the calling application.
  </ol>
  
  <p> 
<table x-use-null-cells
		width="600"
		cellspacing="0"
                class="fullImgTable"
		align="center">
  <tr valign="top"> 
    <td class="fullImgTableImgCell" align="center">
    <img src="Images/groups_fig21.JPG">
</td></tr>
<tr>
<td height="24" align=center class="fullImgTableCapCell"> 
    <span class="figureNumber">Figure 21. </span>
</td></tr>
</table>

-->
<!-- end commented out part of section 8 -->

<!-- NEW <> PAGE -->
<!-- start commenting out part of section 8
  <p>
  Figure 22 shows the sequence of calls involved in one iteration of a 
  callback function that employs the HDF5 function <code>H5Gget_objinfo</code> 
  to discover properties of the object that is the subject of the current step 
  of the iteration (e.g., the object&rsquo;s type and reference count). 
  The HDF5 Library then calls the application&rsquo;s callback function 
  <code>do_obj()</code>, which in turn calls the HDF5 Library to get the 
  object information. 
  The callback function can process the information as needed, 
  accessing any function or data structure of the application program, 
  and it can call the HDF5 Library again to, for example, 
  iterate through a group member that is itself a group.
  
  <p>
<table x-use-null-cells
		width="600"
		cellspacing="0"
                class="fullImgTable"
		align="center">
  <tr valign="top"> 
    <td class="fullImgTableImgCell" align="center">
    <img src="Images/groups_fig22.JPG">
</td></tr>
<tr>
    <td height="24" align=center class="fullImgTableCapCell"> 
    <span class="figureNumber">Figure 22. </span> </td>
  </tr>
</table>

-->
<!-- end commented out part of section 8 -->

<!-- NEW <> PAGE -->
<!-- start commenting out part of section 8
  <p>
  Over the course of a successful <code>H5Giterate</code> call, 
  the HDF5 Library will call the application&rsquo;s callback function 
  once for each member of the group, as illustrated in Figure 23. 
  At each iteration, the callback function must return a status which
  implies a subsequent course of action: <br />
  &nbsp;&nbsp;&nbsp;&nbsp;
      <code>1&nbsp;&nbsp;</code>
      Continue iterating.<br />
  &nbsp;&nbsp;&nbsp;&nbsp;
      <code>0&nbsp;&nbsp;</code>
      Stop iterating and return to the caller.<br />
  Once the iteration has been completed, <code>H5Giterate</code> returns 
  to the calling application.</p>

  <p>
<table x-use-null-cells
		width="600"
		cellspacing="0"
                class="fullImgTable"
		align="center">
  <tr valign="top"> 
    <td class="fullImgTableImgCell" align="center">
    <img src="Images/groups_fig23.JPG">
</td></tr>
<tr>
    <td height="24" align=center class="fullImgTableCapCell"> 
    <span class="figureNumber">Figure 23. </span> </td>
  </tr>
</table>

  <p>
  The overall sequence of calls can become quite complex, especially when 
  the callback function in turn calls the HDF5 Library. 
  Figure 24 provides a sequence diagram for a case similar to the simple
  case described above: 
  <ol>
      <li>The calling program invokes <code>H5Giterate</code> on a group,
      <li>which calls <code>do_obj</code> once for each group members
          (three group members in this case).
      <li>The <em>do_obj</em> callback function in turn calls 
          <code>H5Gget_objinfo</code> each time it is invoked to discover 
	  information about each object.
  </ol> 
    
  <p>
<table x-use-null-cells
		width="600"
		cellspacing="0"
                class="fullImgTable"
		align="center">
  <tr valign="top"> 
    <td class="fullImgTableImgCell" align="center">
    <img src="Images/groups_fig24.JPG">
</td></tr>
<tr>
    <td height="24" align=center class="fullImgTableCapCell"> 
    <span class="figureNumber">Figure 24. </span> </td>
  </tr>
</table>

-->
<!-- end commented out part of section 8 -->

<!-- NEW <> PAGE -->
<!-- start commenting out part of section 8
  <p>
  Recursively iterating through the members of every group will result in 
  visiting an object once for each link to it. 
  This may result in visiting an object more than once. 
  The calling application must be prepared to recognize this case and 
  handle it appropriately.  
  If an action should be undertaken only once per object, 
  the application must make sure that it does not repeat the action for an 
  object with two links. 
  For example, if the objects are being copied, it is important that 
  an object with two names be copied once, not twice.  
  Figure 25 illustrates this case.
  
  <p>
<table x-use-null-cells
		width="600"
		cellspacing="0"
                class="fullImgTable"
		align="center">
  <tr valign="top"> 
    <td colspan="2" align="center" class="fullImgTableImgTopCell"> 
      <img src="Images/groups_fig25_a.JPG"><br />
      a) The required action is to copy all the objects from one file 
      to another.</td>
  </tr>
  <tr valign="top"> 
    <td align="center" class="fullImgTableImgBottomCell"> 
      <img src="Images/groups_fig25_b.JPG" align="left">      
    </td>
    <td align="center" class="fullImgTableImgBottomCell"> 
      <img src="Images/groups_fig25_c.JPG" align="right">
    </td>
  </tr>
  <tr>
    <td align="center">
	  b) A shared dataset should not be copied twice.
	</td>
	<td align="center">
	  c) A shared dataset should be copied once and 
	  the apppropriate link should be created.
	</td>
  </tr>
  <tr> 
    <td height="24" colspan="2" align=center class="fullImgTableCapCell"> 
    <span class="figureNumber">Figure 25. </span> 
    </td>
  </tr>
</table>

-->
<!-- end commented out part of section 8 -->


  
<!--
<table x-use-null-cells
		width="600"
		cellspacing="0"
                class="fullImgTable"
		align="center">
  <tr valign="top"> 
    <td class="fullImgTableImgCell" align="center">
    <img src="Images/groups_fig21.JPG">
</td></tr>
<tr>
    <td height="24" align=center class="fullImgTableCapCell"> 
    <span class="figureNumber">Figure 26. </span> </td>
  </tr>
</table>
-->

<!-- editingComment  Revisit right-alignment of following table. 
     It's centered for now simply because right-alignment yields an 
     over-write that I don't have time to fix right now.   
     Remove the width definition at that point.                  -->
     
     <!-- start commenting out part of section 8
<table x-use-null-cells
		cellspacing="0"
		width="600"
		align="center">
  <tr valign="top"> 
    <td class="fullImgTableImgCell" align="center">
    <img src="Images/groups_fig26.JPG">
</td></tr>
<tr>
    <td height="24" align=center class="fullImgTableCapCell"> 
    <span class="figureNumber">Figure 26. </span> </td>
  </tr>
</table>

  There is a second important case when the twice-visited member is a group. 
  Any group with more than one link to it can potentially be part of a 
  circular path. 
  I.e., recursively iterating through member groups may eventually bring the 
  the iteration back to the current group and may generate an infinite path
  within the file&rsquo;s linked structure.
  To embark upon the resulting infinite iteration would clearly be unacceptable
  in the general case. 
  Figure 26 illustrates an HDF5 file with such potential.
    
  <p>
  In such a case, the callback function should check the reference count in 
  the <code>H5G_stat_t</code> buffer as returned by <em>H5Gget_objinfo</em>. 
  If the count is greater than one, there is more than one path to 
  the object in question and it may be in a loop; 
  the program should act accordingly. 
  For example, it may be necessary to construct a global table of all the 
  objects visited. 
  Note that the object&rsquo;s name is not unique, but the full path and the
  object number (found in the above-mentioned <code>H5G_stat_t</code> buffer) 
  are unique within an individual HDF5 file.
  
-->
<!-- end commented out part of section 8 -->

  
<SCRIPT language="JavaScript">
<!--
document.writeln ("
<a name="Examples">
<div align=right>
<a href="#TOP"><font size="-1">(Top)</font></a>
</div>
</a>
");
-->
</SCRIPT>
<br />
<!-- NEW PAGE -->
<a name="Examples">
<h3 class=pagebefore>4.6. Examples of File Structures</h3></a>


  <p>This section presents several samples of HDF5 file structures.</p>
  
  

<table width="600" cellspacing="0" align="center">
    <tr><td colspan="3"><hr color="green" size="3" /></td></tr>
    <tr valign="top"> 
        <td align="center"> 
        <img src="Images/groups_fig27_a.JPG">
        </td>
        <td align="center" valign="top">&nbsp;&nbsp;</td>
        <td align="center">
        <img src="Images/groups_fig27_b.JPG"> 
        </td>
        </tr>
    <tr>
        <td align="center" width="50%">
        a) The file contains three groups: 
        the root group, <code>/group1</code>, and <code>/group2</code>.
        </td>
        <td align="center" valign="top">&nbsp;&nbsp;</td>
        <td align="center" width="50%">
        b) The dataset <code>dset1</code> (or <code>/group1/dset1</code>) 
        is created in <code>/group1</code>.
        </td> 
        </tr>
    <tr valign="top"> 
        <td align="center"> 
        <img src="Images/groups_fig27_aa.JPG">
        </td>
        <td align="center" valign="top">&nbsp;&nbsp;</td>
        <td align="center">
        <img src="Images/groups_fig27_bb.JPG"> 
        </td>
        </tr>
    <tr> 
        <td align="center" valign="top">
        c) A link named <code>dset2</code> to the same dataset 
        is created in <code>/group2</code>. 
        </td>
        <td align="center" valign="top">&nbsp;&nbsp;</td>
        <td align="center">
        d) The link from <code>/group1</code> to <code>dset1</code> is removed. 
        The dataset is still in the file, but can be accessed only as 
        <code>/group2/dset2</code>.
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr> 
        <td colspan="3" align="left"> 
        <b>Figure 9. Some file structures</b></td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="3" /></td></tr>
</table>
<br />


<!-- NEW PAGE -->
  <p>
  The figure above shows examples of the structure of a file with three groups 
  and one dataset. The file in Figure 9a contains three groups: 
  the root group and two member groups. 
  In Figure 9b, the dataset <code>dset1</code> has been created 
  in <code>/group1</code>. 
  In Figure 9c, a link named <code>dset2</code> from <code>/group2</code> 
  to the dataset has been added. 
  Note that there is only one copy of the dataset; 
  there are two links to it and it can be accessed either as 
  <code>/group1/dset1</code> or as <code>/group2/dset2</code>.</p>
  
<p>

  Figure 9d above illustrates that one of the two links to the dataset 
  can be deleted. 
  In this case, the link from <code>/group1</code> has been removed.  
  The dataset itself has not been deleted; it is still in the file 
  but can only be accessed as <code>/group1/dset2</code>.</p>
  
  
<!-- NEW PAGE -->
<table width="600" cellspacing="0" align="center">
    <tr><td colspan="3"><hr color="green" size="3" /></td></tr>
    <tr valign="top"> 
        <td align="center"> 
        <img src="Images/groups_fig28_a.JPG">
        </td>
        <td align="center" valign="top">&nbsp;&nbsp;</td>
        <td align="center">
        <img src="Images/groups_fig28_b.JPG"> 
        </td>
        </tr>
    <tr>
        <td align="center" width="50%">
        a) <code>dset1</code> has two names: 
        <code>/group2/dset1</code> and <code>/group1/GXX/dset1</code>.
        </td>
        <td>&nbsp;&nbsp;</td>
        <td align="center" width="50%">
        b) <code>dset1</code> again has two names: 
        <code>/group1/dset1</code> and <code>/group1/dset2</code>.
        </td> 
        </tr>
    <tr valign="top"> 
        <td align="center"> 
        <img src="Images/groups_fig28_c.JPG">
        </td>
        <td>&nbsp;&nbsp;</td>
        <td align="center">
        <img src="Images/groups_fig28_d.JPG"> 
        </td>
        </tr>
    <tr> 
        <td align="center" valign="top">
        c) <code>dset1</code> has three names: 
        <code>/group1/dset1</code>, <code>/group2/dset2</code>, 
        and <code>/group1/GXX/dset2</code>.
        </td>
        <td align="center" valign="top">&nbsp;&nbsp;</td>
        <td align="center">
        d) <code>dset1</code> has an infinite number of available path names.
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr> 
        <td colspan="3" align="left"> 
        <b>Figure 10. More sample file structures</b> 
        </td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="3" /></td></tr>
</table>
<br />


<!-- NEW PAGE -->
  <p>
  The figure above illustrates loops in an HDF5 file structure. 
  The file in Figure 10a contains three groups and a dataset;
  <code>group2</code> is a member of the root group and of the 
  root group&rsquo;s other member group, <code>group1</code>. 
  <code>group2</code> thus can be accessed by either of two paths: 
  <code>/group2</code> or <code>/group1/GXX</code>. 
  Similarly, the dataset can be accessed either as 
  <code>/group2/dset1</code> or as <code>/group1/GXX/dset1</code>.</p>

  <p>
  Figure 10b illustrates a different case: the dataset is a 
  member of a single group but with two links, or names, in that group. 
  In this case, the dataset again has two names,
  <code>/group1/dset1</code> and <code>/group1/dset2</code>.</p>
  
  

  <p>In Figure 10c, the dataset <code>dset1</code> is a member of two groups, 
  one of which can be accessed by either of two names. 
  The dataset thus has three path names: <code>/group1/dset1</code>, 
  <code>/group2/dset2</code>, and <code>/group1/GXX/dset2</code>. </p>
  
  <p>
  And in Figure 10d, two of the groups are members of 
  each other and the dataset is a member of both groups. 
  In this case, there are an infinite number of paths to the dataset 
  because <code>GXX</code> and <code>GYY</code> can be traversed 
  any number of times on the way from the root group, <code>/</code>, 
  to the dataset.
  This can yield a path name such as 
  <code>/group1/GXX/GYY/GXX/GYY/GXX/dset2</code>.</p>

  
<!-- NEW PAGE -->
<table width="600" cellspacing="0" align="center">
    <tr><td colspan="3"><hr color="green" size="3" /></td></tr>
    <tr valign="top"> 
        <td align="center"> 
        <img src="Images/groups_fig29_a.JPG"></td>
        <td align="center" valign="top">&nbsp;&nbsp;</td>
        <td align="center">
        <img src="Images/groups_fig29_b.JPG"></td>
        </tr>
    <tr>
        <td align="center" valign="top" width="48%">
        a) The file contains only hard links.</td>
        <td>&nbsp;&nbsp;</td>
        <td align="center" valign="top" width="48%">
        b) A soft link is added from <code>group2</code> 
        to <code>/group1/dset1</code>.</td> 
        </tr>
    <tr valign="top"> 
        <td align="center"> 
        <img src="Images/groups_fig29_c.JPG"></td>
        <td>&nbsp;&nbsp;</td>
        <td align="center">
        <img src="Images/groups_fig29_d.JPG"></td>
        </tr>
    <tr> 
        <td align="center" valign="top">
        c) A soft link named <code>dset3</code> is added with a target 
        that does not yet exist.</td>
        <td align="center" valign="top">&nbsp;&nbsp;</td>
        <td align="center" valign="top">
        d) The target of the soft link is created or linked.</td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="1" /></td></tr>
    <tr> 
        <td colspan="3" align="left">
        <b>Figure 11. Hard and soft links</b></td>
        </tr>
    <tr><td colspan="3"><hr color="green" size="3" /></td></tr>
</table>
<br />




<!-- NEW PAGE -->
  <p>
  The figure above takes us into the realm of soft links.
  The original file, in Figure 11a, contains only three hard links.
  In Figure 11b, a soft link named <code>dset2</code> from 
  <code>group2</code> to <code>/group1/dset1</code> has been created, 
  making this dataset accessible as <code>/group2/dset2</code>.</p>
  
  <p>
  In Figure 11c, another soft link has been created in <code>group2</code>.  
  But this time the soft link, <code>dset3</code>, points to a target object 
  that does not yet exist.  
  That target object, <code>dset</code>, has been added in Figure 11d 
  and is now accessible as either <code>/group2/dset</code> or
  <code>/group2/dset3</code>.</p>
   

<SCRIPT language="JavaScript">
<!--
document.writeln ("
<a name="Appendix">
<div align=right>
<a href="#TOP"><font size="-1">(Top)</font></a>
</div>
</a>
");
-->
</SCRIPT>

<!-- editingComment -- Removed until we can make sure it's (1) finished and (2) right.

<h3 class=pagebefore>10. Appendix:  Mapping HDF5 to a Graph</h3>

<dir>

  <span class="editingComment">
        [ [ [
	Unless someone says it ought to be otherwise, 
	this section will be commented out for this release.
	] ] ]
	</span>
  <p>{<em>Is this material wanted?  It will take some effort to flesh this out 
  and make sure it is correct.</em>}</p>
  
<table x-use-null-cells
		class="ColumnTable"
		width="600"
		cellspacing="0"
		align="center">
  <tr valign="top"> 
    <td class="ColumnHdr"> 
        <p><span class="TableHead">Box 1:  An HDF5 file can be mapped to a 
	rooted directed graph.</span>	
	<p>A rooted, directed graph can be defined as a 
	set: G = {V(G), A(G), <em>root</em> },</p>
	
        <dir>
	<p>V(G) = the set of vertices
	<br />A(G) = the set of arcs	
	<p>The graph is directed. By definition <em>a</em> &#949; A(G): 
	<em>a</em> = (<em>s, d</em>), for some source vertex <em>s</em> 
	in V(G) and destination vertex <em>d</em> &#949; V(G).	
	<p><em>root</em> &#949; V(G), <em>root</em> is a distinguished node.
	</dir>
	
	<p>HDF5 can be mapped to this graph:
	
	<dir>
	<p>An HDF5 file is a graph: {V(G), A(G), <em>root</em>}
	<p>V(G) = { Named Objects } = { Datasets Groups Named Datatypes }
	<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Vertices (nodes) are labeled with <em>object ids</em>.
	<br />A(G) = { hard links ]
	<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Arcs are labeled with <em>path components</em>.
	<p>The root group is the <em>root</em> vertex. The root vertex is distinguished by the special path name, "/". By convention, the root group has in-degree of 1.
	</dir>
	
	<p>Some properties of the HDF5 file graph:
	<p>1. The HDF5 file is a connected graph.
	
	<dir>
	<p>a) Every node (vertex) must have an in-degree of 1.
	<p>b) When a link is deleted, if the in-degree of the node becomes 0, the node is permanently inaccessible and may be deleted.
	</dir>
	
	<p>2. A Group may have out-degree 0.
	<p>3. A Dataset or Named Datatype has an out-degree = 0.
	<p>4. The HDF5 file may contain loops, cycles, and circuits.
	
	<dir>
	<p>A loop is an arc with the same source and destination: <em>a</em> = (<em>v, v</em>).
	<p>A <em>path</em> is a sequence of arcs, { <em>a&amp;sub1;, a&amp;sub2;, ... </em>}, such that the source of each arc is the destination of the previous arc, except for the first and last arc.
	<p>A <em>circuit</em> is a path for which the last vertex is the same as the first vertex.
	<p>If the graph is considered undirected, so that:
	<br />&nbsp;&nbsp;&nbsp;For any <em>a&amp;sub1;</em> = (<em>v, w</em>), and <em>a&amp;sub2;</em> = (<em>w, v</em>), <em>w</em>, <em>v</em> &#949; V(G) <em>a&amp;sub1;</em> = <em>a&amp;sub2;</em>.
	<p>....{finish this...}
	</dir>	
    </td>
</table>

<br />

<table x-use-null-cells
		class="ColumnTable"
		width="600"
		cellspacing="0"
		align="center">
  <tr valign="top"> 
    <td class="ColumnHdr"> 
        <p><span class="TableHead">Box 2: Applying graph algorithms to HDF5</span>
	<p>It follows from the observation that an HDF5 can be mapped to a rooted directed graph, that graph algorithms can be applied to the structure of the HDF5 file. For example, the objects of the HDF5 file can be visited by "traversing" the graph.
	<h4><em>Algorithm 1: Depth First Traversal</em></h4>
	<pre>
	      visit_df (Group g) {
                 process (g);  // a pre-order traversal
                 for all m in g.members() {
                         if (m is a group) {
                                  visit_df(m);  // recur
                         } else {
                                 process (m);  //  m is a dataset or named datatype
                         }
                 }
        }
	</pre>	
    </td>
</table>

<div align=right>
<a href="#TOP"><font size="-1">(Top)</font></a>
</div>
</dir>

-->

<br /><br /><br />
<!-- FOR USE WITH PRINT VERSION --------------------------------------
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
<br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
<br /><br /><br /><br /><br />
<!-- FOR USE WITH PRINT VERSION -------------------------------------->

<a name="FootNote"><hr width="200px" align="left"></a>

  <p><font size="-1"><sup><a href="#SupScript1">1</a></sup>It could be said 
  that HDF5 extends the organizing concepts of a file system to the 
  internal structure of a single file.</font></p>
  

<!-- HEADER RIGHT " " -->
  
</body>
</html>

