<html>
<head><title>
H5recover Tool Specification
</title></head>

<body>

<hr>
<dl>
  <dt><strong>Tool Name:</strong> <a name="Tools-Recover">h5recover</a>
  <dt><strong>Syntax:</strong>
    <dd><code>h5recover
        [-j </code><em>journal_file.jnl</em><code>]
        [-h]
        [-v] 
        [-b </code><em>backup_name</em><code>]
        [-s] 
        [-n] 
        <em>hdf5_file.h5</em>
  <p>
  <dt><strong>Purpose:</strong>
    <dd>Recovers a corrupted HDF5 file that crashed while journaling was enabled.
  <p>
  <dt><strong>Motivation:</strong>
    <dd><code>hrecover</code> is part of an HDF5 feature set 
      provided to guard against and recover from metadata corruption. 
      <p>
      This feature set is discussed in
      &ldquo;<a href="../RG/Metadata_Journaling,Crash_Survivability.pdf">Metadata  
      Journaling to Improve Crash Survivability</a>&rdquo; and
      &ldquo;<a href="../RG/MetadataJournal_FileRecovery.html">Metadata 
      Journaling and File Recovery</a>.&rdquo;
  <p>
  <dt><strong>Description:</strong>
    <dd><code>h5recover</code> is a command line tool that walks through a 
        supplied journal file to rebuild the corresponding corrupted HDF5 file.
        Images stored in the journal entries of the journal file are written
        into the corrupted HDF5 file in order to restore its metadata.
  <p>
  <dt><strong>Objects:</strong>
    <dl>
        <dt><code>-j</code> <em>journal_file.jnl</em> 
            <dd>Specify the input journal file.
        <dt><em>hdf5_file.h5</em>
            <dd>Specify the HDF5 file that needs to be recovered.
    </dl>
  <p>
  <dt><strong>Options and Parameters:</strong>
    <dl>
        <dt><code>-h, --help</code>
            <dd>Print information regarding this command.
        <dt><code>-v, --verbose</code>
            <dd>Generate more verbose output.
        <dt><code>-b, --backup</code> <em>backup_name</em>
            <dd>Specify a name for the backup copy of the HDF5 file.
                Default = '<em>hdf5_file.h5</em>.backup'.
        <dt><code>-s, --version</code>
            <dd>Print version number and exit.
        <dt><code>-n, --nocopy</code>
            <dd>Do not create a backup copy before recovery.
    </dl>
  <p>
  <dt><strong>See Also:</strong>
    <dd><a href="H5Fset_jnl_config.html"><code>H5Fset_jnl_config</code></a>,
        &nbsp;
        <a href="H5Fget_jnl_config.html"><code>H5Fget_jnl_config</code></a>, 
        &nbsp;
        <a href="H5Pset_jnl_config.html"><code>H5Pset_jnl_config</code></a>, 
        &nbsp;
        <a href="H5Pget_jnl_config.html"><code>H5Pget_jnl_config</code></a>,
        <p>
        <a href="H5AC_jnl_config_t.html"><code>H5AC_jnl_config_t</code></a>
<!--
        <p>
        <a href="h5recover.html"><code>h5recover</code></a>
-->
        <p>
        &ldquo;<a href="../RG/MetadataJournal_FileRecovery.html">Metadata 
          Journaling and File Recovery</a>&rdquo;
        <br>
        &ldquo;<a href="../RG/Metadata_Journaling,Crash_Survivability.pdf">Metadata
          Journaling to Improve Crash Survivability</a>&rdquo; 
  <p>
  <dt><strong>Assumptions and Caveats:</strong>
    <dd>All assumptions will eventually be addressed via options or
        checks within the tool itself, but initial stages of functionality
        require the following to be manually asserted.
        <ul>
          <li>h5recover assumes that the input HDF5 file is corrupt and needs
              to be recovered.
          <li>h5recover assumes that the journal file provided was generated
              from the HDF5 file provided.
          <li>Recovery occurs in-place, with a back-up copy of specified name
              generated beforehand. There is currently no option to generate
              a new recovered file while keeping the original intact.
          <li>Backup files created by <code>h5recover</code> will currently 
              overwrite files of the same name without issuing a warning.
        </ul>
</dl>

</body>
</html>
