<html>
<head>
<title>H5Fget_jnl_config</title>
</head>
<body>


<!-- NEW PAGE -->
<!-- HEADER RIGHT "H5Fget_jnl_config" -->
<hr>
<dl>

  <dt><div align=right><font color=999999 size=-1><i>
      Last modified: 23 December 2011
      </i></font></div>

  <dt><strong>Name:</strong> <a name="File-GetJnlConfig">H5Fget_jnl_config</a>
  <dt><strong>Signature:</strong>
    <dd><em>herr_t </em><code>H5Fget_jnl_config</code>(
            <em>hid_t </em><code>file_id</code>,
            <em>H5AC_jnl_config_t *</em><code>config_ptr</code>
        )

  <p>
  <dt><strong>Purpose:</strong>
    <dd>Retrieves the current metadata journaling configuration 
        associated with a file.

  <p>
  <dt><strong>Motivation:</strong>
    <dd>This function is part of HDF5&rsquo;s metadata journaling feature,  
      which guards against metadata corruption and provides a recovery 
      capability. 
      <p>
      Metadata journaling is discussed more fully in 
      &ldquo;<a href="../RG/CrashSurvival.html">Using HDF5&rsquo;s 
      Metadata Journaling and File Recovery Features</a>&rdquo; and
      &ldquo;<a href="../RG/Metadata_Journaling,Crash_Survivability.pdf">Metadata  
      Journaling to Improve Crash Survivability</a>.&rdquo;

  <p>
  <dt><strong>Description:</strong>
    <dd><code>H5Fget_jnl_config</code> 
      retrieves the current metadata journaling configuration 
      in the instance of <code>H5AC_jnl_config_t</code> 
      pointed to by <code>config_ptr</code>.
      <p>
      This function is used when dynamically turning metadata journaling 
      on and off on an open file.

  <p>
  <dt><strong>Parameters:</strong>
    <dd><table>
      <tr>
        <td valign="top"><em>hid_t&nbsp;</em><code>file_id</code>
        </td>
        <td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
        <td valign="top">IN:  File identifier of the target file.
            <br>&nbsp;
        </td></tr>
      <tr>
        <td valign="top" colspan="3">
            <em>H5AC_jnl_config_t&nbsp;*</em><code>config_ptr</code>
        </td></tr>
      <tr>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
	<td valign="top">IN/OUT:  Pointer to the instance of the
            <a href="H5AC_jnl_config_t.html"><code>H5AC_jnl_config_t</code></a>
            struct in which the journaling configuration is to be returned.
	    <p>
            Before passing this pointer in the <code>H5Pget_jnl_config</code>
            call, initialize the <code>version</code> field of 
            <code>H5AC_jnl_config_t</code> to 
            <code>H5AC2__CURR_JNL_CONFIG_VER</code>, 
            a value set internally by the HDF5 Library.
	    <p>
            Values returned in other fields are described in the
            <a href="H5AC_jnl_config_t.html"><code>H5AC_jnl_config_t</code></a>
            description.
        </td></tr>
    </table>

<!--
    <p>
    <dir>
    The fields of <em>H5AC_jnl_config_t</em> struct are defined as follows:
    <table>
      <tr>
        <td valign="top"><em>int</em> <code>version</code></td>
        <td>&nbsp;&nbsp;</td>
        <td valign="top">IN: Integer field indicating the the version of 
            the <em><code>H5AC_jnl_config_t</code></em> in use.  
            This field should be set to
            <code>H5AC2__CURR_JNL_CONFIG_VER</code>
            (defined in <code>H5ACpublic.h</code>).
        </td></tr>
      <tr>
        <td valign="top"><em>hbool_t</em> <code>enable_journaling</code></td>
        <td>&nbsp;</td>
        <td valign="top">
            OUT: Boolean flag that is set to <code>TRUE</code> 
            if journaling is enabled, 
            and to <code>FALSE</code> otherwise.
        </td></tr>
      <tr>
        <td valign="top"><em>char</em> <code>journal_file_path[]</code></td>
        <td>&nbsp;</td>
        <td valign="top">
            OUT: Full path of the file used to store the metadata journal.  
            This field is only defined if 
            <code>enable_journaling</code> is <code>TRUE</code>.
            <p>
            At present, the length of the journal file path is restricted to 
            no more than <code>H5AC2__MAX_JOURNAL_FILE_NAME_LEN</code>.
        </td></tr>
      <tr>
        <td valign="top"><em>hbool_t</em> <code>journal_recovered</code></td>
        <td>&nbsp;</td>
        <td valign="top">OUT: Boolean flag use to indicate 
            that the journaled file being opened was not closed correctly, 
            and that the file has been been recovered successfully.
            <p>
            In this context, this field will always be set to false.
        </td></tr>
      <tr>
        <td valign="top"><em>size_t</em> <code>jbrb_buf_size</code></td>
        <td>&nbsp;</td>
        <td valign="top">OUT: <em>size_t</em> containing the size of each 
            individual buffer in the journal buffer ring buffer.
        </td></tr>
      <tr>
        <td valign="top"><em>int</em> <code>jbrb_num_bufs</code></td>
        <td>&nbsp;</td>
        <td valign="top">OUT: Integer containing the number of 
            buffers in the journal buffer ring buffer. 
        </td></tr>
      <tr>
        <td valign="top"><em>hbool_t</em> <code>jbrb_use_aio</code></td>
        <td>&nbsp;</td>
        <td valign="top">OUT: Boolean flag indicating whether 
            asynchronous I/O is in use for journal entry writes.
        </td></tr>
      <tr>
        <td valign="top"><em>hbool_t</em>&nbsp;<code>jbrb_human_readable</code></td>
        <td>&nbsp;</td>
        <td valign="top">
            OUT: Boolean flag which indicates whether the journal file 
            is being written in human readable form.  
        </td></tr>
    </table>
    </dir>
-->

  <p>
  <dt><strong>Returns:</strong>
    <dd>Returns a non-negative value if successful;
        otherwise returns a negative value.

  <p>
  <dt><strong>See Also:</strong>
    <dd><a href="H5Fset_jnl_config.html"><code>H5Fset_jnl_config</code></a>,
<!--
        &nbsp;
        <a href="H5Fget_jnl_config.html"><code>H5Fget_jnl_config</code></a>, 
-->
        &nbsp;
        <a href="H5Pset_jnl_config.html"><code>H5Pset_jnl_config</code></a>, 
        &nbsp;
        <a href="H5Pget_jnl_config.html"><code>H5Pget_jnl_config</code></a> 
        <p>
        <a href="H5AC_jnl_config_t.html"><code>H5AC_jnl_config_t</code></a>
        <p>
        <a href="h5recover.html"><code>h5recover</code></a>
        <p>
        &ldquo;<a href="../RG/CrashSurvival.html">Using HDF5&rsquo;s 
          Metadata Journaling and File Recovery Features</a>&rdquo;
        <br>
        &ldquo;<a href="../RG/Metadata_Journaling,Crash_Survivability.pdf">Metadata
          Journaling to Improve Crash Survivability</a>&rdquo; 

<!--
  <p>
  <dt><strong>Fortran90 Interface:</strong> ***FORTRAN_routine_name***
    <dd>
    <pre>
        ***FORTRAN subroutine description***
    </pre>
-->

  <p>
  <dt><strong>History:</strong>
    <dd><table width="90%">
        <tr>
          <td valign="top" align="left" width="10%">
            <strong>Release</strong>&nbsp;&nbsp;&nbsp;&nbsp;</td>
          <td valign="top" align="left">
            <strong>Change</strong></td></tr>
        <tr>
          <td valign="top">1.10.0</td>
          <td valign="top">
            C function introduced in this release.</td></tr>
    </table>
</dl>

</body>
</html>
