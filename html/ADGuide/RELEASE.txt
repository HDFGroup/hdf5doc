HDF5 version 1.6.4-pre1 released on Sun Nov 28 21:42:37 CST 2004
================================================================================


INTRODUCTION

This document describes the differences between HDF5-1.6.3 and
HDF5-1.6.3-*, and contains information on the platforms tested and
known problems in HDF5-1.6.3-*. For more details check the HISTORY.txt
file in the HDF5 source.

The HDF5 documentation can be found on the NCSA ftp server
(ftp.ncsa.uiuc.edu) in the directory:

     /HDF/HDF5/docs/

For more information look at the HDF5 home page at:
   
    http://hdf.ncsa.uiuc.edu/HDF5/

If you have any questions or comments, please send them to:

    hdfhelp@ncsa.uiuc.edu

CONTENTS

- New Features
- Support for new platforms and languages
- Bug Fixes since HDF5-1.6.3
- Documentation
- Platforms Tested
- Supported Configuration Features Summary
- Known Problems


New Features
============


    Library:
    --------
        - Compound datatype has been enhanced with a new feature of size 
            adjustment.  The size can be increased and decreased(without
            cutting the last member).  No API change is involved.  SLU - 
            2004/10/1

    Parallel Library:
    -----------------
        - Allow compressed, chunked datasets to be read in parallel.
            QAK - 2004/10/04

    Tools:
    ------
	- New tool, h5jam.  See reference manual.  2004/10/08	      

    F90 API:
    --------

    C++ API:
    --------


Support for new platforms, languages and compilers.
=======================================

Bug Fixes since HDF5-1.6.3 release
==================================

    Library
    -------
        - Fix segmentation fault when calling H5Fflush with an attribute that
            hasn't had a value written to it open.  QAK - 2004/10/18
        - Back up supporting bitfield and time types in H5Tget_native_type.  
            Leave it to future support.  The function simply returns error 
            message of "not support" for bitfield and time types.  
            SLU - 2004/10/5
        - Fixed address check in Core VFL driver to avoid spurious address/size
            overflows for odd valued addresses and/or sizes.  QAK - 2004/09/27
        - Fixed problem where chunked datasets were not able to be deleted
            from a file under certain circumstances.  QAK - 2004/09/27/

    Configuration
    -------------
	- Long double is assumed to be a supported C data type.  It is a
	  stanadard C89 type. AKC - 2004/10/22


    Performance
    -------------

    Tools
    -----
	- Fixed h5dump to print attributes data in ASCII if -r option is used.
	  AKC - 2004/11/18
        - Fixed space utilization reported in h5ls to correct error in formula
            used.  QAK - 2004/10/22

    Documentation 
    ------------- 

    F90 API
    -------
       - on windows, previously Fortran DLL built and tested failed,
                     now Fortran DLL has been built and tested successfully
                         with Dec Fortran 6.6c or Dec Fortran 6.0.
    C++ API
    -------
Documentation
=============

    HDF5 Library documentation
    --------------------------

    Windows installation documentation
    ----------------------------------
        


Platforms Tested
================

    AIX 5.1  (32 and 64-bit)      xlc 6.0.0.6
                                  xlf 8.1.1.3
    				  xlC 6.0.0.6
				  mpcc_r 6.0.0.6
                                  mpxlf_r 8.1.1.3
				  xlc 5.0.2.5
				  xlf 7.1.1.2
				  xlC 5.0.2.5
				  mpcc_r 5.0.2.5
				  mpxlf_r 7.1.1.2
    AIX 5.2                       xlc 6.0.0.8
                                  xlC 6.0.0.8
                                  xlf 8.1.1.6
                                  mpcc_r 6.0.0.8
                                  mpxlf_r 8.1.1.6
    Cray T90 sn7001 10.0.0md      Cray Standard C Version 6.4.0.3
                                  Cray Fortran Version 3.4.0.0
    Cray T3E sn6606 2.0.6.08      Cray Standard C Version 6.6.0.3
                                  Cray Fortran Version 3.6.0.3
    Cray SV1 sn9617 10.0.1.2      Cray Standard C Version 6.6.0.3.6
                                  Cray Fortran Version 3.6.0.3.1
    FreeBSD 4.9                   gcc 2.95.4
                                  g++ 2.95.4
    HP-UX B.11.00                 HP C  HP92453-01 A.11.01.20 
                                  HP F90 v2.4
                                  HP ANSI C++ B3910B A.03.13
                                  MPIch 1.2.4
    IRIX64 6.5 (64 & n32)         MIPSpro cc 7.3.1.3m
                                  F90 MIPSpro 7.3.1.3m (64 only)
                                  C++ MIPSpro cc 7.3.1.3m
				  mpt 1.6
    Linux 2.4.18                  gcc 2.96, 3.3.2
                                  g++ 3.3.2
                                  Intel(R) C++ Version 7.1
                                  Intel(R) Fortran Compiler Version 7.1
                                  PGI compilers (pgcc, pgf90, pgCC) version 5.0-2
                                  MPIch 1.2.4
                                  Absoft Fortran compiler v9.0
    Linux 2.4.20-8                gcc 3.3.2
                                  PGI compilers (pgcc, pgf90, pgCC) version 5.0-2
                                  MPIch 1.2.4
    Linux 2.4.21-2.9.5ws #3       gcc 3.2.3 (Red Hat Linux 3.2.3-16)
          SMP x86_64              g++ 3.2.3
    Linux 2.4.21-4.ELsmp	  Intel(R) C++ 32-bit Version 8.0
    				  Intel(R) Fortran 32-bit Version 8.0
				  gcc 3.4.0
				  MPICH 1..5.2 Inmel 8.0
    Linux 2.4.19-SMP  x86_64      gcc (GCC) 3.2.2 (SuSE Linux)
                                  g++ 3.2.2
    Linux 2.6.4-52smp x86_64      gcc 3.3.3 (SuSE Linux 9.1 AMD64))
                                  PGI 5.2-1 C and F90 

    Linux 2.4.21-sgi Altix 
          SMP ia64                Intel(R) C++ Version 8.0
                                  Intel(R) Fortran Itanium(R) Version 8.0
                                  SGI MPI
    OSF1 V5.1                     Compaq C V6.5-303 
                                  HP Fortran V5.5A-3548
				  Compaq C++ V6.5-040  
				  MPI_64bit_R13
    SunOS 5.7(32 and 64 bit)      WorkShop Compilers 5.0 98/12/15 C 5.0
     (Solaris 2.7)                WorkShop Compilers 5.0 98/12/15 C++ 5.0 
                                  WorkShop Compilers 5.0 98/10/25 
                                  FORTRAN 90 2.0 Patch 107356-04 
    SunOS 5.8(32 and 64 bit)      Sun WorkShop 6 update 2 C 5.3
     (Solaris 2.8)                Sun WorkShop 6 update 2 Fortran 90
                                  Sun WorkShop 6 update 2 C++ 5.3
    TFLOPS r1.0.4 v4.4.3 i386     pgcc Rel 3.1-4i with mpich-1.2.4 with
                                          local modifications
    IA-32 Linux 2.4.18            gcc 2.96
                                  Intel(R) C++ Version 7.0
                                  Intel(R) Fortran Compiler Version 7.0

    Xeon Linux 2.4.20-31.9smp_perfctr_lustre
	                          Intel(R) C++ Version 8.0
                                  Intel(R) Fortran Compiler Version 8.0
                                  
    IA-64 Linux 2.4.16 ia64       gcc version 3.0.4
                                  Intel(R) C++ Version 7.1
                                  Intel(R) Fortran Compiler Version 7.1

    IA-64 Linux 2.4.21.SuSE_128.bef1 ia64
                                  Intel(R) C++ Version 8.0
                                  Intel(R) Fortran Compiler Version 8.0
				  mpich-gm-1.2.5..intel

    Windows 2000 (NT5.0)          MSVC++ 6.0
                                  MSVC++ .NET
                                  DEC Visual Fortran 6.0
                                  Intel C and F90 compilers version 7.1
				  Code Warrior 8.0
    Windows XP                    MSVC++.NET
                                  MSVC++ 6.0
                                  DEC Visual Fortran 6.0

    MAC OS X                      Darwin 7.5
                                  gcc and g++ Apple Computer, Inc. GCC 
                                  version 1175, based on gcc version 3.3.2
                                  IBM XL Fortran version 8.1 
                                  Absoft Fortran compiler v8.2
                                  


Supported Configuration Features Summary
========================================

Key:   y = tested and supported
       n = not supported or not tested in this release
       x = not working in this release
       dna = does not apply
       ( ) = footnote appears below second table

Platform                             C        F90    F90      C++  zlib  SZIP
                                     parallel        parallel      
Solaris2.7 64-bit                    y (1)    y      y (1)    y    y     y
Solaris2.7 32-bit                    y (1)    y      y (1)    y    y     y
Solaris2.8 64-bit                    y (1)    y      y (1)    y    y     y
Solaris2.8 32-bit                    y        y      y (1)    y    y     y
IRIX64_6.5 64-bit                    y (2)    y      y        y    y     y
IRIX64_6.5 32-bit                    y (2)    n      n        n    y     y
HPUX11.00                            y (1)    y      y        y    y     y
OSF1 v5.1                            y        y      y        y    y     y
T90 IEEE                             n        y      n        n    y     n
T3E                                  y (5)    y      y (5)    n    y     n
SV1                                  y (5)    y      y (5)    n    y     n
TFLOPS                               y (1)    n      n        n    y     n
AIX-5.1 & 5.2 32-bit                 y        y      y        y    y     y
AIX-5.1 & 5.2 64-bit                 y        y      y        y    y     y
WinXP Visual Studio 6.0              n        y (9)  n        y    y     y
WinXP .Net                           n        n      n        y    y     y
WinXP Code Warrior                   n        n      n        n    y     y
Win2000 Visual Studio 6.0            n        y (10) n        y    y     y
Win2000 Visual Studio Intel (6)      n        y      n        y    y     y
Win2000 .Net                         n        n      n        y    y     y
Mac OS X 10.3                        n        y (11) n        y    y     y
FreeBSD 4.9                          y (1)    n      n        y    y     y
RedHat 7   W        (3)              y (1)    y (12) n        y    y     y
RedHat 7.3  W Intel (3)              n        y      n        y    y     y
RedHat 7.3  W PGI   (3)              n        y      n        y    y     y
RedHat 8 & SuSe x86_64 gcc     (3)   n        y (13) n        y    y     y
Linux 2.4 Xeon C Lustre Intel (3,7)  n        y      n        y    y     y
Linux 2.4 SuSE ia64 C   Intel (3,8)  y        y      y        y    y     y
Linux 2.4 SGI Altix ia64 Intel (3)   y        y      y        y    y     y


Platform                             Shared         static-  Thread-  STREAM- 
                                     libraries (4)  exec     safe     VFD    
Solaris2.7 64-bit                    y              x        y        y
Solaris2.7 32-bit                    y              x        y        y
Solaris2.8 64-bit                    y              x        y        y
Solaris2.8 32-bit                    y              x        y        y
IRIX64_6.5 64-bit                    y              y        y        y
IRIX64_6.5 32-bit                    y              y        y        y
HPUX11.00                            y              x        n        y
OSF1 v5.1                            y              y        n        y
T90 IEEE                             n              y        n        y
T3E                                  n              y        n        y
SV1                                  n              y        n        y
TFLOPS                               n              y        n        n
AIX-5.1 & 5.2 32-bit                 n              y        n        y
AIX-5.1 & 5.2 64-bit                 n              y        n        y
WinXP Visual Studio 6.0              y              y        n        n
WinXP .Net                           y              y        n        n
WinXP Code Warrior                   n              y        n        n
Win2000 Visual Studio 6.0            y              y        n        n
Win2000 Visual Studio Intel (6)      y              y        n        n
Win2000 .Net                         y              y        n        n
Mac OS X 10.3                        y              y        n        y
FreeBSD 4.9                          y              y        y        y
RedHat 7    W       (3)              y              y        y        y
RedHat 7.3  W Intel (3)              n              y        n        y
RedHat 7.3  W PGI   (3)              n              y        n        y
RedHat 8 & SuSe x86_64 gcc     (3)   n              y        n        y
Linux 2.4 Xeon C Lustre Intel (3,7)  y              y        n        y
Linux 2.4 SuSE ia64 C Intel   (3,8)  y              y        n        n
Linux 2.4 SGI Altix ia64 Intel (3)   y              y        n        y



Compiler versions for each platform are listed in the "Platforms Tested" 
table found elsewhere in this file (RELEASE.txt).  Unless otherwise noted, 
compilers used are the system compilers.

Footnotes:  (1) Using mpich 1.2.4
            (2) Using mpt and mpich 1.2.4
            (3) Linux 2.4 with GNU, Intel, and PGI compilers, as indicated  
                W or C indicates workstation or cluster, respectively
            (4) Shared libraries are provided only for the C library, 
                except on Windows where they are provided for C and C++
            (5) Using mpt
            (6) Intel 7.1 compilers in Visual Studio 6.0 environment
            (7) Linux 2.4.20-31.9.  Xeon cluster with smp_perfctr_lustre 
                and Intel compilers
            (8) Linux 2.4.21, SuSE_128.befl.  Ia64 cluster with Intel compilers
            (9) DEC Visual Fortran 6.0 and Intel 7.1
            (10) DEC Visual Fortran 6.0
            (11) IBM XLF and Absoft
            (12) PGI, Absoft
            (13) PGI
       FMB/EIP - 2004/09/21



Known Problems
==============
* h5fc and h5c++ compilation scripts have a bug: object files (*.o) cannot be
  created when source code is compiled using h5fc or h5c++. We will provide
  a fix. Please check ftp://ftp.ncsa.uiuc.edu/HDF/HDF5/current/src/patches/ 
  for the patches.

* Fortran subroutine h5pget_driver_f doesn't return a correct driver information.

* There are two h5dump xml tests(h5dump --xml thlink.h5 and h5dump --xml tmany.h5)
  failed on windows xp with .NET for debug and debug dll. Release and Release
  dll work fine. 

* The h5dump tests may fail to match the expected output on some platforms
  (e.g. parallel jobs, Windows) where the error messages directed to
  "stderr" do not appear in the "right order" with output from stdout.
  This is not an error.

* The stream-vfd test uses ip port 10007 for testing. If another
  application is already using that port address, the test will hang
  indefinitely and has to be terminated by the kill command. To try the
  test again, change the port address in test/stream_test.c to one not
  being used in the host.

* The --enable-static-exec configure flag fails to compile for Solaris
  platforms. This is due to the fact that not all of the system
  libraries on Solaris are available in a static format.

  The --enable-static-exec configure flag also fails to correctly compile
  on IBM SP2 platform for the serial mode. The parallel mode works fine
  with this option.
  
  It is suggested that you don't use this option on these platforms
  during configuration.

* The Stream VFD was not tested yet under Windows. It is not supported
  in the TFLOPS machine.

* The ./dsets tests failed in the TFLOPS machine if the test program,
  dsets.c, is compiled with the -O option.  The hdf5 library still works
  correctly with the -O option.  The test program works fine if it is
  compiled with -O1 or -O0.  Only -O (same as -O2) causes the test
  program to fail.

* Certain platforms give false negatives when testing h5ls:
    - Cray J90 and Cray T90IEEE give errors during testing when displaying
      some floating-point values. These are benign differences due to
      the different precision in the values displayed and h5ls appears to
      be dumping floating-point numbers correctly.

* Before building HDF5 F90 Library from source on Crays 
  replace H5Aff.f90, H5Dff.f90 and H5Pff.f90 files in the fortran/src
  subdirectory in the top level directory with the Cray-specific files
  from the site:
  ftp://ftp.ncsa.uiuc.edu/HDF/HDF5/current/src/patches/

* On some platforms that use Intel and Absoft compilers to build HDF5 fortran library,
  compilation may fail for fortranlib_test.f90, fflush1.f90 and fflush2.f90
  complaining about exit subroutine. Comment out the line 
  IF (total_error .ne. 0) CALL exit (total_error)

* On IA32 and IA64 systems, if you use a compiler other than GCC (such as
  Intel's ecc or icc compilers), you will need to modify the generated
  "libtool" program after configuration is finished. On or around line 104 of
  the libtool file, there are lines which look like:

      # How to pass a linker flag through the compiler.
      wl=""

  change these lines to this:

      # How to pass a linker flag through the compiler.
      wl="-Wl,"

  UPDATE: This is now done automatically by the configure script. However, if
  you still experience a problem, you may want to check this line in the
  libtool file and make sure that it has the correct value.

* Information about building with PGI and Intel compilers is available in
  INSTALL file sections 5.7 and 5.8

* In LANL QSC, the new cc compiler has problems converting small values of
  long long (absolute values less than 1**-308) to double.  This triggers
  the test/dtypes to report failure in the
      Testing random sw long double -> double conversions
  If -ieee is used, the converted doubles spread over the range 0.0 to 1**-308.
  If -ieee is not used, the converted double values are mostly 0.0 but
  occasionally as 1**-308.  This has been reported to the system staff.
  All other tests have passed.

* On at least one system, (SDSC DataStar), the scheduler (in this case
  LoadLeveler) sends job status updates to standard error when you run
  any executable that was compiled with the parallel compilers.

  This causes problems when running "make check" on parallel builds, as
  many of the tool tests function by saving the output from test runs,
  and comparing it to an exemplar.

  The best solution is to reconfigure the target system so it no longer
  inserts the extra text.  However, this may not be practical.

  In such cases, one solution is to "setenv HDF5_Make_Ignore yes" prior to
  the configure and build.  This will cause "make check" to continue after
  detecting errors in the tool tests.  However, in the case of SDSC DataStar,
  it also leaves you with some 150 "failed" tests to examine by hand.

  A second solution is to write a script to run serial tests and filter
  out the text added by the scheduler.  A sample script used on SDSC
  DataStar is given below, but you will probably have to customize it
  for your installation.

  Observe that the basic idea is to insert the script as the first item
  on the command line which executes the test.  The script then
  executes the test and filters out the offending text before passing
  it on.

        #!/bin/csh

        set STDOUT_FILE=~/bin/serial_filter.stdout
        set STDERR_FILE=~/bin/serial_filter.stderr

        rm -f $STDOUT_FILE $STDERR_FILE

        ($* > $STDOUT_FILE) >& $STDERR_FILE

        set RETURN_VALUE=$status

        cat $STDOUT_FILE

        tail +3 $STDERR_FILE

        exit $RETURN_VALUE

  You get the HDF make files and test scripts to execute your filter script
  by setting the environment variable "RUNSERIAL" to the full path of the
  script prior to running configure for parallel builds.  Remember to
  "unsetenv RUNSERIAL" before running configure for a serial build.

  Note that the RUNSERIAL environment variable exists so that we can
  can prefix serial runs as necessary on the target system.  On DataStar,
  no prefix is necessary.  However on an MPICH system, the prefix might
  have to be set to something like "/usr/local/mpi/bin/mpirun -np 1" to
  get the serial tests to run at all.

  In such cases, you will have to include the regular prefix in your
  filter script.

