

<!--
  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
  * Copyright by The HDF Group.                                               *
  * Copyright by the Board of Trustees of the University of Illinois.         *
  * All rights reserved.                                                      *
  *                                                                           *
  * This file is part of HDF5.  The full HDF5 copyright notice, including     *
  * terms governing use, modification, and redistribution, is contained in    *
  * the files COPYING and Copyright.html.  COPYING can be found at the root   *
  * of the source code distribution tree; Copyright.html can be found at the  *
  * root level of an installed copy of the electronic HDF5 document set and   *
  * is linked from the top-level documents page.  It can also be found at     *
  * http://hdfgroup.org/HDF5/doc/Copyright.html.  If you do not have          *
  * access to either file, you may request a copy from help@hdfgroup.org.     *
  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 -->


<!-- NEW PAGE -->
<!-- HEADER RIGHT "H5Pset_file_space" -->
<hr>
<dl>

  <dt><div align=right><font color=999999 size=-1><i>
      Last modified: 19 April 2012
      </i></font></div>

  <dt><strong>Name:</strong> <a name="Property-SetFileSpace">H5Pset_file_space</a>

  <dt><strong>Signature:</strong>
    <dd><em>herr_t </em><code>H5Pset_file_space</code>(
            <em>hid_t </em><code>fcpl_id</code>,
            <em>H5F_file_space_type_t </em><code>strategy</code>,
            <em>hsize_t </em><code>threshold</code>
        )

  <p>
  <dt><strong>Purpose:</strong>
    <dd>Sets the file space management strategy and/or
        free-space section threshold for an HDF5 file.

  <p>
  <dt><strong>Motivation:</strong>
    <dd><code>H5Pset_file_space</code> 
      provides the means for applications to manage an HDF5 file&rsquo;s 
      file space to meet specific needs.

  <p>
  <dt><strong>Description:</strong>
    <dd><code>H5Pset_file_space</code> 
      sets the file space management strategy for the file associated with 
      <code>fcpl_id</code> as specified in <code>strategy</code>  
      and sets the file-space threshold to <code>threshold</code>.
      <p>
      Available strategies are described in the 
      &ldquo;Parameters:&rdquo; section below.
      <p>
      This routine can also set the free-space section threshold to
      <code>threshold</code> so that the library&rsquo;s free-space managers 
      will track only free-space sections whose size is 
      greater than or equal to <code>threshold</code> for the file.
      <p>
      Passing <code>0</code> (zero) for <code>strategy</code> or 
      <code>thresold</code> indicates that the corresponding parameter&rsquo;s 
      value should not be modified as a result of the call.
      <p>
      <b>Note:</b> The file space management strategy and/or free-space 
      section threshold that are set via this routine cannot be changed once
      the file is created. 

  <p>
  <dt><strong>Parameters:</strong>
    <dd>
    <table>
      <tr valign="top">
        <td><em>hid_t </em><code>fcpl_id</code>
            </td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
        <td>IN: The file creation property list identifier.
            </td></tr>

      <tr valign="top">
        <td colspan="3"><em>H5F_file_space_type_t</em>&nbsp;<code>strategy</code>
        </td></tr>
        <tr><td>&nbsp;</td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
        <td>IN: The strategy for file space management.
            <p>
            Valid values are as follows:
            <table border="0">
              <tr valign="top">
                <td colspan="2">
                    <code>H5F_FILE_SPACE_ALL_PERSIST&nbsp;&nbsp;&nbsp;&nbsp;</code>
                </td></tr>
                <tr><td>&nbsp;</td>
                <td>With this strategy, the free-space managers track the
                    free space that results from the manipulation of HDF5 
                    objects in the HDF5 file.  The free space information 
                    is saved when the file is closed, and reloaded when the 
                    file is reopened.
                    <br>
                    When space is needed for file metadata or raw data, 
                    the HDF5 library first requests space from the library&rsquo;s 
                    free-space managers. If the request is not satisfied, 
                    the library requests space from the aggregators. 
                    If the request is still not satisfied, 
                    the library requests space from the virtual file driver. 
                    That is, the library will use all of the mechanisms for 
                    allocating space.
                </td>
              </tr>

              <tr valign="top">
                <td><code>H5F_FILE_SPACE_ALL&nbsp;&nbsp;&nbsp;</code></td>
                <td>This is the library&rsquo;s default file space management 
                    strategy. 
                    With this strategy, the free-space managers track the 
                    free space that results from the manipulation of HDF5 
                    objects in the HDF5 file.
                    The free space information is NOT saved when the file is 
                    closed and the free space that exists upon file closing 
                    becomes unaccounted space in the file.
                    <br>
                    Like the previous strategy, the library will try all of 
                    the mechanisms for allocating space.  
                    When space is needed for file metadata or raw data, 
                    the library first requests space from the free-space
                    managers.  If the request is not satisfied, the library 
                    requests space from the aggregators.  If the request is 
                    still not satisfied, the library requests space from the 
                    virtual file driver.
                </td>
              </tr>

              <tr valign="top">
                <td colspan="2"><code>H5F_FILE_SPACE_AGGR_VFD</code>
                </td></tr>
                <tr><td>&nbsp;</td>
                <td>With this strategy, the library does not track free space 
                    that results from the manipulation of HDF5 obejcts in the 
                    HDF5 file and the free space becomes unaccounted space in 
                    the file.
                    <br>
                    When space is needed for file metadata or raw data,
                    the library first requests space from the aggregators. 
                    If the request is not satisfied, the library requests 
                    space from the virtual file driver. 
                </td>
              </tr>

              <tr valign="top">
                <td><code>H5F_FILE_SPACE_VFD</code></td>
                <td>With this strategy, the library does not track free space 
                    that results from the manipulation of HDF5 obejcts in the 
                    HDF5 file and the free space becomes unaccounted space 
                    in the file.
                    <br>
                    When space is needed for file metadata or raw data,
                    the library requests space from the virtual file driver. 
                </td>
              </tr>

            </table>
<!--
            <p>
            The <code><em>H5F_file_space_type_t</em></code> 
            <small>ENUM</small> is fully described in 
            <a href="../examples/H5F_file_space_type_t.html">
            <code>H5F_file_space_type_t.html</code></a>.
            </td></tr>
-->

      <tr valign="top">
        <td><em>hsize_t&nbsp;</em><code>threshold</code>
            </td><td>&nbsp;</td>
        <td>IN: The free-space section threshold, in bytes.
            Can be any non-negative integer value.
            <br>
            A value of <code>0</code> (zero) specifies to retain the current
            setting.
            <p>
            <i>Default:</i> <code>1</code> (one). 
            Track all free-space sections of 1 byte or larger; 
            in other words, track all free-space sections.
            </td></tr>
    </table>

  <p>
  <dt><strong>Returns:</strong>
    <dd>Returns a non-negative value if successful;
        otherwise returns a negative value.

  <p>
  <dt><strong>Failure Modes:</strong>
    <dd>This routine will fail when any of the following is true:
        <ul>
            <li><code>strategy</code> is not one of the valid values listed 
                above.
            <li>The library fails to retrieve the file creation property list 
                <code>fcpl_id</code>.
            <li>The library fails to set the strategy and/or threshold 
                in the file creation property list <code>fcpl_id</code>.
        </ul>

  <p>
  <dt><strong>Example Usage:</strong>

    <dd>The first example sets the file space management strategy for the 
        file associated with <code>fcpl</code> to 
        <code>H5F_FILE_SPACE_ALL_PERSIST</code>.
        It also sets the free-space section threshold to <code>10</code>, 
        which means that the library&rsquo;s free-space managers will track only 
        free-space sections whose size is >= 10 for the file.
<dir><pre>
H5Pset_file_space(fcpl, H5F_FILE_SPACE_ALL_PERSIST, (hsize_t)10);
</pre></dir>
    <p>

    <dd>The second example sets the file space management strategy for the
        file associated with <code>fcpl</code> to 
        <code>H5F_FILE_SPACE_VFD</code>.  It does not change the free-space 
        section threshold in use for the file.
<dir><pre>
H5Pset_file_space(fcpl, H5F_FILE_SPACE_VFD, (hsize_t)0);
</pre></dir>
  <p>


<!--__ *** FORTRAN90 INTERFACE  **********************************  -->
<!--__ When the Fortran90 interface is complete, replace this       -->
<!--__ section with the Fortran90 subroutine description.           -->
<!--__                                                              -->
<!--__ See the file h5fortran_f_insert.htm for a template and       -->
<!--__ instructions.                                                -->
<!--__ ***********************************************************  -->


  <p>
  <dt><strong>See Also:</strong>
    <dd><a href="../RM/RM_H5P.html#Property-GetFileSpace">
        <code>H5Pget_file_space</code></a>
        <p>

<!--
        <a href="../html/RM/H5function.html#H5F_file_space_type_t">
        <code>H5F_file_space_type_t</code></a>
        <p>
-->

        <a href="../RM/Tools.html#h5repack"><code>h5repack</code></a>
        <p>
        <a href="../RM/Tools.html#h5dump"><code>h5dump</code></a>
        <p>
        <a href="../RM/Tools.html#h5stat"><code>h5stat</code></a>
        <p>
        <a href="../Advanced/FileSpaceManagement/FileSpaceManagement.pdf">
           <cite>HDF5 File Space Management</cite></a>

  <p>
  <dt><strong>History:</strong>
    <dd><table width="90%">
        <tr>
          <td valign="top" align="left" width="10%">
            <strong>Release</strong>&nbsp;&nbsp;&nbsp;&nbsp;</td>
          <td valign="top" align="left">
            <strong>Change</strong></td>
        </tr>
        <tr>
          <td valign="top">1.10.0</td>
          <td valign="top">
            C function introduced in this release.</td>
        </tr>
<!--
        <tr>
          <td valign="top">*.**.**</td>
          <td valign="top">
            Fortran90 subroutine introduced in this release.</td>
        </tr>
-->
        </table>

</dl>


