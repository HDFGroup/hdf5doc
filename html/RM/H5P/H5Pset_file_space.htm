

<!--
  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
  * Copyright by The HDF Group.                                               *
  * Copyright by the Board of Trustees of the University of Illinois.         *
  * All rights reserved.                                                      *
  *                                                                           *
  * This file is part of HDF5.  The full HDF5 copyright notice, including     *
  * terms governing use, modification, and redistribution, is contained in    *
  * the files COPYING and Copyright.html.  COPYING can be found at the root   *
  * of the source code distribution tree; Copyright.html can be found at the  *
  * root level of an installed copy of the electronic HDF5 document set and   *
  * is linked from the top-level documents page.  It can also be found at     *
  * http://hdfgroup.org/HDF5/doc/Copyright.html.  If you do not have          *
  * access to either file, you may request a copy from help@hdfgroup.org.     *
  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 -->




<!--__ ** FUNCTION ENTRY TEMPLATE (h5function_entry.htm) ********** -->
<!--__ Last Updated:  July 16, 2009                                 -->
<!--__                                                              -->
<!--__ GENERAL INSTRUCTIONS                                         -->
<!--__                                                              -->
<!--__ This file provides a 'self-describing' template for          -->
<!--__ function entries in the HDF5 Reference Manual (RM).          -->
<!--__                                                              -->
<!--__ You should be able to print this file with these comments    -->
<!--__ exposed for reference; speak with Frank if you have trouble  -->
<!--__ doing so.                                                    -->
<!--__                                                              -->
<!--__ For a new function entry:                                    -->
<!--__   Rename this file as <function_name>.htm.                   -->
<!--__   E.g., the file for the function H5Ocreate_little_green_man -->
<!--__   would be H5Ocreate_little_green_man.htm.                   -->
<!--__                                                              -->
<!--__ For an existing function entry:                              -->
<!--__   Use this file as a guide to the latest content and         -->
<!--__   organization.  If desired, copy instructions and HTML      -->
<!--__   tags from this file into the existing function entry, and  -->
<!--__   use them as you make updates.                              -->
<!--__                                                              -->
<!--__                                                              -->
<!--__ To use the template:                                         -->
<!--__                                                              -->
<!--__ Replace instructional text with text relevant to the         -->
<!--__ function.                                                    -->
<!--__                                                              -->
<!--__ Lines beginning with '<!--__' are instructions to you,       -->
<!--__ the author; feel free to remove them as you go.              -->
<!--__                                                              -->
<!--__ In general, HTML tags (enclosed in < >'s) should not be      -->
<!--__ changed.                                                     -->
<!--__                                                              -->
<!--__ Indent in a style consistent with the example text.          -->
<!--__ When possible, limit line length to 80 characters.           -->
<!--__ Make exceptions for cases where HTML requires longer lines.  -->
<!--__ For example, some links are more than 80 characters long     -->
<!--__ and cannot be readily broken.                                -->
<!--__                                                              -->
<!--__ If the function description calls for a table, you may       -->
<!--__ insert open and close 'pre' tags:                            -->
<!--__          <pre>                                               -->
<!--__          </pre>                                              -->
<!--__ Insert the table contents formatted as aligned flat text     -->
<!--__ between the open and close 'pre' tags.                       -->
<!--__ BE SURE to let a member of the documentation team know that  -->
<!--__ you have done this when you finish with the file so that the -->
<!--__ flat text can be converted to an HTML table.                 -->
<!--__                                                              -->
<!--__                                                              -->
<!--__ FUNCTION NAME INSTRUCTIONS                                   -->
<!--__ Replace the string 'H5function_name' with the actual         -->
<!--__ function name everywhere it occurs in the file.              -->
<!--__                                                              -->
<!--__ SECTION-BY-SECTION INSTRUCTIONS                              -->
<!--__ Follow the embedded instructions for each section.           -->
<!--__                                                              -->


<!--__ ***********************************************************  -->
<!--__ Do not alter the next line; it is used by the PDF generator. -->
<!--__ ***********************************************************  -->
<!-- NEW PAGE -->


<!--__ *** HEADER RIGHT ******************************************  -->
<!--__ Update H5function_name; leave remainder of line unchanged    -->
<!--__ as it is also used by the PDF generator.                     -->
<!--__ ***********************************************************  -->
<!-- HEADER RIGHT "H5Pset_file_space" -->
<hr>
<dl>
<!--__ *** LAST MODIFIED DATE ************************************  -->
<!--__ Replace "day month year" with the date the entry was created -->
<!--__ or last modified:  8 April 2009, for example.                -->
<!--__ ***********************************************************  -->
  <dt><div align=right><font color=999999 size=-1><i>
      Last modified: 24 July 2009
      </i></font></div>

<!--__ *** NAME **************************************************  -->
<!--__ Update H5function_name; leave remainder of line the same.    -->
<!--__ ***********************************************************  -->
  <dt><strong>Name:</strong> <a name="API-FunctionName">H5Pset_file_space</a>


<!--__ *** SIGNATURE**********************************************  -->
<!--__ Update H5function_name and parameters in signature,          -->
<!--__ adjusting number of parameters as needed.                    -->
<!--__ ***********************************************************  -->
  <dt><strong>Signature:</strong>
    <dd><em>herr_t </em><code>H5Pset_file_space</code>(
            <em>hid_t </em><code>fcpl_id</code>,
            <em>H5F_file_space_type_t </em><code>strategy</code>,
            <em>hsize_t </em><code>threshold</code>
        )


<!--__ *** PURPOSE ***********************************************  -->
<!--__ This section provides a one-line description of the          -->
<!--__ function's purpose in sentence form.                         -->
<!--__ NOTE THAT THE PURPOSE IS NOT NECESSARILY A RECAPITULATION    -->
<!--__ OF WHAT THE FUNCTION DOES; RATHER, IT SHOULD DESCRIBE WHAT   -->
<!--__ THE FUNCTION IS MEANT TO ACCOPMLISH, FROM THE USER'S POINT   -->
<!--__ OF VIEW.  THIS IS A CHANGE FROM PAST PRACTICE.               -->
<!--__                                                              -->
<!--__ For consistency in presentation, several model statements    -->
<!--__ are provided below; if one is appropriate, edit it only      -->
<!--__ enough to accurately describe the function's purpose.        -->
<!--__ If none of the models are appropriate, write a parallel      -->
<!--__ statement that fits the function.                            -->
<!--__                                                              -->
<!--__ In many cases, a bit of elaboration at the end of the        -->
<!--__ sentence will be appropriate.  For example, the first line   -->
<!--__ in each pair below is more informative than the second.      -->
<!--__ In general, add useful details but keep the statement short. -->
<!--__                                                              -->
<!--__    Creates an attribute attached to a specified object.      -->
<!--__    Creates an attribute.                                     -->
<!--__                                                              -->
<!--__    Creates a dataset at a specified location.                -->
<!--__    Creates a dataset.                                        -->
<!--__                                                              -->
<!--__ Preferred verbs include the following:                       -->
<!--__    Retrieves     The value is returned in a parameter.       -->
<!--__    Returns       The value is the function's return value.   -->
<!--__    Determines    The library does not just look up a value,  -->
<!--__                      it has to figure it out.                -->
<!--__    Creates, Opens, Closes, Removes                           -->
<!--__                                                              -->
<!--__ Select one of the following purpose statements and edit as   -->
<!--__ appropriate:                                                 -->
<!--__     Replace strings such as 'specify_the_object' with the    -->
<!--__         name of the appropriate item (file, group, dataset,  -->
<!--__         etc.).                                               -->
<!--__     Replace strings such as 'Closes_or_deletes' with the     -->
<!--__         word (e.g., 'Closes' or 'Deletes').                  -->
<!--__     Et cetera.                                               -->
<!--__ If no example is appropriate, write a similar sentence.      -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>Purpose:</strong>
    <dd>Sets the file space management strategy and/or
	free-space section threshold for an HDF5 file.

<!--__ *** MOTIVATION ********************************************  -->
<!--__ This an OPTIONAL section for functions that may need more    -->
<!--__ than the simple statement in "Purpose:" to enable a user     -->
<!--__ to understand the situations that might call for this        -->
<!--__ function's use and/or the types of problems it addresses.    -->
<!--__                                                              -->
<!--__ Update H5function_name and the motivation text.              -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>Motivation:</strong>
    <dd><code>H5Pset_file_space</code> 
      provides the means for applications to manage the HDF5 file's file
      space for their specific needs.

<!--__ *** DESCRIPTION *******************************************  -->
<!--__ The "Description" section provides a more detailed           -->
<!--__ description of the function and instructions for its use.    -->
<!--__                                                              -->
<!--__ Update H5function_name and the description text.             -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>Description:</strong>
    <dd><code>H5Pset_file_space</code> 
      sets the file space management strategy for the file associated with 
      <code>fcpl_id</code> to <code>strategy</code>.  
      There are four strategies that applications can select and
      they are described in the <strong>Parameters</strong> section.
      This routine can also set the free-space section threshold to
      <code>threshold</code> so that the library's free-space managers will track 
      only free-space sections whose size is >= <code>threshold</code> for the file.
      Passing a zero value for <code>strategy</code> or <code>thresold</code> 
      indicates the corresponding parameter's value should not be modified
      as a result of the call.
      <p>
      <b>Note:</b> The file space management strategy and/or free-space section
      threshold that is set via this routine cannot be changed once
      the file is created. 


<!--__ *** PARAMETERS ********************************************  -->
<!--__ This section is used to enumerate and describe the           -->
<!--__ parameters.  A type, name, direction (IN/OUT), and general   -->
<!--__ description must be given for each parameter.  Additional    -->
<!--__ information is often provided regarding the specific values  -->
<!--__ a parameter may assume and the meanings of those values.     -->
<!--__                                                              -->
<!--__ Enter the parameter types, names, directions, and            -->
<!--__ descriptions. HTML tables are used for parameters;           -->
<!--__ feel free to ask if you need assistance with the tables.     -->
<!--__                                                              -->
<!--__ For each parameter, indicate the parameter's "direction"     -->
<!--__ (input, output, or both) with respect to the function        -->
<!--__ via the IN, OUT, or IN/OUT notation at the beginning of      -->
<!--__ parameter description:                                       -->
<!--__     IN indicates the parameter is input to the function.     -->
<!--__     OUT indicates the parameter is set by the function.      -->
<!--__     IN/OUT indicates the parameter is input to the           -->
<!--__         function and is also set by the function.            -->
<!--__                                                              -->
<!--__ If the parameter type is a struct or ENUM type or            -->
<!--__ if the description is more involved than usual,              -->
<!--__ see the one of the accompanying template files:              -->
<!--__     Struct                H5parameter_struct_insert.htm      -->
<!--__     ENUM                  H5parameter_enum_insert.htm        -->
<!--__     Long description      H5parameter_long_insert.htm        -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>Parameters:</strong>
    <dd>
    <table>
      <tr valign="top">
        <td><em>hid_t </em><code>fcpl_id</code>
            </td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
        <td>IN: The file creation property list identifier.
            </td></tr>

      <tr valign="top">
        <td><em>H5F_file_space_type_t</em>&nbsp;<code>strategy</code>
        </td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
        <td>IN: The strategy for file space management.
            <p>
            Valid values are as follows:
            <table border=0>
              <tr valign="top">
                <td><code>H5F_FILE_SPACE_ALL_PERSIST</code>&nbsp;&nbsp;</td>
                <td>With this strategy, the free-space managers track the
		      free space that results from the manipulation of HDF5 objects
		      in the HDF5 file.  The free space information is saved when the
		      file is closed, and reloaded when the file is reopened.
		    <br>
		      When space is needed for file metadata or raw data, 
		      the HDF5 library first requests space from the library's free-space 
		      managers. If the request is not satisfied, the library requests space 
		      from the aggregators. If the request is still not satisfied, 
		      the library requests space from the virtual file driver. 
		      That is, the library will use all of the mechanisms for allocating
		      space.
                </td>
              </tr>

              <tr valign="top">
                <td><code>H5F_FILE_SPACE_ALL</code></td>
                <td>This is the library's default file space management strategy. 
		      With this strategy, the free-space managers track the free space that
		      results from the manipulation of HDF5 objects in the HDF5 file.
		      The free space information is NOT saved when the file is closed and
		      the free space that exists upon file closing becomes unaccounted
		      space in the file.
		    <br>
		      Like the previous strategy, the library will try all of the mechanisms 
		      for allocating space.  When space is needed for file metadata or 
		      raw data, the library first requests space from the free-space
		      managers.  If the request is not satisfied, the library requests
		      space from the aggregators.  If the request is still not satisfied,
		      the library requests space from the virtual file driver.
                </td>
              </tr>

              <tr valign="top">
                <td><code>H5F_FILE_SPACE_AGGR_VFD</code>&nbsp;&nbsp;</td>
                <td>With this strategy, the library does not track free space that results
		      from the manipulation of HDF5 obejcts in the HDF5 file and
		      the free space becomes unaccounted space in the file.
		    <br>
		      When space is needed for file metadata or raw data,
		      the library first requests space from the aggregators. 
		      If the request is not satisfied, the library requests space from 
		      the virtual file driver. 
                </td>
              </tr>

              <tr valign="top">
                <td><code>H5F_FILE_SPACE_VFD</code></td>
                <td>With this strategy, the library does not track free space that results
		      from the manipulation of HDF5 obejcts in the HDF5 file and
		      the free space becomes unaccounted space in the file.
		    <br>
		      When space is needed for file metadata or raw data,
		      the library requests space from the virtual file driver. 
                </td>
              </tr>

            </table>
            <p>
            The <code><em>H5F_file_space_type_t</em></code> <small>ENUM</small>
            is fully described in <a href="../examples/H5F_file_space_type_t.html">
            <code>H5F_file_space_type_t.html</code></a>.
            </td></tr>

      <tr valign="top">
        <td><em>hsize_t </em><code>threshold</code>
            </td><td>&nbsp;</td>
        <td>IN: The free-space section threshold.
	    The library default is 1, which is to track all free-space sections.
            </td></tr>
    </table>


<!--__ *** RETURNS ***********************************************  -->
<!--__ Describe the datatype and meaning of the function's return   -->
<!--__ value.                                                       -->
<!--__                                                              -->
<!--__ Some examples are provided, each starting with a <dd> tag.   -->
<!--__ Select one of those and edit appropriately;                  -->
<!--__ delete the other examples.                                   -->
<!--__ If none are appropriate, write a similar entry.              -->
<!--__                                                              -->
<!--__ Guidelines for editing examples:                             -->
<!--__     Replace the string 'specify_the_item' with the           -->
<!--__     appropriate word(s), such as file, group, dataset,       -->
<!--__     named datatype, string, array, name, etc.                -->
<!--__                                                              -->
<!--__     In the case of hsize_t, specify the units;               -->
<!--__     typically, it will be bytes.                             -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>Returns:</strong>

    <dd>Returns a non-negative value if successful;
        otherwise returns a negative value.

  <p>


<!--__ *** FAILURE MODES *****************************************  -->
<!--__ Replace the text following the <dd> with a description       -->
<!--__ of how the function may fail.                                -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>Failure Modes:</strong>
    <dd>This routine will fail when the following is true:
<dir><pre>
<em>strategy</em> is not one of the valid values listed above.
</pre></dir>
<dir><pre>
The library fails to retrieve the file creation property list associated with <em>fcpl_id</em>.
</pre></dir>
<dir><pre>
The library fails to set the strategy and/or threshold in the file creation property list associated with <em>fcpl_id</em>.
</pre></dir>

<!--__ *** USAGE EXAMPLES ****************************************  -->
<!--__ Multiple examples may be given.  Two are shown below and     -->
<!--__ more can be added if needed (or one removed).                -->
<!--__                                                              -->
<!--__ Each usage example should have text describing the meanings  -->
<!--__ of the parameters following the <dd> tag.                    -->
<!--__ The sample usage line(s) should be entered between the       -->
<!--__ <dir><pre> and </pre></dir> tags.                            -->
<!--__ Multiple entries are separated by <p> tags.                  -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>Example Usage:</strong>

    <dd>The first example sets the file space management strategy for the file associated 
	with <code>fcpl</code> to <code>H5F_FILE_SPACE_ALL_PERSIST</code>.
	It also sets the free-space section threshold to <code>10</code>, which means that
	the library's free-space managers will track only free-space sections 
	whose size is >= 10 for the file.
<dir><pre>
H5Pset_file_space(fcpl, H5F_FILE_SPACE_ALL_PERSIST, (hsize_t)10);
</pre></dir>
    <p>

    <dd>The second example sets the file space management strategy for the
	file associated with <code>fcpl</code> to <code>H5F_FILE_SPACE_VFD</code>.
	It does not change the free-space section threshold in use for the file.
<dir><pre>
H5Pset_file_space(fcpl, H5F_FILE_SPACE_VFD, (hsize_t)0);
</pre></dir>
  <p>


<!--__ *** FORTRAN90 INTERFACE  **********************************  -->
<!--__ When the Fortran90 interface is complete, replace this       -->
<!--__ section with the Fortran90 subroutine description.           -->
<!--__                                                              -->
<!--__ See the file h5fortran_f_insert.htm for a template and       -->
<!--__ instructions.                                                -->
<!--__ ***********************************************************  -->
  <p>


<!--__ *** SEE ALSO **********************************************  -->
<!--__ Provide links to related documentation, such as related      -->
<!--__ functions, HDF5 structs, callback or operator function       -->
<!--__ descriptions, user guide sections, etc.                      -->
<!--__                                                              -->
<!--__ Ask a member of the documentation team if you need help      -->
<!--__ identifying or locating references.                          -->
<!--__                                                              -->
<!--__ Edit the sample links provided, and delete unneeded text.    -->
<!--__ The order is functions, callback or operator functions,      -->
<!--__ HDF5 structures, tools, then other documents.                -->
<!--__ Use a <p> between types of documents.                        -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>See Also:</strong>
    <dd><a href="../html/RM/RM_H5D.html#Dataset-Create">
        <code>H5Pget_file_space</code></a>
        &nbsp;
        <p>

        <a href="../html/RM/H5function.html#H5F_file_space_type_t">
        <code>H5F_file_space_type_t</code></a>
        <p>

        <a href="../html/RM/Tools.html#h5repack"><code>h5repack</code></a>
        <p>
        <a href="../html/RM/Tools.html#h5dump"><code>h5dump</code></a>
        <p>
        <a href="../html/RM/Tools.html#h5stat"><code>h5stat</code></a>
        <p>
        <a href="../../html/UG/index.html"><cite>HDF5 Guide to File Space Management</cite></a>


<!--__ *** HISTORY ***********************************************  -->
<!--__ Provide information about the HDF5 library version where the -->
<!--__ C function was first introduced, the Fortran subroutine was  -->
<!--__ first introduced, and when major changes to the function     -->
<!--__ or subroutine were made.                                     -->
<!--__                                                              -->
<!--__ Replace *.**.** below with the appropriate release number,   -->
<!--__ e.g., '1.10.4'.                                              -->
<!--__                                                              -->
<!--__ There are several minor variations on what you might need    -->
<!--__ to convey in the history section.  If you need assistance    -->
<!--__ or your task is not described, speak with Frank.             -->
<!--__ ***********************************************************  -->

<!--__ ***********************************************************  -->
<!--__ Do not modify the next 9 lines; they set up the table.       -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>History:</strong>
    <dd><table width="90%">
        <tr>
          <td valign="top" align="left" width="10%">
            <strong>Release</strong>&nbsp;&nbsp;&nbsp;&nbsp;</td>
          <td valign="top" align="left">
            <strong>Change</strong></td>
        </tr>

<!--__ ***********************************************************  -->
<!--__ If adding a new C functions, include the following 5 lines,  -->
<!--__ replacing '*.**.**' with the appropriate release number,     -->
<!--__ but otherwise without modification.                          -->
<!--__                                                              -->
<!--__ In each case below, use only the sections that apply.        -->
<!--__ ***********************************************************  -->
        <tr>
          <td valign="top">*.**.**</td>
          <td valign="top">
            C function introduced in this release.</td>
        </tr>

<!--__ ***********************************************************  -->
<!--__ If adding a new Fortran subroutine, include the following    -->
<!--__ 5 lines, replacing '*.**.**' with the appropriate release    -->
<!--__ number, but otherwise without modification.                  -->
<!--__ ***********************************************************  -->
        <tr>
          <td valign="top">*.**.**</td>
          <td valign="top">
            Fortran90 subroutine introduced in this release.</td>
        </tr>

<!--__ ***********************************************************  -->
<!--__ Do not modify the next 3 lines; they close the "History:"    -->
<!--__ table and the function entry.                                -->
<!--__ ***********************************************************  -->
        </tr>
        </table>
</dl>


