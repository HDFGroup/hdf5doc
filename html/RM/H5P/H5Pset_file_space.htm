

<!--
  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
  * Copyright by The HDF Group.                                               *
  * All rights reserved.                                                      *
  *                                                                           *
  * This file is part of HDF5.  The full HDF5 copyright notice, including     *
  * terms governing use, modification, and redistribution, is contained in    *
  * the files COPYING and Copyright.html.  COPYING can be found at the root   *
  * of the source code distribution tree; Copyright.html can be found at the  *
  * root level of an installed copy of the electronic HDF5 document set and   *
  * is linked from the top-level documents page.  It can also be found at     *
  * http://hdfgroup.org/HDF5/doc/Copyright.html.  If you do not have          *
  * access to either file, you may request a copy from help@hdfgroup.org.     *
  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 -->


<!--__ ***********************************************************  -->
<!--__ Do not alter the next line; it is used by the PDF generator. -->
<!--__ ***********************************************************  -->
<!-- NEW PAGE -->
<!-- HEADER RIGHT "H5Pset_file_space" -->
<hr>
<dl>

  <dt><div align=right><font color=999999 size=-1><i>
      Last modified: 10 February 2016
      </i></font></div>

  <dt><strong>Name:</strong> 
      <a name="Property-SetFileSpace">H5Pset_file_space</a>

  <dt><strong>Signature:</strong>
    <dd><em>herr_t </em><code>H5Pset_file_space</code>(
            <em>hid_t </em><code>fcpl_id</code>,
            <em>H5F_file_space_type_t </em><code>strategy</code>,
            <em>hsize_t </em><code>threshold</code>
        )

  <p>
  <dt><strong>Purpose:</strong>
    <dd>Sets the file space management strategy and/or
	free-space section threshold for an HDF5 file.

  <p>
  <dt><strong>Motivation:</strong>
    <dd><code>H5Pset_file_space</code> 
      provides the means for applications to manage an HDF5 file&rsquo;s 
      file space to meet specific needs.

  <p>
  <dt><strong>Description:</strong>
    <dd><code>H5Pset_file_space</code> 
      sets the file space management strategy for the file associated with 
      <code>fcpl_id</code> as specified in <code>strategy</code>  
      and sets the file-space threshold to <code>threshold</code>.
      <p>
      Available strategies are described in the 
      &ldquo;Parameters:&rdquo; section below.
      <p>
      This routine can also set the free-space section threshold to
      <code>threshold</code> so that the library&rsquo;s free-space managers 
      will track only free-space sections whose size is 
      greater than or equal to <code>threshold</code> for the file.
      <p>
      Passing <code>0</code> (zero) for <code>strategy</code> or 
      <code>thresold</code> indicates that the corresponding parameter&rsquo;s 
      value should not be modified as a result of the call.
      <p>
      <b>Note:</b> The file space management strategy and/or free-space 
      section threshold that are set via this routine cannot be changed once
      the file is created. 

  <p>
  <dt><strong>Parameters:</strong>
    <dd>
    <table border="0">
      <tr valign="top">
        <td colspan="3"><em>hid_t&nbsp;</em><code>fcpl_id</code>
            </td>
        </tr><tr>
        <td colspan="2"><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code></td>
        <td>IN: The file creation property list identifier.
            </td></tr>

      <tr valign="top">
        <td colspan="3"><em>H5F_file_space_type_t</em>&nbsp;<code>strategy</code>
        </td>
      </tr><tr>
        <td colspan="2">&nbsp;&nbsp;&nbsp;&nbsp;</td>
        <td>IN: The strategy for file space management.
            <p>
            Valid values are as follows:
            <table border="0">
              <tr valign="top">
                <td colspan="2"><code>H5F_FILE_SPACE_ALL_PERSIST</code></td>
                </tr><tr>
                <td><code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code></td>
                <td>With this strategy, the free-space managers track the
                    free space that results from the manipulation of 
                    HDF5 objects in the HDF5 file.  
                    The free space information is saved when the
                    file is closed, and reloaded when the file is reopened.
                    <br>
                    When space is needed for file metadata or raw data, 
                    the HDF5 library first requests space from the 
                    library's free-space managers. If the request is 
                    not satisfied, the library requests space from the 
                    aggregators. If the request is still not satisfied, 
                    the library requests space from the virtual file driver. 
                    That is, the library will use all of the mechanisms 
                    for allocating space.
                </td>
              </tr>

              <tr valign="top">
                <td colspan="2"><code>H5F_FILE_SPACE_ALL&nbsp;&nbsp;&nbsp;&nbsp;</code> 
                      <i>(Default file space management strategy)</i>
                      </td>
                </tr><tr>
                <td><code>&nbsp;</code></td>
                <td>With this strategy, the free-space managers track the 
                    free space that results from the manipulation of 
                    HDF5 objects in the HDF5 file.  
                    The free space information is NOT saved when the file 
                    is closed and the free space that exists upon 
                    file closing becomes unaccounted space in the file.
                    <br>
                    Like the previous strategy, the library will try all of 
                    the mechanisms for allocating space.  When space is 
                    needed for file metadata or raw data, the library first 
                    requests space from the free-space managers.  
                    If the request is not satisfied, the library requests
                    space from the aggregators.  If the request is still 
                    not satisfied, the library requests space from the 
                    virtual file driver.
                </td>
              </tr>

              <tr valign="top">
                <td colspan="2"><code>H5F_FILE_SPACE_AGGR_VFD</code></td>
                </tr><tr>
                <td><code>&nbsp;</code></td>
                <td>With this strategy, the library does not track free space 
                    that results from the manipulation of HDF5 obejcts in the 
                    HDF5 file and the free space becomes unaccounted space in 
                    the file.
                    <br>
                    When space is needed for file metadata or raw data,
                    the library first requests space from the aggregators. 
                    If the request is not satisfied, the library requests 
                    space from the virtual file driver. 
                </td>
              </tr>

              <tr valign="top">
                <td colspan="2"><code>H5F_FILE_SPACE_VFD</code></td>
                </tr><tr>
                <td><code>&nbsp;</code></td>
                <td>With this strategy, the library does not track free space 
                    that results from the manipulation of HDF5 obejcts in 
                    the HDF5 file and the free space becomes unaccounted space 
                    in the file.
                    <br>
                    When space is needed for file metadata or raw data,
                    the library requests space from the virtual file driver. 
                </td>
              </tr>
              <tr valign="top">
                <td colspan="2">
                    Passing a value of zero (<code>0</code>) indicates that 
                    the value of <code>strategy</code> is not to be modified.
                </td>
              </tr>

            </table>

            </td></tr>

      <tr valign="top">
        <td colspan="3"><em>hsize_t&nbsp;</em><code>threshold</code>
            </td>
        </tr><tr>
        <td colspan="2">&nbsp;</td>
        <td>IN: The free-space section threshold.
	    The library default is 1, which is to track all free-space sections.
            <p>
            Passing a value of zero (<code>0</code>) indicates that 
            the value of <code>threshold</code> is not to be modified.
            </td></tr>
    </table>

  <p>
  <dt><strong>Returns:</strong>

    <dd>Returns a non-negative value if successful;
        otherwise returns a negative value.

  <p>
  <dt><strong>Failure Modes:</strong>
    <dd>This routine will fail when any of the following is true:
        <ul>
            <li><code>strategy</code> is not one of the valid values listed 
                above.
            <li>The library fails to retrieve the file creation property 
                list associated with <code>fcpl_id</code>.
            <li>The library fails to set the strategy and/or threshold 
                in the file creation property list associated with 
                <code>fcpl_id</code>.
        </ul>

  <p>
  <dt><strong>Example Usage:</strong>

    <dd>The first example sets the file space management strategy for 
	the file associated with <code>fcpl</code> to 
        <code>H5F_FILE_SPACE_ALL_PERSIST</code>.
	It also sets the free-space section threshold to <code>10</code>, 
	which means that the library's free-space managers will track 
	only free-space sections whose size is greater than or equal to 10 
        for the file.

<dir><pre>
H5Pset_file_space(fcpl, H5F_FILE_SPACE_ALL_PERSIST, (hsize_t)10);
</pre></dir>
    <p>

    <dd>The second example sets the file space management strategy for 
	the file associated with <code>fcpl</code> to 
        <code>H5F_FILE_SPACE_VFD</code>.
	It does not change the free-space section threshold in use for 
        the file.

<dir><pre>
H5Pset_file_space(fcpl, H5F_FILE_SPACE_VFD, (hsize_t)0);
</pre></dir>
  <p>


<!--__ *** FORTRAN90 INTERFACE  **********************************  -->
<!--__ When the Fortran90 interface is complete, replace this       -->
<!--__ section with the Fortran90 subroutine description.           -->
<!--__                                                              -->
<!--__ See the file h5fortran_f_insert.htm for a template and       -->
<!--__ instructions.                                                -->
<!--__ ***********************************************************  -->
  <p>


  <p>
  <dt><strong>See Also:</strong>

<!-- FOR FINAL RM INTEGRATION

    <dd><a href="RM_H5P.html#Property-SetFileSpace">
        <code>H5Pset_file_space</code></a>
        <br />
        <a href="RM_H5P.html#Property-GetFileSpace">
        <code>H5Pget_file_space</code></a>
        <p>

        <a href="RM_H5F.html#File-GetFreeSections">
        <code>H5Fget_free_sections</code></a>
        <br />
        <a href="RM_H5F.html#File-GetFreespace">
        <code>H5Fget_freespace</code></a>
        <br />
        <a href="RM_H5F.html#File-GetInfo">
        <code>H5Fget_info</code></a>
        <p>

        <a href="Tools.html#h5repack"><code>h5repack</code></a>
        <br />
        <a href="Tools.html#h5dump"><code>h5dump</code></a>
        <br />
        <a href="Tools.html#h5stat"><code>h5stat</code></a>
        <p>

        <a href="../?????/FileSpaceManagement.pdf"><cite>HDF5 
        Guide to File Space Management</cite></a>

END FINAL RM INTEGRATION -->

<!-- FOR docNewFeatures ONLY                                -->

    <dd>
<!--
        <a href="H5Pset_file_space.htm">
        <code>H5Pset_file_space</code></a>
        <br />
-->
        <a href="H5Pget_file_space.htm">
        <code>H5Pget_file_space</code></a>
        <p>

        <a href="H5Fget_free_sections.htm">
        <code>H5Fget_free_sections</code></a>
        <br />
        <a href="H5Fget_freespace.htm">
        <code>H5Fget_freespace</code></a>
        <br />
        <a href="H5Fget_info.htm">
        <code>H5Fget_info</code></a>
        <p>

        <a href="h5repack.htm"><code>h5repack</code></a>
        <br />
        <a href="h5dump.htm"><code>h5dump</code></a>
        <br />
        <a href="h5stat.htm"><code>h5stat</code></a>
        <p>

        <a href="FileSpaceManagement.pdf"><cite>HDF5 
        Guide to File Space Management</cite></a>

<!-- END docNewFeatures ONLY                                -->

    </dd></dt>

  <p>
  <dt><strong>History:</strong>
    <dd><table width="90%">
        <tr>
          <td valign="top" align="left" width="10%">
            <strong>Release</strong>&nbsp;&nbsp;&nbsp;&nbsp;</td>
          <td valign="top" align="left">
            <strong>Change</strong></td>
        </tr>
        <tr>
          <td valign="top">1.10.0</td>
          <td valign="top">
            C function introduced in this release.</td>
        </tr>

<!--__ ***********************************************************  -->
<!--__ If adding a new C functions, include the following 5 lines,  -->
<!--__ replacing '*.**.**' with the appropriate release number,     -->
<!--__ but otherwise without modification.                          -->
<!--__ ***********************************************************  -->
<!--__ If adding a new Fortran subroutine, include the following    -->
<!--__ 5 lines, replacing '*.**.**' with the appropriate release    -->
<!--__ number, but otherwise without modification.                  -->
<!--__ ***********************************************************  -->
<!--
        <tr>
          <td valign="top">*.**.**</td>
          <td valign="top">
            Fortran90 subroutine introduced in this release.</td>
        </tr>
-->

<!--__ ***********************************************************  -->
<!--__ Do not modify the next 3 lines; they close the "History:"    -->
<!--__ table and the function entry.                                -->
<!--__ ***********************************************************  -->
        </tr>
        </table>
</dl>


