

<!--
  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
  * Copyright by The HDF Group.                                               *
  * Copyright by the Board of Trustees of the University of Illinois.         *
  * All rights reserved.                                                      *
  *                                                                           *
  * This file is part of HDF5.  The full HDF5 copyright notice, including     *
  * terms governing use, modification, and redistribution, is contained in    *
  * the files COPYING and Copyright.html.  COPYING can be found at the root   *
  * of the source code distribution tree; Copyright.html can be found at the  *
  * root level of an installed copy of the electronic HDF5 document set and   *
  * is linked from the top-level documents page.  It can also be found at     *
  * http://hdfgroup.org/HDF5/doc/Copyright.html.  If you do not have          *
  * access to either file, you may request a copy from help@hdfgroup.org.     *
  * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
 -->




<!--__ ** FUNCTION ENTRY TEMPLATE (h5function_entry.htm) ********** -->
<!--__ Last Updated:  July 16, 2009                                 -->
<!--__                                                              -->
<!--__ GENERAL INSTRUCTIONS                                         -->
<!--__                                                              -->
<!--__ This file provides a 'self-describing' template for          -->
<!--__ function entries in the HDF5 Reference Manual (RM).          -->
<!--__                                                              -->
<!--__ You should be able to print this file with these comments    -->
<!--__ exposed for reference; speak with Frank if you have trouble  -->
<!--__ doing so.                                                    -->
<!--__                                                              -->
<!--__ For a new function entry:                                    -->
<!--__   Rename this file as <function_name>.htm.                   -->
<!--__   E.g., the file for the function H5Ocreate_little_green_man -->
<!--__   would be H5Ocreate_little_green_man.htm.                   -->
<!--__                                                              -->
<!--__ For an existing function entry:                              -->
<!--__   Use this file as a guide to the latest content and         -->
<!--__   organization.  If desired, copy instructions and HTML      -->
<!--__   tags from this file into the existing function entry, and  -->
<!--__   use them as you make updates.                              -->
<!--__                                                              -->
<!--__                                                              -->
<!--__ To use the template:                                         -->
<!--__                                                              -->
<!--__ Replace instructional text with text relevant to the         -->
<!--__ function.                                                    -->
<!--__                                                              -->
<!--__ Lines beginning with '<!--__' are instructions to you,       -->
<!--__ the author; feel free to remove them as you go.              -->
<!--__                                                              -->
<!--__ In general, HTML tags (enclosed in < >'s) should not be      -->
<!--__ changed.                                                     -->
<!--__                                                              -->
<!--__ Indent in a style consistent with the example text.          -->
<!--__ When possible, limit line length to 80 characters.           -->
<!--__ Make exceptions for cases where HTML requires longer lines.  -->
<!--__ For example, some links are more than 80 characters long     -->
<!--__ and cannot be readily broken.                                -->
<!--__                                                              -->
<!--__ If the function description calls for a table, you may       -->
<!--__ insert open and close 'pre' tags:                            -->
<!--__          <pre>                                               -->
<!--__          </pre>                                              -->
<!--__ Insert the table contents formatted as aligned flat text     -->
<!--__ between the open and close 'pre' tags.                       -->
<!--__ BE SURE to let a member of the documentation team know that  -->
<!--__ you have done this when you finish with the file so that the -->
<!--__ flat text can be converted to an HTML table.                 -->
<!--__                                                              -->
<!--__                                                              -->
<!--__ FUNCTION NAME INSTRUCTIONS                                   -->
<!--__ Replace the string 'H5function_name' with the actual         -->
<!--__ function name everywhere it occurs in the file.              -->
<!--__                                                              -->
<!--__ SECTION-BY-SECTION INSTRUCTIONS                              -->
<!--__ Follow the embedded instructions for each section.           -->
<!--__                                                              -->


<!--__ ***********************************************************  -->
<!--__ Do not alter the next line; it is used by the PDF generator. -->
<!--__ ***********************************************************  -->
<!-- NEW PAGE -->


<!--__ *** HEADER RIGHT ******************************************  -->
<!--__ Update H5function_name; leave remainder of line unchanged    -->
<!--__ as it is also used by the PDF generator.                     -->
<!--__ ***********************************************************  -->
<!-- HEADER RIGHT "H5Fget_free_sections" -->
<hr>
<dl>
<!--__ *** LAST MODIFIED DATE ************************************  -->
<!--__ Replace "day month year" with the date the entry was created -->
<!--__ or last modified:  8 April 2009, for example.                -->
<!--__ ***********************************************************  -->
  <dt><div align=right><font color=999999 size=-1><i>
      Last modified: 24 July 2009
      </i></font></div>

<!--__ *** NAME **************************************************  -->
<!--__ Update H5function_name; leave remainder of line the same.    -->
<!--__ ***********************************************************  -->
  <dt><strong>Name:</strong> <a name="API-FunctionName">H5Fget_free_sections</a>


<!--__ *** SIGNATURE**********************************************  -->
<!--__ Update H5function_name and parameters in signature,          -->
<!--__ adjusting number of parameters as needed.                    -->
<!--__ ***********************************************************  -->
  <dt><strong>Signature:</strong>
    <dd><em>ssize_t </em><code>H5Fget_free_sections</code>(
            <em>hid_t </em><code>fcpl_id</code>,
            <em>H5F_mem_t </em><code>type</code>,
            <em>size_t </em><code>nsects</code>,
            <em>H5F_sect_info_t * </em><code>sect_info</code>
        )


<!--__ *** PURPOSE ***********************************************  -->
<!--__ This section provides a one-line description of the          -->
<!--__ function's purpose in sentence form.                         -->
<!--__ NOTE THAT THE PURPOSE IS NOT NECESSARILY A RECAPITULATION    -->
<!--__ OF WHAT THE FUNCTION DOES; RATHER, IT SHOULD DESCRIBE WHAT   -->
<!--__ THE FUNCTION IS MEANT TO ACCOPMLISH, FROM THE USER'S POINT   -->
<!--__ OF VIEW.  THIS IS A CHANGE FROM PAST PRACTICE.               -->
<!--__                                                              -->
<!--__ For consistency in presentation, several model statements    -->
<!--__ are provided below; if one is appropriate, edit it only      -->
<!--__ enough to accurately describe the function's purpose.        -->
<!--__ If none of the models are appropriate, write a parallel      -->
<!--__ statement that fits the function.                            -->
<!--__                                                              -->
<!--__ In many cases, a bit of elaboration at the end of the        -->
<!--__ sentence will be appropriate.  For example, the first line   -->
<!--__ in each pair below is more informative than the second.      -->
<!--__ In general, add useful details but keep the statement short. -->
<!--__                                                              -->
<!--__    Creates an attribute attached to a specified object.      -->
<!--__    Creates an attribute.                                     -->
<!--__                                                              -->
<!--__    Creates a dataset at a specified location.                -->
<!--__    Creates a dataset.                                        -->
<!--__                                                              -->
<!--__ Preferred verbs include the following:                       -->
<!--__    Retrieves     The value is returned in a parameter.       -->
<!--__    Returns       The value is the function's return value.   -->
<!--__    Determines    The library does not just look up a value,  -->
<!--__                      it has to figure it out.                -->
<!--__    Creates, Opens, Closes, Removes                           -->
<!--__                                                              -->
<!--__ Select one of the following purpose statements and edit as   -->
<!--__ appropriate:                                                 -->
<!--__     Replace strings such as 'specify_the_object' with the    -->
<!--__         name of the appropriate item (file, group, dataset,  -->
<!--__         etc.).                                               -->
<!--__     Replace strings such as 'Closes_or_deletes' with the     -->
<!--__         word (e.g., 'Closes' or 'Deletes').                  -->
<!--__     Et cetera.                                               -->
<!--__ If no example is appropriate, write a similar sentence.      -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>Purpose:</strong>
    <dd>Retrieves free-space section information for a file.

<!--__ *** MOTIVATION ********************************************  -->
<!--__ This an OPTIONAL section for functions that may need more    -->
<!--__ than the simple statement in "Purpose:" to enable a user     -->
<!--__ to understand the situations that might call for this        -->
<!--__ function's use and/or the types of problems it addresses.    -->
<!--__                                                              -->
<!--__ Update H5function_name and the motivation text.              -->
<!--__ ***********************************************************  -->

<!--__ *** DESCRIPTION *******************************************  -->
<!--__ The "Description" section provides a more detailed           -->
<!--__ description of the function and instructions for its use.    -->
<!--__                                                              -->
<!--__ Update H5function_name and the description text.             -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>Description:</strong>
    <dd><code>H5Fget_free_sections</code> 
      retrieves free-space section information for the free-space manager with
      <code>type</code> that is associated with file <code>fcpl_id</code>.
      If <code>type</code> is H5FD_MEM_DEFAULT, this routine retrieves free-space section
      information for all the free-space managers in the file.
      <p>
      This routine retrieves free-space section information for <code>nsects</code> 
      sections or at most the maximum number of sections in the specified 
      free-space manager.  If the number of sections is not known,
      a preliminary <code>H5Fget_free_sections()</code> call can be made by
      setting <code>sect_info</code> to NULL and the total number of free-space
      sections for the specified free-space manager will be returned.  
      Users can then allocate space for entries
      in <code>sect_info</code>, each of which is defined as an 
      <code>H5F_sect_info_t</code> struct (see <strong>Parameters</strong> section).
      <p>

<!--__ *** PARAMETERS ********************************************  -->
<!--__ This section is used to enumerate and describe the           -->
<!--__ parameters.  A type, name, direction (IN/OUT), and general   -->
<!--__ description must be given for each parameter.  Additional    -->
<!--__ information is often provided regarding the specific values  -->
<!--__ a parameter may assume and the meanings of those values.     -->
<!--__                                                              -->
<!--__ Enter the parameter types, names, directions, and            -->
<!--__ descriptions. HTML tables are used for parameters;           -->
<!--__ feel free to ask if you need assistance with the tables.     -->
<!--__                                                              -->
<!--__ For each parameter, indicate the parameter's "direction"     -->
<!--__ (input, output, or both) with respect to the function        -->
<!--__ via the IN, OUT, or IN/OUT notation at the beginning of      -->
<!--__ parameter description:                                       -->
<!--__     IN indicates the parameter is input to the function.     -->
<!--__     OUT indicates the parameter is set by the function.      -->
<!--__     IN/OUT indicates the parameter is input to the           -->
<!--__         function and is also set by the function.            -->
<!--__                                                              -->
<!--__ If the parameter type is a struct or ENUM type or            -->
<!--__ if the description is more involved than usual,              -->
<!--__ see the one of the accompanying template files:              -->
<!--__     Struct                H5parameter_struct_insert.htm      -->
<!--__     ENUM                  H5parameter_enum_insert.htm        -->
<!--__     Long description      H5parameter_long_insert.htm        -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>Parameters:</strong>
    <dd>
    <table>
      <tr valign="top">
        <td><em>hid_t </em><code>fcpl_id</code>
            </td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
        <td>IN: The file creation property list identifier.
            </td></tr>

      <tr valign="top">
        <td><em>H5F_mem_t</em>&nbsp;<code>type</code>
        </td><td>&nbsp;&nbsp;&nbsp;&nbsp;</td>
        <td>IN: The file memory allocation type.
            <p>
            Valid values are as follows:
            <table border=0>
              <tr valign="top">
                <td><code>H5FD_MEM_DEFAULT</code>&nbsp;&nbsp;</td>
                <td>The default file memory allocation type.
              <tr valign="top">
                <td><code>H5FD_MEM_SUPER</code></td>
                <td>File memory allocated for <em>Superblock</em>.
              <tr valign="top">
                <td><code>H5FD_MEM_BTREE</code></td>
                <td>File memory allocated for <em>B-tree</em>.
              <tr valign="top">
                <td><code>H5FD_MEM_DRAW</code></td>
                <td>File memory allocated for raw data.
              <tr valign="top">
                <td><code>H5FD_MEM_GHEAP</code></td>
                <td>File memory allocated for <em>Global Heap</em>.
              <tr valign="top">
                <td><code>H5FD_MEM_LHEAP</code></td>
                <td>File memory allocated for <em>Local Heap</em>.
              <tr valign="top">
                <td><code>H5FD_MEM_OHDR</code></td>
                <td>File memory allocated for <em>Object Header</em>.
            </table>
            <p>
            There are other file memory allocation types that are mapped to the above six
	    basic types.  The <code><em>H5F_mem_t</em></code> <small>ENUM</small>
            is fully described in <a href="../examples/H5F_mem_t.html">
            <code>H5F_mem_t.html</code></a>.
            </td></tr>

      <tr valign="top">
        <td><em>hsize_t </em><code>nsects</code>
            </td><td>&nbsp;</td>
        <td>IN: The number of free-space sections.
            </td></tr>

      <tr>      
        <td valign="top"><em>H5F_sect_info_t&nbsp;*</em><code>sect_info</code>
        </td> 
        <td>&nbsp;</td>
        <td valign="top">IN/OUT:  Pointer to instances of
            <a href="H5F_sect_info_t.html">
            <code><em>H5F_sect_info_t</em></code></a>
            in which the free-space section information is to be returned.
	    <p>
	    An <em>H5F_sect_info_t</em> struct is defined as follows
	    (in <code>H5Fpublic.h</code>):
	<pre>
        typedef struct H5F_sect_info_t {
            haddr_t           addr;	/* address of the free-space section */
            hsize_t           size;	/* size of the free-space section */
        } H5F_sect_info_t;
	</pre>

    </table>


<!--__ *** RETURNS ***********************************************  -->
<!--__ Describe the datatype and meaning of the function's return   -->
<!--__ value.                                                       -->
<!--__                                                              -->
<!--__ Some examples are provided, each starting with a <dd> tag.   -->
<!--__ Select one of those and edit appropriately;                  -->
<!--__ delete the other examples.                                   -->
<!--__ If none are appropriate, write a similar entry.              -->
<!--__                                                              -->
<!--__ Guidelines for editing examples:                             -->
<!--__     Replace the string 'specify_the_item' with the           -->
<!--__     appropriate word(s), such as file, group, dataset,       -->
<!--__     named datatype, string, array, name, etc.                -->
<!--__                                                              -->
<!--__     In the case of hsize_t, specify the units;               -->
<!--__     typically, it will be bytes.                             -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>Returns:</strong>

    <dd>Returns the number of free-space sections for the specified free-space manager
	in the file;
        otherwise returns a negative value.

  <p>


<!--__ *** FAILURE MODES *****************************************  -->
<!--__ Replace the text following the <dd> with a description       -->
<!--__ of how the function may fail.                                -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>Failure Modes:</strong>
    <dd>This routine will fail when the following is true:
<dir><pre>
The library fails to retrieve the file creation property list associated with <em>fcpl_id</em>.
</pre></dir>
<dir><pre>
If the parameter <em>sect_info</em> is nonnull, but the parameter <em>nsects</em> is equal to 0.
</pre></dir>
<dir><pre>
The library fails to retrieve free-space section information for the file associated with
the file creation property list <em>fcpl_id</em>.
</pre></dir>

<!--__ *** USAGE EXAMPLES ****************************************  -->
<!--__ Multiple examples may be given.  Two are shown below and     -->
<!--__ more can be added if needed (or one removed).                -->
<!--__                                                              -->
<!--__ Each usage example should have text describing the meanings  -->
<!--__ of the parameters following the <dd> tag.                    -->
<!--__ The sample usage line(s) should be entered between the       -->
<!--__ <dir><pre> and </pre></dir> tags.                            -->
<!--__ Multiple entries are separated by <p> tags.                  -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>Example Usage:</strong>

    <dd>The first example shows that the first call to <code>H5Fget_free_sections()</code>
	returns the total number of free-space sections in <code>nsects</code> for all
	the free-space managers in the file that is associated with <code>fcpl</code>.
	The second call to <code>H5Fget_free_sections()</code> retrieves 
	free-space section information in <code>sect_info</code>
	for <code>nsects</code> sections.
	The value in <code>ret</code> is the same as <code>nsects</code>.
<dir><pre>
nsects = H5Fget_free_sections(fcpl, H5FD_MEM_DEFAULT, 0, NULL);
:
: <em>Allocate space for entries in sect_info</em>
:
ret = H5F_get_free_sections(fcpl, H5FD_MEM_DEFAULT, nsects, sect_info);
</pre></dir>
    <p>

    <dd>The second example shows that the first call to <code>H5Fget_free_sections()</code>
	returns the total number of free-space sections in <code>nsects</code> for
	the <code>H5FD_MEM_SUPER</code> free-space manager in the file that is associated 
	with <code>fcpl</code>.
	Even though there are <code>nsects</code> sections for the specified free-space
	manager, the second call to <code>H5Fget_free_sections()</code> retrieves 
	free-space section information in <code>sect_info</code>
	for <code>nsects-1</code> sections as requested.
	The value in <code>ret</code> is the same as <code>nsects</code>.
<dir><pre>
nsects = H5Fget_free_sections(fcpl, H5FD_MEM_SUPER, 0, NULL);
:
: <em>Allocate space for entries in sect_info</em>
:
ret = H5F_get_free_sections(fcpl, H5FD_MEM_SUPER, nsects-1, sect_info);
</pre></dir>
  <p>

    <dd>The third example shows that the first call to <code>H5Fget_free_sections()</code>
	returns the total number of free-space sections in <code>nsects</code> for
	the <code>H5FD_MEM_BTREE</code> free-space manager in the file that is associated 
	with <code>fcpl</code>.
	Even though the second call to <code>H5Fget_free_sections()</code>
	requests <code>nsects+1</code> sections,
	the routine retrieves free-space section information in <code>sect_info</code> 
	for only <code>nsects</code> sections.
	The value in <code>ret</code> is the same as <code>nsects</code>.
<dir><pre>
nsects = H5Fget_free_sections(fcpl, H5FD_MEM_BTREE, 0, NULL);
:
: <em>Allocate space for entries in sect_info</em>
:
ret = H5F_get_free_sections(fcpl, H5FD_MEM_BTREE, nsects+1, sect_info);
</pre></dir>
  <p>

<!--__ *** FORTRAN90 INTERFACE  **********************************  -->
<!--__ When the Fortran90 interface is complete, replace this       -->
<!--__ section with the Fortran90 subroutine description.           -->
<!--__                                                              -->
<!--__ See the file h5fortran_f_insert.htm for a template and       -->
<!--__ instructions.                                                -->
<!--__ ***********************************************************  -->
  <p>


<!--__ *** SEE ALSO **********************************************  -->
<!--__ Provide links to related documentation, such as related      -->
<!--__ functions, HDF5 structs, callback or operator function       -->
<!--__ descriptions, user guide sections, etc.                      -->
<!--__                                                              -->
<!--__ Ask a member of the documentation team if you need help      -->
<!--__ identifying or locating references.                          -->
<!--__                                                              -->
<!--__ Edit the sample links provided, and delete unneeded text.    -->
<!--__ The order is functions, callback or operator functions,      -->
<!--__ HDF5 structures, tools, then other documents.                -->
<!--__ Use a <p> between types of documents.                        -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>See Also:</strong>
    <dd>
        <a href="../html/RM/Tools.html#h5stat"><code>h5stat</code></a>
        <p>
        <a href="../../html/UG/index.html"><cite>HDF5 Guide to File Space Management</cite></a>


<!--__ *** HISTORY ***********************************************  -->
<!--__ Provide information about the HDF5 library version where the -->
<!--__ C function was first introduced, the Fortran subroutine was  -->
<!--__ first introduced, and when major changes to the function     -->
<!--__ or subroutine were made.                                     -->
<!--__                                                              -->
<!--__ Replace *.**.** below with the appropriate release number,   -->
<!--__ e.g., '1.10.4'.                                              -->
<!--__                                                              -->
<!--__ There are several minor variations on what you might need    -->
<!--__ to convey in the history section.  If you need assistance    -->
<!--__ or your task is not described, speak with Frank.             -->
<!--__ ***********************************************************  -->

<!--__ ***********************************************************  -->
<!--__ Do not modify the next 9 lines; they set up the table.       -->
<!--__ ***********************************************************  -->
  <p>
  <dt><strong>History:</strong>
    <dd><table width="90%">
        <tr>
          <td valign="top" align="left" width="10%">
            <strong>Release</strong>&nbsp;&nbsp;&nbsp;&nbsp;</td>
          <td valign="top" align="left">
            <strong>Change</strong></td>
        </tr>

<!--__ ***********************************************************  -->
<!--__ If adding a new C functions, include the following 5 lines,  -->
<!--__ replacing '*.**.**' with the appropriate release number,     -->
<!--__ but otherwise without modification.                          -->
<!--__                                                              -->
<!--__ In each case below, use only the sections that apply.        -->
<!--__ ***********************************************************  -->
        <tr>
          <td valign="top">*.**.**</td>
          <td valign="top">
            C function introduced in this release.</td>
        </tr>

<!--__ ***********************************************************  -->
<!--__ If adding a new Fortran subroutine, include the following    -->
<!--__ 5 lines, replacing '*.**.**' with the appropriate release    -->
<!--__ number, but otherwise without modification.                  -->
<!--__ ***********************************************************  -->
        <tr>
          <td valign="top">*.**.**</td>
          <td valign="top">
            Fortran90 subroutine introduced in this release.</td>
        </tr>

<!--__ ***********************************************************  -->
<!--__ Do not modify the next 3 lines; they close the "History:"    -->
<!--__ table and the function entry.                                -->
<!--__ ***********************************************************  -->
        </tr>
        </table>
</dl>


